<!DOCTYPE html>
<html en="en">
<head>
    <title >Documentation of Automatic LaTeX Plugin for Vim</title>
    <link rel="stylesheet" href="doc_style.css"> 
    <link rel="shortcut icon" type="image/x-icon" href="vim_shortcut.ico">
</head>
</body>
<h1 align=center>An Introduction to AUTOMATIC (La)TeX PLUGIN (ver.
    9.6.1)</h1><br>
<p align=center>	    by Marcin Szamotulski<br>
		    atp-vim-list [AT] lists.sourceforge.net <br></p>

<p>If you found this plugin useful or you have any kind of problems with running
it or some ideas to share, you are cordially invited to write to me:
mszamot@gmail.com. Voting at Vim site is also welcome ;) .</p>

<h2 align=center>ABSTRACT </h2>

<p>This is a filetype plugin for Vim to comfortably write [TeX], [LaTeX],
 [PdfLaTeX],...  documents, which provides functionality not met in other
plugins. It makes you [FREE] from compiling procedure, making this process
automatic using autocommands. It also provides useful mappings and other
many other commands: to analyse your .log file, to see the table contents, to
search for a label, to search in bib files or to find a macro definition
matching a pattern, or even to find and preview fonts in your tex
distribution. The features include a multi-functional tab completion for:
commands, environment names, packages, input files, bib files, bst files,
colours, closing brackets and environments (preserves nesting),... etc. To
have full functionality you need: python (with nonstandard psutil library, see
|atp-requirements-python| how to get it), pdffonts available in the package
'app-text/poppler' (at least in Gentoo).  Another good tool is texdoc, which
is a part of TexLive - these days standard TeX distribution for Linux, and
MikTeX on Windows.</p>

<h2>FEATURES INCLUDE: </h2>
* background compilation, debugging modes, progress bar<br>
* command to make the document (cross references, references, index, tables
of contents) <a href="#atp-:MakeLatex">atp-:MakeLatex</a>,<br>
* completion for commands, closing environments (even nested), package names,
citations and labels. Support for some latex packages.<br>
<div class=indented>See <a href="#atp-completion">atp-completion</a>,</div>
* table of contents which allows to switch between different sections, files, 
but also to delete and paste sections:<br>
<div class=indented>See <a href="#atp-:TOC">atp-:TOC</a>, <a href="#atp-toc-window"></a></div>
* list of labels which allows to see the context of a label:<br>
<div class=indented>See <a href="#atp-:Labels">atp-:Labels</a>,</div>
* a command to get bib data from the <a href="http://www.ams.org/mathscinet-mref"><i>AMSRef web page</i></a>:<br>
<div class=indented>See <a href="#atp-:AMSRef">atp-:AMSRef</a>,</div>
* a powerful function to search in bibliographic files (bib files):<br>
<div class=indented>See <a href="#atp-bibsearch">atp-bibsearch</a>,</div>
* a command to list ToDo lines:<br>
<div class=indented>See <a href="#atp-:ToDo">atp-:ToDo</a>,</div>
* a command to search for a macro definition (multi-line support):<br>
<div class=indented>See <a href="#atp-:Dsearch">atp-:Dsearch</a>,</div>
* a command to search and PREVIEW fonts in your latex distribution:<br>
<div class=indented>See <a href="#atp-:FontSearch">atp-:FontSearch</a>, and <a
    href="#atp-:FontPreview">atp-:FontPreview</a>,</div>
* indentation<br>

<a name="atp-sourceforge"></a><br>
<h2>SOURCEFORGE</h2><br><br>

The project is hosted on <a href="http://sourceforge.net/projects/atp-vim/">SourceForge</a><br>
    

<a name="atp-donate"></a><br>
<h3>Donate</h3><br>
<p>You can [DONATE] for this project through your [PayPal] account (my email
    is <mszamot [AT] gmail [dot] com>). This will be highly appreciated. You
    can also feel like you are supporting my [PhD] in Mathematics :). Whether
    you donate or not you are always cordially invited to give suggestions,
    feature requests, bug reports or just to write that you like it or not :).</p><br>
    Thank You.<br>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
	<input type="hidden" name="cmd" value="_s-xclick">
	<input type="hidden" name="hosted_button_id" value="B3R4JZSQMKCMW">
	<input type="image"
	src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif"
	border="0" name="submit" alt="PayPal - The safer,
	easier way to pay online!">
	<img alt="" border="0"
	src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif"
	width="1" height="1">
    </form>
    

    <p>Note: The donations are accepted through PayPal, if you are from Europe
    and you want to donate Euro, use your PayPal account rather than
    SourceForge link where you cannot donate Euro (avoiding twice money
    exchange).</p>

<a name="atp-mailing-list"></a>
<p>- There is a mailing list which will serve for: feature requests, bug
reports, suggestions. You can subscribe with this <a
    href="https://lists.sourceforge.net/lists/listinfo/atp-vim-list">link</a></p>

<p>- For detailed list of changes you can look <a href="http://atp-vim.svn.sourceforge.net/viewvc/atp-vim/trunk/?sortby=rev&view=log">here</a></p>
    

<p>  - Project news can be tracked through sourceforge watch feature (you need
sourecforge account)</p>

<p>  - SourceForge hosts stable <a
    href="http://sourceforge.net/projects/atp-vim/files/releases/">releases</a>
(also available on Vim web page) but also <a
    href="http://sourceforge.net/projects/atp-vim/files/snapshots/">snapshots</a>
of unstable developed new version. The snapshots might contains fixes and new
features which might not yet work well, or might change (commands, maps, etc
...).</p>
    

<a name="atp"></a>
<a name="atp-help-toc"></a>
<h2>TABLE OF CONTENTS</h2>
<a href="#atp-news">News</a><br>
<a href="#atp-installation">Installation</a><br>
<a href="#atp-commands">Functions and Commands</a><br>
<h3><div class=indented>Some Main Commands:</div></h3>
    <h4><div class=double_indent>compile</div><h4>
	<div class=triple_indent><a href="#atp-:TEX">atp-:TEX</a></div>
	<div class=triple_indent><a href="#atp-:MakeLatex">atp-:MakeLatex</a></div>
	<div class=triple_indent><a href="#atp-:Bibtex">atp-:Bibtex</a></div>
	<div class=triple_indent><a href="#atp-:DebugMode">atp-:DebugMode</a></div>
	<div class=triple_indent><a href="#atp-:ShowError">atp-:ShowErrors</a></div>
	<div class=triple_indent><a href="#atp-:ErrorFormat">atp-:ErrorFormat</a></div>
	<div class=triple_indent><a href="#atp-:Kill">atp-:Kill</a></div>
    <h4><div class=double_indent>viewer</h4></div>
	<div class=triple_indent><a href="#atp-:ViewOutput">atp-:ViewOutput</a></div>
	<div class=triple_indent><a href="#atp-:SyncTex">atp-:SyncTex</a> /forward searching/</div>
    <h4><div class=double_indent>diff</h4></div>
	<div class=triple_indent><a href="#atp-:Wdiff">atp-:Wdiff</a></div>
    <h4><div class=double_indent>motion</h4></div>
	<div class=triple_indent><a href="#atp-:TOC">atp-:TOC</a></div>
	<div class=triple_indent><a href="#atp-:F">atp-:F</a></div>
	<div class=triple_indent><a href="#atp-:B">atp-:B</a></div>
	<div class=triple_indent><a href="#atp-:Tags">atp-:Tags</a> /make tags file/</div>
    <h4><div class=double_indent>search</h4></div>
	<div class=triple_indent><a href="#atp-:Dsearch">atp-:Dsearch</a> /definition search/</div>
	<div class=triple_indent><a href="#atp-:S">atp-:S</a> /search in projects/</div>

<div ><a href="#atp-toc-window">Commands/Maps in ToC window and Labels window.</a></div>
<div><a href="bibtex_atp.html">Bibtex filetype plugin</a> </div>
<div><a href="#atp-bibsearch">Searching in bib files</a> </div>
<div class=indented><a href="#atp-variables-bib">BibSearch Variables</a></div>
<div><a href="#atp-completion">Tab Completion</a> </div>
<div class=indented><a href="#atp-completion-modes">Completion Modes</a></div>
<div class=double_indent><a href="#atp-completion-commands">Completion for Commands</a></div>
<div class=double_indent><a href="#atp-completion-tikzpicture">Completion for Tikzpicutre Environment</a></div>
<div class=double_indent><a href="#atp-completion-ref">Completion for \ref/\label/\cite commands</a></div>
<div class=double_indent><a href="#atp-completion-brackets">Completion for Brackets</a></div>
<div class=double_indent><a href="#atp-completion-env">Completion for Environments</a></div>
<div class=double_indent><a href="#atp-completion-abbreviations">Completion for Abbreviations</a></div>
<div class=double_indent><a href="#atp-completion-fontdeclaration">Completion for Font Commands</a></div>
<div class=double_indent><a href="#atp-completion-bibstyle">Completion for \bibstyle Command</a></div>
<div class=double_indent><a href="#atp-completion-documentclass">Completion for \documentclass Command</a></div>
<div class=indented><a href="#atp-completion-variables">Completion Variables</a></div>
<div><a href="#atp-omnicompletion">Omni Completion</a></div>
<div class=indented><a href="#atp-omnicompletion-commands">Omni Completion for Commands</a></div>
<div class=indented><a href="#atp-omnicompletion-environments">Omni Completion for Environments</a></div>
<div class=indented><a href="#atp-omnicompletion-labels">Omni Completion for Labels</a></div>
<div class=indented><a href="#atp-omnicompletion-bibtex">Omni Completion for Bib Entries</a></div>
<div><a href="#atp-configure"><b>Variables</b></a> How to configure ATP to your needs</div>
<div><a href="#atp-ProjectFiles">A note how to write project files within ATP</a></div>
<div><a href="#atp-ProjectScript">A script executing project specific settings</a></div>.
<div><a href="#atp-mappings"><b>Mappings</b></a></div>
<div><a href="#atp-abbreviations"><b>Abbreviations</b></a></div>
<div><a href="#atp-errors">Debugging ATP</a></div>
<div><a href="#atp-editing"><b>Editing tools</b></a></div>
<div><a href="#atp-requirements">Requirements</a></div>
<div><a href="#atp-viewers"><b>Viewers</b></a> (<b>with how to configure reverse searching for Okular</b>)</div>
			
<div><a href="#atp-tips">Some tex oriented tips</a></div>
<div><a href="#atp-highlight">Colours and syntax files</a></div>
<div><a href="#atp-remarks">Final remarks</a></div>
<div><a href="#atp-copy-rights"><em>Copy Rights</em></a></div>

<a name="atp-news"></a>
<h2>NEWS</h2>							

<h3>Changes in version 9.6</h3>

<p>Some functions where rewritten in python making ATP much faster.</p>

  <p>ATP loads 1/3 faster (after first run when you save project file, which is
  done when you save your file!).</p>

  <p>Use g:atp_no_local_abbreviations if you don't want to have abbreviations to
  locally defined environments (this takes time if your vim was compiled
  without |+python| feature, as it runs <a href="#atp-:LocalCommands">atp-:LocalCommands</a> command - which
  is slow in this case). </p>

  <p>Note: the python version of LocalCommands will save the current buffer,
  without saving project script and with 'nowritebackup' and 'nobackup' set. </p>

  <p>I added <a href="#b:atp_LocalEnvironments">b:atp_LocalEnvironments</a>, <a
      href="#b:atp_LocalCommands">b:atp_LocalCommands</a> and <a
      href="#b:atp_LocalColors">b:atp_LocalColors</a> to <a
      href="#g:atp_ProjectLocalVariables">g:atp_ProjectLocalVariables</a> if
  vim doesn't have +python feature otherwise <a
      href="#g:atp_local_completion">g:atp_local_completion</a> is set to 2,
  hence <a href="#atp-:LocalCommands">atp-:LocalCommands</a> is run with
  BufEnter. It is so because the function LocalCommands was written also in
  python which is more than 10 times faster than the old vim
  implementation.</p>

  <p><a href="#atp-:ViewOutput">atp-:ViewOutput</a> -- removed the [sync] argument.</p>

  <p><a href="#atp-:BibSearch">atp-:BibSearch</a> is written in python. It is much faster. Thus the argument
  should be a python regular expression. If you want to use vim script (and
  vim regular expression) set <a href="#g:atp_bibsearch">g:atp_bibsearch</a>="vim". Then both Tab
  Completion and <a href="#atp-:BibSearch">atp-:BibSearch</a> will use vim code.</p>

  <p>Tab completion for labels (\ref and \eqref commands) gives more information
  inside the popup menu.</p>
 
  <p>The F2 map is back -- it turns on/off <space> cmap to \_s\+. But this time
  this map by default is turned on. It is made to it doesn't interact with
  other command modes than / and ?. If you want to turn in off/on use F2. If
  you want to turn it off in your vimrc or <a href="#atprc">atprc</a> files
  use: <div class=variable>let g:atp_cmap_space = 0</div> Pressing F2 will
  define this map.</p>


  <p>Some other small fixes.</p>

<h3>Changes in version 9.5</h3>

    <p>The keys j, k, gj and gk are no longer mapped by ATP. There is a better
    solution for updating the Table of Contents highlighted line. It is done
    using autocommand CursorHold.</p>

    <p>See the new command <a href="#atp-:Tags">atp-:Tags</a>.</p>

<a href="#atp-:Dsearch">atp-:Dsearch</a>
<div class=command>:Dsearch</div>
    <p>This used to be :DefiSearch. This I found more in vim style.
    Also <a href="#g:atp_DsearchMaxWindowHeight">g:atp_DsearchMaxWindowHeight</a> is used instead of
    g:atp_DefiSearchMaxWindowHeight.</p>

<p><a href="#g:atp_statusOutDir">g:atp_statusOutDir</a> fixed.</p>
<p><a href="#g:atp_IMapCC">g:atp_IMapCC</a> instead of g:atp_MapCC.</p>

<p>And bunch of other fixes :).</p>

<h4>TIP</h4>
<p>Checkout cmdalias plugin (vimscript#745). It lets define lower case
aliases to commands. You can put in your <a href="#atprc">atprc</a> file:
<div class=indented>Alias tex TEX</div>
<div class=indented>Alias toc TOC</div></p>

<h3>Changes in version 9.4</h3>

<h4>ATP and Gentoo Linux</h4>
<p>Thanks to Tim Harder there is a gentoo ebuild, if you use gentoo check for
automatictexplugin in the portage tree.</p>

<h4>Completion</h4>
<p>Small but nice change in closing environments: If you type
\begin{envname}<Tab> the cursor position will not change. You can use
i_CTRL-M (i_CTRL-J is used by <a href="#atp-j_motion">atp-j_motion</a>) after <Tab> to open new
line inside {envname}.  Otherwise the cursor position will be right after
the closing \end{envname}.</p>

<h4>Local Commands</h4>
<p><a href="#atp-:LocalCommands">atp-:LocalCommands</a><br>
<div class=double_indent>-- do not search in comments, </div>
<div class=double_indent>-- add single { if command has defined arguments.</div></p>

<p>Note: the format of viewer options has changed from a string to a vim
list.  Every option and its value should be placed as a separate element
of vim list.  See <a href="#atp-Viewers_Options">atp-Viewers_Options</a> for examples.</p>

<h4>New imaps</h4>
<p>New imaps for some commonly used math commands: see <a href="#atp-imap-math">atp-imap-math</a>.</p> 

<p>All mathematical imaps: for symbols, greek letters, are defined only when
inside LaTeX (or TeX) mathematical environment.</p> 

<p>There is new predefined layout for environment imaps available, but
disabled by default. If you like longer and more intuitive environment
insert mode maps set <a
    href="#g:atp_ShortEnvIMaps">g:atp_ShortEnvIMaps</a>=0 in your vimrc or
<a href="#atpr">atprc</a>c files. Use <a
    href="#atp-:HelpEnvIMaps">atp-:HelpEnvIMaps</a> to see them. There is
also one new environment ]let in this new layout which inputs a letter
environment. If you want a short imap for it you can set
g:atp_imap_letter="w" and ATP will make a map ]w for it.  Note that "l",
and "L" are already taken and using "le" will slow down "l", also "e" and
"r" are used, so there is no good choice for it. You can set <a
    href="#g:atp_letter_opening">g:atp_letter_opening</a> and <a
    href="#g:atp_letter_closing">g:atp_letter_closing</a> to customize
default opening and closing statements.</p>

<p>If you decide to use short imaps (the default) there is one change: ]i is
mapped to \item and ]I is mapped to itemize environment (this is the only
type of change in the short layout. In long layout ]I is mapped ot \item
and ]ite is mapped to itemize environment.</p>

<p>There is also a small change with <Tab> completion: after typing
\begin{envname}<Tab> the cursor will not move, so you can use |i_CTRL-M|
to open new line.</p>

<p>The abbreviations are customizable: g:atp_imap_{envname}, also the
leader is customizable with <a
    href="#g:atp_imap_third_leader">g:atp_imap_third_leader</a> and
environment names for example if you set <a
    href="#g:atp_EnvNameTheorem">g:atp_EnvNameTheorem</a>="thm" then ]the
imap will insert \begin{thm}:\end{thm} pair. You can list supported
environments with ':let g:atp_EnvName<C-d>'. If you set
g:atp_imap_{envname} to empty string "" the corresponding imap will not be
defined.</p>

<p>See also <a href="#atp-:ToggleMathIMaps">atp-:ToggleMathIMaps</a>.</p>

<h4>New Motions</h4>
<a name="atp-&gtE"></a> <a name="atp-&ltE"></a> <p>There are two more nice map
>E which is something like %>e, i.e. jump over the current environment and
go to next one. The reverse <E is also implemented, thought it is not
simply <e%. They do not support count (yet), and actually count breaks
them. If you want to add zz, (zt or zb) after >E you can put this in your
|atprc| file:
<div class=indented>map <buffer> <silent> >E	<Plug>JumptoNextEnvironmentzz</div>
<div class=indented>map <buffer> <silent> <E	<Plug>JumptoPreviousEnvironmentzz</div></p>

<p><a href="#atp--S">atp--S</a>, <a href="#atp--s">atp--s</a>, <a
    href="#atp--c">atp--c</a>, <a href="#atp--p">atp--p</a> new maps for <a
    href="#atp-:SSec">atp-:SSec</a>, <a href="#atp-:Sec">atp-:Sec</a>, <a
    href="#atp-:Chap">atp-:Chap</a> and <a href="#atp-:Part">atp-:Part</a>.
They also works relatively to the current unit (section/chapter/part), i.e.
2]s will jump to second section of the current chapter.</p>


<h4>Updatetime</h4>
<p><a href="#g:atp_updatetime_insert">g:atp_updatetime_insert</a> can be
changed on the fly to 0 (previously it requires to quitting vim and making
changes in vimrc/<a href="#atprc">atprc</a> files.</p> 

<h4>Make LaTeX</h4>
<p><a href="#atp-:MakeLatex">atp-:MakeLatex</a> is rewritten in python. The
"!" is not yet implemented.</p>

<h4>Python 3 compatibility</h4>
<p>All python scripts are compatible with Python 3. Traceback info is
forwarded to vim (and log files) in case exceptions are handled.</p>

<h4>Dictionaries</h4>
<p>I added extended versions of dictionaries of latex-suite to ATP (the files
dictionaries/dictionary and dictionary/SIunits). They are added to
'complete' vim option, so you can use them through ins-completion.
I made one more dictionary (dictionaries/ams_dictionary) with ams commands
and environment names. It will be added to the vim 'complete' option if
you use amsmath package or if the document class is one of the standard
ams classes or of <a href="#g:atp_amsmath">g:atp_amsmath</a> is set to 1.</p>

<h4>Status Line</h4>
<p>Status notifications has the ability to show if <a
    href="#b:atp_BibCompiler">b:atp_BibCompiler</a>, or "makeindex" are
running. Unless |g:atp_statusNotif|=0 or <a
    href="#g:atp_callback">g:atp_callback</a>=0 <a
    href="#atp-:MakeLatex">atp-:MakeLatex</a> will echo a single message
when it returns.</p>

<p>There is also new status line for QuickFix window with number of errors
and warnings printed (this depends on <a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a>).</p>

<h4>Biber and BibLaTeX Support</h4>
<p>Support for biber and biblatex is added (in <a href="#atp-:MakeLatex">atp-:MakeLatex</a>,
<a href="#atp-:Bibtex">atp-:Bibtex</a>, <a href="#atp-:Delete">atp-:Delete</a>, <a href="#atp-:InputFiles">atp-:InputFiles</a> commands), <a href="#g:atp_kee">g:atp_keep</a>p
variable will adjust on the fly (add run.xml and bcf extensions).
<a href="#b:atp_BibCommand">b:atp_BibCommand</a> will be set to biber if the preamble contains
\usepackage[backend=biber]{biblatex}</p>

<p>If you use biblatex, it allows for putting \bibliography{} type commands
only in the preamble. Thus ATP will search for them only there. The <a
    href="#g:atp_inputfile_pattern">g:atp_inputfile_pattern</a> might not
contain any pattern for bibliographies (\addbibresource, \bibliography,
etc.). The <a href="#atp-:InputFiles">atp-:InputFiles</a> command will
search for them in a special subroutine which only searches in the
preamble.  This makes it work slightly faster.</p>

<h4>TeX Options Variable (new format)</h4>
<p><a href="#b:atp_TexOptions">b:atp_TexOptions</a> is a comma separated list of TeX compiler options.
If you use <a href="#g:atp_Compiler">g:atp_Compiler</a>="bash" this might be just a white space
separated list.</p>
<a href="#atp-space">atp-space</a>
<h4>Space cmap</h4>
<div class=map>cmap <buffer> <C-Space> 	\_s\+</div>
<div class=map>cmap <buffer> <C-_> 	\_s\+</div>
<p>The C-Space Vim, instead C-@ is used which works as C-Space. In Vim, and
gVim as well, you can also use <a href="#atp-Q/">atp-Q/</a>, <a
    href="#atp-Q?">atp-Q?</a> where <Space> is mapped to \_s\+.</p>

<p>Note: from version 9.6 Space is mapped to \_s\+ in cmdline modes / and
?.  F2 turns it on/off. The above maps are always on.</p>

<h4>Errors</h4><br>
<div class=map>nmap &ltLocalLeader&gte</div>
<p>To get list of errors with current <a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a>.</p>
<a href="#atp-:ErrorForma">atp-:ErrorFormat</a>
<div class=command>:ErrorFormat {efm}</div>
<p>This is new interface to :SetErrorFormat. If {efm} is not given it will
show the current value <a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a>. It sets the variable
<a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a> and rereads the log file with |cgetfile|. The variable
<a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a> is also set when you use the command
<a href="#atp-:ShowErrors">atp-:ShowErrors</a>. In addition you can use +{flag} and -{flag} as an
argument, then {flag} will be added/removed from <a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a>.</p>

<h4>EasyMotion and ATP</h4>
<p>If you want to use <a href="http://www.vim.org/scripts/script.php?script_id=3526">EaseMotion</a> vim plugin (which is quite handy).</p>
	
<p>You can set <a href="#g:atp_Compare">g:atp_Compare</a>="". Alternatively, if
you want to use the fastest comparing method of ATP, you can add to last line
of s:EasyMotion() function in plugin/EasyMotion.vim add <dev class=intended>let
g:atp_changedtick = b:changedtick</div> You might want to change
g:EasyMotion_leader_key (see |easymotion-leader-key| if you have EasyMotion),
because some maps of ATP are interfering with EasyMotion. For example "-" might
be a good choice.  You can also try to change |maplocalleader| which is heavily
used by ATP.</p>

<p>Select Comments nmap and vmap is now |_c| (previously \sc was
interfering with an ATP font map).</p>

<p>(Almost all) maps became :map-silent.</p> 

<h4>ATPRC</h4>
<p>The <a href="#atprc">atprc</a> file is now sourced twice at startup: at the
beginning to set the variables, and once again at the end to set the maps
defined in it.</p>

<h4>QUICKFIX WINDOW</h4>
<p>Despite the status line for quick fix window, :cgetfile will be run when you
open new files, this nicely works with :edit command but not :split if you want
to keep the old log file in QuickFix window. If this is the case set 
<div class=variable>let g:atp_cgetfile = 0</div>
You can also put this in your <a href="#atprc">atprc</a> or |vimrc| file.</p>

<h4>DEBUG ATP</h4>
<div class=command>:DebugPrint</div>
<p>if you want to develop/debug ATP set g:atp_atpdev to 1 run <a
    href="#atp-:ReloadATP">atp-:ReloadATP</a> and this command will allow to
print (cat) debug files under <a href="#g:atp_TempDir">g:atp_TempDir</a>.</p>


<p>I hope I didn't missed anything important. If you want to see detailed changes
you can always read the svn logs at <a href="#atp-sourceforge">atp-sourceforge</a>.<p><br>


<div class=triple_indent>Chears, Marcin</div>

<a name="atp-installation"></a>
<h2>INSTALLATION</h2>

Neccessary vim settings:<br>
<div class=indented>:filetype-plugin-on</div>
<div class=indented>:filetype-indent-on	        (if you want to have automatic indentation for TeX files)</div>
<div class=indented>:syntax-enable		(several features will not work properly without this option)</div>

<p>If you do not like colours you can still set syntax on but clear the highlight
colours (you should make a simple function which clears all the highlight
groups, because ':hi clear' will not give you what you want).</p>

<p>See <a href="#atp-requirements">atp-requirements</a> for other  ATP requirements.</p> 

<h3>Get ATP Updates</h3>
<p>To get updates it is enought to use this command:</p>
<a name="atp-:UpdateATP"></a>
<div class=command>:UpdateATP[!]</div>
	<p>With bang update ATP to latest {UNSTABLE} snapshot, without to latest
	stable release. It makes a check if your version is the latest one. 
	If you have installed {UNSTABLE} snapshot and then you run :UpdateATP
	without a bang "!", then ATP will ask you if you want to DOWNGRADE to
	the last stable release.</p>

	<p><b>unstable</b> snapshots contain small fixes, and rarely, major changes
	of important parts of ATP (what can produce new bugs).</p>

	<p>Requires python.</p>

<a name="atp-:ATPversion"></a>
<div class=command>:ATPversion</div>
	<p>This command prints version information of ATP and the time stamp when
	this version was build. The time stamp is in format 'dd-mm-yy_HH-MM'.</p>

<a name="atp-commands"></a> <a name="atp-:"></a>
<h2>Commands</h2>
<a name="atp-compilation"></a>
<p>The main function is not seen by the user (it is called s:compiler, for
those who want to read the plugin). It executes tex compiler specified by the
variable <a href="atp-configure.html#b:atp_TexCompiler">b:atp_TexCompiler</a>. It is executed as
an autocommand by the line:
<div class=aucommand>au! CursorHold $HOME*.tex silent call 's:auTeX()'</div>
<p>where s:auTeX() is a simple function which calls s:compiler if the file
written on the disk and the buffer differ. There are two comparing mechanism,
the default one is using b:changedtick-variable, the seconds compares the
buffer with the on-disk version:</p>
<a name="g:atp_Compare"></a>
<a name="g:atp_compare_double_empty_lines"></a>
<a name="g:atp_compare_embedded_comments"></a>
<p>The default value is "changedtick". Then the |b:changedtick-variable| is
used to find if there buffer differs and to run latex. With any other value
a compare function will be used (which compares the buffer and the written file
on the disk) - this method is much slower but has additional features: by
default differences in comments are skipped (if you set <a
    href="#g:atp_compare_embedded_comments">g:atp_compare_embedded_comments</a>=0
(the default is 1) then also the comments which do not start right at the
beginning of line will be skipped). The second feature is to not see
differences in amount of blank lines: two or more blank lines is the same as
one blank line, for this set <a
    href="#g:atp_compare_double_empty_lines">g:atp_compare_double_empty_lines</a>=0,
which is the default.</p>

<p>As you can see it will run if a key is not pressed during time defined by
option 'updatetime' (see CursorHold) in the normal mode. If you type in
insert mode the file won't be compiled (and that's all right as you can be in the
middle of your very long formula). The value of 'updatetime' which works
fine is around 1000ms ('updatetime' is set in milliseconds). Instead of
setting 'updatetime' options directly you should set the variables
<a href="#g:atp_updatetime_insert">g:atp_updatetime_insert</a> and <a href="#g:atp_updatetime_normal">g:atp_updatetime_normal</a>. Here's an important
note on using CTRL-C (i_CTRL-C) in Vim:</p>

<a name="g:atp_IMapCC"></a>
<p>In vim the key combination CTRL-C (|i_CTRL-C|) in insert mode exists to
normal without triggering the InsertLeave autocommands. In this way it doesn't
changes the 'updatetime' from |g:atp_updatetime_insert| to <a
    href="#g:atp_updatetime_normal">g:atp_updatetime_normal</a>. If <a
    href="#g:atp_IMapCC">g:atp_IMapCC</a>=1 then _CTRL-C is mapped to i_CTRL-[
so the InsertLeave autocommands are parsed. However, it is a good habit to use
i_CTRL-C while you are writting/editing and i_CTRL-[ or i_ESC when you whish to
see what you wrote (then TeX will be run quicker). If you follow this you can
even set <a href="#g:atp_updatetime_normal">g:atp_updatetime_normal</a>=1 (if
you set it to 0 then the file will not be processed while Vim is in normal
mode).</p>

<a name="g:atp_updatetime_insert"></a>
<a name="g:atp_updatetime_normal"></a>
<p>
<div class=variable>g:atp_updatetime_insert = 2000</div>
<div class=variable>g:atp_updatetime_normal = 1000</div>
<div class=indented>These variables sets the value of 'updatetime' vim option.  Separate settings
are for normal and insert mode. You can make <a
    href="#g:atp_updatetime_normal">g:atp_updatetime_normal</a> even smaller so
that the file is processed whenever you go out from insert mode to normal mode.
These values will overwrite the original value of 'updatetime' (unless you set
both variables to 0)  so you should adjust them in order for the change to have
an effect.

<p>If you set <a href="#g:atp_updatetime_insert">g:atp_updatetime_insert</a>=0
the TeX compiler will not be called while Vim is in the insert mode.</p> 

<p>If you set <a href="#g:atp_updatetime_normal">g:atp_updatetime_normal</a>=0
the TeX compiler will not be called while Vim is in the normal
mode.</p></div></p>


<h4>Coming back to compilation ...</h4>

<p>Tex compiler is run with one options:
<div class=indented>-output-directory </div>
which points to a unique temporary file in a temporary directory <a
    href="atp-configure.html#b:atp_TempDir">b:atp_TempDir</a> </p>

<a name="atp-:ToggleAuTeX"></a> <a name="b:atp_autex"></a>
<p><div class=command>:ToggleAuTeX</div>
<div class=indented>You can switch off/on the function s:auTeX by pressing <S-F5> or by letting
the local to buffer variable <a href="#b:atp_autex">b:atp_autex</a>=1 (on) <a
    href="#b:atp_autex">b:atp_autex</a>=0 (off). It is useful in some
situations turn automatic compiling off. The key <S-F5> calls the command <a
    href="#atp-:ToggleAuTeX">atp-:ToggleAuTeX</a> which sets the variable
|b:atp_autex| and issue a message. You can also set this variable to 0 for some
files that are not supposed to be processed, for example:</p>
<div class=aucommand>au BufRead texmf/*.tex let b:atp_autex=0</div>
On start up b:atp_autex is set to 1 if the path of opened file is not under any
tex directory ('kpsewhich -show-path tex', except the current dir). For example,
files located under your local texmf tree will have b:atp_autex=0. Also for
files with other extension than the standard "tex" it will be set to 0.</div></p>

<p>The second important variable <a
    href="atp-configure.html#b:atp_TexCompiler">b:atp_TexCompiler</a>
configures if you use TeX, PdfTeX, LaTeX, PdfLaTeX and it should point to the
program name so please do not use capital letters.</p>

<p>Next variable to set is <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a>. It
configures where TeX will put the output and where viewer and log analysing
tools can find appropriate files.</p> 

<p>The last top most important variable is <a
    href="atp-configure#g:atp_keep">g:atp_keep</a> which is a list of extensions,
by default it is
<div class=variable>let g:atp_keep = [ "log", "aux", "toc", "bbl", "ind", "idx", "synctex.gz", "blg", "loa", "toc", "lot", "lof", "thm", "out" ]</div>
<div class=indented>Files with this extension will be copied from <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> to the temporary
directory with appropriate name to be used when (La)TeX is compiling. (log file
will be only copied after it is created, other files will be copied back and
forth between you <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> and the temporary
directory)</div></p>

<a name="atp-compile.py"></a>
<p>There are two function compile which can compile your tex file: one written in
python (for portability reasons) and old one in bash. They work almost the
same with one small difference. The python code has some vim enhancments (for
example the progres bar).</p>

<p>The python code has a debug file compile.log under <a href="atp-configure.html#g:atp_TempDir">g:atp_TempDir</a> will
contain all the errors issued by python, and 'compile.py.debug'
- debugging info printed by the <a href="#atp-compile.py">compile.py</a> script.</p>

<a name="g:atp_Compiler"></a>
<p>If for some reason you'd like to use the old 'bash' style script there is
a variable: 
<div class=variable>g:atp_Compiler = "python"</div>
<div class=indented>just switch its value to "bash" (you don't need to restart vim).  OK, so
what is the difference: the python script uses psutil python library (probably
you need to install it, at least I had to.) It is for two purposes: to
determine if xpdf is running and secondly, more importantly to check if latex
is running. </div></p>

<a name="b:atp_LatexPIDs"></a>
<p>The python script <a href="#atp-compile.py">compile.py</a> sends PID numbers of
latex processes to vim variable <a href="#b:atp_LatexPIDs">b:atp_LatexPIDs</a>.
Then the function which makes the status line for ATP has a python code to
check if the latex PIDs are still valid processes.  This is more accurate than
the method used with bash compiler (before running latex increase variable <a
    href="atp-configure.html#b:atp_running">b:atp_running</a> and decrease
after getting signal that latex has ended). In many situations this was
failing.  The new method works better, however it shows that latex is running
after slightly longer period of time (not that first python must run the script
and then run latex).</p> 

<a name="b:atp_TexReturnCode"></a>	
<p><div class=variable>b:atp_TexReturnCode</div>
<div class=indented>The variable  stores
the return code of compilation.</div></p>

<p>See <a href="atp-requirements.html#atp-requirements-python">atp-requirements-python</a> for
nonstandard python libraries that are used by ATP.</p>

<a name="atp-callback"></a>
<a name="atp-debug-mode"></a>
<h2>Call Back and Debug Mode</h2>
<p>By default the call back mechanism is turned on (g:atp_callback=1)</p>

<p>When call back mechanism is set, which is by default if you run gui version,
if you invoke 'vim' from command line you need to add 'servername' variable, it
might be desirable to alias Vim to to
<div class=indented>		vim --servername VIM </div>
you have additional functionalities:</p>

<a name="atp-status-line-notification"></a>
	
	<div class=indented>* Status Line Notification: status line can show if tex is running
	    <div class=double_indent>let g:atp_status_notification = 1</div>
		If unset you will get a message when compiler ends.  If set the
		number next to the name of your compiler indicates how many
		instances are currently running. If <a
		    href="#g:atp_ProgressBar">g:atp_ProgressBar</a>=1 then also
		progress information of TeX compiler  will be shown.</div><br>
	
	<div class=indented>* The log file will be automatically read after compilation (:cgetfile).</div>
	
	<div class=indented>* Debug mode is set by the value of <a
		href="#t:atp_DebugMode">t:atp_DebugMode</a>, you can set or see
	    its value using <a href="#atp-:DebugMode">atp-:DebugMode</a>
	    command (with completion for debug modes).</div>

	<a name="t:atp_DebugMode"></a>	<a name="atp-debug-mode-silent"></a> <a name="'silent'"></a>
	<div class=indented>* if <a href="#t:atp_DebugMode">t:atp_DebugMode</a>	= 'silent'<br>
	    <div class=command>:DebugMode silent</div>
	    <div class=map>nmap <LocalLeader><LocalLeader>s</div>
	You will not get any message from compilation. </div>

	<a name="atp-debug-mode-debug"></a> <a name="'debug'"></a>
	<div class=indented>* if <a href="#t:atp_DebugMode">t:atp_DebugMode</a>	= 'debug'
	    <div class=command>:DebugMode debug</div>
	    <div class=map>nmap <LocalLeader><LocalLeader>d</div>
	       After the end of compilation (invoked by the user or
	       autocommand) you will get a message with the return status of
	       the compilation. If the exit code is non zero it will be
	       highlighted with hl-ErrorMsg.</div>

	       <div class=indented>If you open the error window with |:copen|
		   or with the menu option ToggleDebugMode then it will be
		   automatically closed after first compilation with no errors.
		   Quick fix window is closed in both 'silent' and 'debug'
		   debug modes. This depends on |errorformat| which you can set
		   with <a href="#atp-:ErrorFormat">atp-:ErrorFormat</a> and <a
		       href="#atp-:ShowErrors">atp-:ShowErrors</a>: ATP test
		   for 'no errors' is 'len(|getqflist()|)'. If the debug mode
		   was 'debug' <a href="#t:atp_DebugMode">t:atp_DebugMode</a>
		   will fall back to <a
		       href="#g:atp_DefaultDebugMode">g:atp_DefaultDebugMode</a>
		   (by default it is the 'silent' mode).</div>

	       <a name="atp-debug-mode-Debug"></a> <a name="'Debug'"></a>
	   <div class=indented>* if <a href="#t:atp_DebugMode">t:atp_DebugMode</a>= 'Debug'
	    <div class=command>:DebugMode Debug</div>
	    <div class=map>nmap <LocalLeader><LocalLeader>D</div>
	       This mode is the same as 'debug' + after compilation ATP jumps
	       to first error.</div>

	   <a name="atp-debug-mode-verbose"></a> <a name="'verbose'"></a> <a name="b:atp_VerboseLatexInteractionMode"></a>
	   <div class=indented>* if <a href="#t:atp_DebugMode">t:atp_DebugMode</a>= 'verbose'<br>
	       Every compilation which is invoked by the user will be run in
	       verbose mode (this mode is mapped to F5 key).  In this mode
	       latex '-interaction=' switch is set from the variable
	       <a href="#b:atp_VerboseLatexInteractionMode">b:atp_VerboseLatexInteractionMode</a> (the default value is
	       errorstopmode).</div>

<p>Note: the 'verbose' mode in 'Vim' (in the console) needs to be run, when
there is no other latex instance running. Now you get a message to wait until
compilation ends. In future releases, a better solution will be worked out. Gui
version 'gvim' works better (as it doesn't suspend the editor).</p>

<p>The background compilation is always done in <a
    href="#g:atp_DefaultDebugMode">g:atp_DefaultDebugMode</a>.  Unless it is
set to 'verbose' in which case 'debug' mode is used.</p> 

<p>See also <a href="#atp-:copen">atp-:copen</a>.</p>

<a name="g:atp_ProgressBar"></a><br>
<p><div class=variable>g:atp_ProgressBar = 1</div>
<div class=indented>By default, when using the python compiler you will get progress message in
your status line. The number indicates the last page number compiled by LaTeX.
If by some reason, you want to switch this off, set g:atp_ProgressBar to 0 (use
|let|).</p>

<p>You need <a href="#g:atp_statusNotif">g:atp_statusNotif</a>=1 and 
    <a href="atp-highlight.html#g:atp_StatusLine">g:atp_StatusLine</a>=1 for this feature to work
(see also |laststatus| on how to activate status line in Vim).</p>

<p>If there are many background processes the number which is shown belongs to
the oldest process. (b:atp_ProgressBar is a dictionary { 'pid' : 'pagenr'
} - status line shows max of pagenr's).</p>

<p>Note: the time between you start to compile and [1] appears in the status
line is mostly the time when LaTeX is reading all the packages that you loaded
in the preamble.</p></div></p>

<p><div class=variable>b:atp_ProgressBar</div>
<div class=indented>This is a read only variable. It is equal to empty string '' if compilation
is not going on, and while compilation it stores the page number which LaTeX is
processing.</div></p>

<p><a name="g:atp_DebugModeQuickFixHeight"></a>
<div class=variable>g:atp_DebugModeQuickFixHeight = 8</div>
<a name="atp-debug-mode-maps"></a>
<div class=indented>You can invoke compiler in the 'debug' mode with '|<LocalLeader>|d',
'|<LocalLeader>|D' for 'Debug' mode (jump to first error), '|<LocalLeader>|l'
uses the default mode.</div></p>

<a name="g:atp_DefaultDebugMode"></a>
<p><div class=variable>let g:atp_DefaultDebugMode = 'silent'</div>
<div class=indented>This is the default debug mode in which background compilation will
run. It can be set to 'debug', setting it to 'verbose' will have the
same effect as setting it to 'debug'. ATP will come back to this debug
mode if compilation ends with exit status 0.

<p>When compilations ends without errors (i.e. when quick fix list is
empty for the current error format) <a href="#t:atp_DebugMode">t:atp_DebugMode</a> falls back to
<a href="#g:atp_DefaultDebugMode">g:atp_DefaultDebugMode</a>.</p></div></p>

<a name="g:atp_DebugCmdHeight"></a> <a name="g:atp_cmdheight"></a>
<p><div class=variable>g:atp_DebugModeCmdHeight = &cmdheight</div>
<div class=indented>the default cmd height (see |cmdheight|) for the debug mode.  ATP will
switch to it back and forth if needed. By default it is set to |cmdheigh| value
(thus unless you set it to sth else you will not see the difference).

<p>When going out of debug/Debug modes cmdheight is set to <a
    href="#g:atp_cmdheight">g:atp_cmdheight</a> value (with default value set
from 'cmdheight' option on startup).</p> 

<p>Note: if you change |cmdheight| you should also change <a
    href="#g:atp_DefaultCmdHeight">g:atp_DefaultCmdHeight</a>, unfortunately
vim has not autocommand group event to do that automatically.</p></div></p>

<a name="atp-:DebugMode"></a>
<p><div class=command>:DebugMode [debug-mode]</div>
<div class=indented>Command which help to set <a href="#t:atp_DebugMode">t:atp_DebugMode</a>
variable (has completion).  [debug-mode] is one of "silent", "debug", "Debug",
"verbose" (they can be suppressed to 's', 'd', 'D' or 'v' (or
"si"/"sil"/"sile"/... etc).  If no argument is given it shows the current debug
mode.</div></p>
    <div class=indented>
	<div class=command>:DebugMode[!] silent</div>
	<div class=command>(:DebugMode[!] s)</div>
	<div class=map>nmap <LocalLeader><LocalLeader>s</div>
	<div class=double_indent>It will load error file (|cgetfile|) with bang
	    "!" it will open |quickfix| window if there are errors (|cwindow|).
	    If |quickfix| window was opened it will be closed.  Sets <a
		href="#t:atp_DebugMode">t:atp_DebugMode</a>='silent'.</div>
	<div class=command>:DebugMode debug</div>
	<div class=command>(:DebugMode[!] d)</div>
	<div class=map>nmap <LocalLeader><LocalLeader>d</div>
		<div class=double_indent>It will load error file (|cgetfile|) and open |quickfix|
		window with |:copen|.
		Sets |t:atp_DebugMode|='debug'</div>
	<div class=command>:DebugMode Debug</div>
	<div class=command>(:DebugMode[!] D)</div>
	<div class=map>nmap <LocalLeader><LocalLeader>D</div>
		<div class=double_indent>It will load error file (|cgetfile|) and open |quickfix|
		window with |:copen|.  Sets |t:atp_DebugMode|='Debug'</div>
	<div class=command>:DebugMode verbose</div>
	<div class=command>(:DebugMode[!] v)</div>
	<div class=double_indent>Sets <a href="#t:atp_DebugMode">t:atp_DebugMode</a>='verbose'</div>
    </div>

<p>The height of the |quickfix| window will be one more than the length of
quick fix list (|getqflist()|) but nor more than <a
    href="#g:atp_DebugModeQuickFixHeight">g:atp_DebugModeQuickFixHeight</a>.</p>
							
<a name="atp-:copen"></a>
<p><div class=command>:copen</div>
<div class=indented>Works slightly different than |:copen|. The [height] argument will not take
efect. Use |:resize| instead. ATP computes the hiegth of the QuickFix window,
and uses the variable |g:atp_DebugModeQuickFixHeight| as an upper bound for
QuickFix window height.</div></p>

<a name="b:atp_ReloadOnError"></a>
<p>The variable b:atp_ReloadOnError if set to 1 (which is the default) reload the
file even when the exit status of compiler was non zero. If set to 0, then the
file will not be reloaded [actually for viewers other than Xpdf it will not be
copied from the temporary directory, for Xpdf it will be copied but not
reloaded).</p> 

<p>There is also a variable which stores the last command which executed
your tex compiler, see |g:atp_TexCommand|.</p>   

<a name="compilation"></a>
<h2>Compilation Commands</h2>
<a name="atp-:TEX"></a><br>
<div class=command>:{runs}TEX[!] [debug_mode]</div>
<div class=map>map \l, map \d</div>
	<div class=indented>If anyway you want to run TeX yourself but you do not want to see
	the output this is the right tool. This runs TeX in 'nonstopmode'. You
	can specify an argument {runs} which tells how many consecutive runs of
	TeX you need (this is important if you want to compile Table of
	Contents, or index, or the bibliography (see <a
	    href="#atp-:Bibtex">atp-:Bibtex</a>)

	<p>Without "!" it copies the aux file only if there are no compilation
	errors, with "!" it updates the aux file even if there were errors.
	This is done to make the labels completion work better, when there are
	errors they often affect the aux file in a way that interferes with
	<a href="#atp-:Labels">atp-:Labels</a> command.</p>

	<p>If b:atp_OpenViewer=1 and there current viewer (b:Viewer) is not
	running on the output file then this function will open a viewer. By
	default b:atp_OpenViewer=0 and this feature is disabled.</p> 

	<p>The command :2TEX will call the compiler two times.</p>

	<p>It is useful when you want to make the outline (using hyperref
	package) of your article in pdf files, the tex file has to be
	'sourced' twice. To make the bibliography you can use |atp-:Bibtex|.</p>

	<p>If {runs} > 5 it will be reduced to 5, to avoid running tex for hundreds
	(or event thousands) of times (what could happen otherwise by
	a mistake giving the range of the command to be the current line
	number).</p>

	<p>The optional argument [debug_mode] has possible values: '', 'silent',
	'debug', 'Debug', 'verbose'. When '' the current debug mode is used
	(<a href="#t:atp_DebugMode">t:atp_DebugMode</a>). ( [debug_mode] can be
	suppressed to 's', 'd', 'D', 'v' or "si"/"sil"/"sile"/... etc.) See the
	description of <a href="#atp-debug-mode">atp-debug-mode</a>.</p>

	<p>\d is mapped to :TEX debug and \l to :TEX (thus it uses your default
	debug mode).</p></div>

<a name="atp-:DTEX"></a>
<p><div class=command>:DTEX </div>
<div class=map>map \d</div>
    <div class=indented>This is equivalent to ':TEX debug'.</div></p>

<a name="atp-:MakeLatex"></a><br>
<p><div class=command>:MakeLatex[!]</div>
    <div class=indented>With one command you can make your whole document: cross references,
	bibliography (with or without bibtex), index, table of contents, table
	of figures, table of theorems ([ntheorem package]), table of
	algorithms. ':MakeLatex!' should be used when an entry in the
	bibliography was deleted (when 'bibtex' is involved this is when you
	delete last citation command of a bib entry).

	<p>If aux or log files are loaded in a buffer then they will be deleted
	- this is a requirement of vimgrep internal grep command (other wise
	vimgrep will search in the buffer not the hard disk version and they
	may differ).</p>

	<p>Returns with error message if log contains '! Emergency stop.'</p>

	<p>If <a href="#g:atp_Compiler">g:atp_Compiler</a> = 'python' it uses
	the python script to compile document, if <a
	    href="#g:atp_Compiler">g:atp_Compiler</a> = 'bash' it uses a bash
	command (UNIX only).</p></div></p>

<a name="atp-:Bibtex"></a>
<p><div class=command>:Bibtex[!] [debug_mode]</div>
<div class=map>map \b</div>
<div class=indented>With BANG "!": This function will call bibtex to produce the bibliography
file (.bbl). If in <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> there is no 'aux'
file it first calls tex compiler. After the 'bbl' file is produced two
consecutive runs of tex compiler are called to make the bibliography.

<p>If you specify any value to the [debug_mode] option (for the values see <a
    href="#atp-:TEX">atp-:TEX</a>) In verbose mode (only the last time tex
compiler will run in errorstop mode and echoed to the console). This gives you
the chance to see the output of bibtex command (it will be also printed when
latex ends).</p> 
	
<p>If bibtex returns with non zero exit code, latex will not be run
afterwards.</p> 
	
<p>Wihtout BANG "!"
If you want to just run bibtex use :Bibtex without bang.</p>

<p>The command :Bibtex  will :call Bibtex(), while :Bibtex v (and :Bibtex
[debug_mode]) will :call Bibtex(1)</p>

<p>The bang "!" is used in the same way as for <a href="#atp-:TEX">atp-:TEX</a>
command.</p>

<p>For the description of optional argument [debug_mode] see <a
    href="#atp-:TEX">atp-:TEX</a>.</p></div></p>

<a name="g:atp_raw_bibinputs"></a>
<p><div class=map>g:atp_raw_bibinputs</div>
<div class=indented>Tex is looking for the date base files in the path: `kpsewhich -show-path
bib`. The variable g:atp_bibinputs contains these directories separated by
commas. If atp cannot find your bib file, tex also won't be able.</div></p> 

<a name="g:atp_raw_texinputs"></a>
<p><div class=map>g:atp_raw_texinputs</div>
<div class=indented>Similarly this variable stores all of path reported by `kpsewhich -show-path
tex`.</div></p>

<a name="g:atp_bibinputs"></a>
<p><div class=map>g:atp_bibinputs</div>
<div class=indented>This is a list of directories as g:atp_raw_bibinputs with appended '**' see
':h file-searching'.</div></p>

<a name="g:atp_texinputs"></a>
<p><div class=map>g:atp_texinputs</div>
<div class=indented>This is a list of directories as g:atp_raw_texinputs with appended '**' see
':h file-searching'.</div></p>

<p><a name="atplib-:Kill"></a>
<div class=command>:Kill</div>
<div class=indented>Kill python scripts running (b:atp_PythonPIDs) and all pids in <a
    href="#b:atp_LatexPIDs">b:atp_LatexPIDs</a>. This only works with <a
    href="#g:atp_Compiler">g:atp_Compiler</a>="python".</div></p>

<a name="atp-:PID"></a>
<p><div class=command>:PID</div>
<div class=indented>Prints PIDs of all running instances of <a
    href="atp-configure.html#b:atp_TexComopiler">b:atp_TexComopiler</a>.</div></p>

<a name="atp-:Compiler"></a>
<p><div class=command>:Compiler {compiler-program}</div>
<div class=indented>Command which help to set <a href="atp-configure.html#b:atp_TexCompiler">b:atp_TexCompiler</a>
variable (with completion).</div></p>

<a name="atp-:SetOutDir"></a>
<p><div class=command>:SetOutDir</div>
<div class=indented>This is a command which sets the <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> variable and the
|'errorfile'| option.  See <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> for the default value.</div></p>

<a name="latexmk"></a>
<h3>Latexmk Interface</h3>
<a name="atp-:Latexmk"></a>
<p><div class=command>:Latexmk[!]</div>
<div class=indented>Compile with <a
	href="http://www.phys.psu.edu/~collins/software/latexmk-jcc/">latexmk</a>
in background.  With bang "!": Force compilation with latexmk in
background.</div></p>

<a name="atp-:LatexmkClean"></a>
<p><div class=command>:LatexmkClean[!]</div>
<div class=indented>Clean temporary output from LaTeX.  With bang "!": Clean
    temporary output from LaTeX.</div></p>

<a name="atp-:LatexmkStop"></a>
<p><div class=command>:LatexmkStop</div>
<div class=indented>Stop <a
	href="http://www.phys.psu.edu/~collins/software/latexmk-jcc/">latexmk</a>
if it is running.</div></p>

<a name="atp-:LatexmkStatus"></a>
<p><div class=command>:LatexmkStatus[!]</div>
	<div class=indented>Show the running status of <a
		href="http://www.phys.psu.edu/~collins/software/latexmk-jcc/">latexmk</a> for the current buffer. 
	With bang "!": show the running status of <a
	    href="http://www.phys.psu.edu/~collins/software/latexmk-jcc/">latexmk</a> for all buffers with
	process group ID's.</div></p>

<a name="errors"></a>
<h2>LaTeX Errors</h2>
<a name="atp-:ShowErrors"></a>
<p><div class=command>:ShowErrors [flag]</div>					
<div class=map>nmap <LocalLeader>e</div>					
<div class=indented>/for other maps see <a href="#atp-:ShowErrors-maps">atp-:ShowErrors-maps</a>/<br>
	This command shows error/warning messages. It sets the |'errorformat'|
	variable accordingly to the optional [flag] argument, which is a word
	made of letters:</div><p>

<div class=indented>
    <table border=0 vspace=0 cellspacing=20 >
<tr><td valign=top>e</td><td>- include errors</td></tr>
<tr><td valign=top>w</td><td>- include all warning messages</td></tr>
<tr><td valign=top>r</td><td>- include all reference warnings</td></tr>
<tr><td valign=top>c</td><td>- include all citations warnings</td></tr>
<tr><td valign=top>f</td><td>- include all font warnings</td></tr>
<tr><td valign=top>fi</td><td>- include font info massages</td></tr>
<tr><td valign=top>F</td><td>- show files listed in the log<br>
(messages which start with 'File: ') shows the files loaded by tex for example fd files that LaTeX is using</td></tr>
<tr><td valign=top>p</td><td>- show packages loaded by tex<br>
			    (messages which start with 'Package: ')</td></tr>
<tr><td valign=top>all</td><td>- show all above,</td></tr>
<tr><td valign=top>All</td><td>- show All the log file,</td></tr>
<tr><td valign=top>o</td><td>- open the log file in a new buffer (split).</td></tr>
    </table>
</div>
<p>If none flag is given <a
    href="#g:atp_DefaultErrorFormat">g:atp_DefaultErrorFormat</a> value is
used.  If 'o' flag is used the split buffer with log message has a map 'q' to
':bd'.  Example:
<div class=command>:ShowErrors r</div>
<div class=indented>will show all reference and citation warnings.

<p>Note: this command works in quickfix window. It will change errorformat but
will not reload quickfix list. Better use <a
    href="#atp-:ErrorFormat">atp-:ErrorFormat</a> instead.</p>
</div></p>

<a name="g:atp_DefaultErrorFormat"></a>
<p><div class=variable>g:atp_DefaultErrorFormat = 'erc'</div>
<div class=indented>The value is the  same as argument to <a
    href="#atp-:ShowErrors">atp-:ShowErrors</a> and <a
    href="#atp-:ErrorFormat">atp-:ErrorFormat</a>. This is the default argument
for these commands when they are used without any argument. Also corresponding
'errorformat' is set up at startup.</div></p>
						 
<a name="b:atp_ErrorFormat"></a>
<p><div class=variable>b:atp_ErrorFormat = 'ecw'</div>
<div class=indented>This variable stores the current format of errors. It is a word with letters
given in [flag] argument to <a href="#atp-:ShowErrors">atp-:ShowErrors</a>. You
can set it with <a href="#atp-:ErrorFormat">atp-:ErrorFormat</a> command. It is
used by serveral ATP functions, for example call back feature checks if there
are errors looking into Quick Fix list (with |getqflist()|), which will depend
on the variable <a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a>.</div></p>
	    
<a name="atp-:ShowErrors-maps"></a>
<p>ShowErrors maps:					 

<div class=indented>
    <table border=0 vspace=0 cellspacing=20 >
	<tr><td valign=top><div class=map>&ltLocalLeader&gte</div></td><td>view errors with current <a href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a></td><td><div class=command>:ShowErrors</div></td></tr>
	<tr><td valign=top><div class=map>F6+e</div></td><td>to see all errors</td><td><div class=command>:ShowErrors e</div></td></tr>
	<tr><td valign=top><div class=map>F6+w</div></td><td>to see all warnings</td><td><div class=command>:ShowErrors w</div></td></tr>
	<tr><td valign=top><div class=map>F6+r</div></td><td>to see warnings coming<br>from references or citations</td><td><div class=command>:ShowErrors rc<div class=command></td></tr>  
	<tr><td valign=top><div class=map>F6+f</div></td><td>to see font warnings</td><td><div class=command>:ShowErrors f</div></td></tr>
</table>

<p>this is not a texloganalyzer mapping but it is a good place to mention it:
<div class=map>F6+l</div>
to open log file in a new split window this is a mapping to the <a
    href="#atp-:OpenLog">atp-:OpenLog</a>.</div></p>

<a name="atp-:ErrorFormat"></a>
<p><div class=command>:ErrorFormat {flag}</div> 
<div class=indented>This command has the same syntax as <a
    href="#atp-:ShowErrors">atp-:ShowErrors</a>. It sets the <a
    href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a> variable and vim option
|'erroformat'|, and the rereads the log file with |cgetfile|. If {flag} is not
given it only shows the current value of <a
    href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a>.  The variable <a
    href="#b:atp_ErrorFormat">b:atp_ErrorFormat</a> is also set when you use
the command <a href="#atp-:ShowErrors">atp-:ShowErrors</a>.

<p>As an argument you mey use +{flag} and -{flag} then {flag} will be
added/removed from |b:atp_ErrorFormat|, example:
	<div class=command>:ErrorFormat +w</div>
will add 'w' to |b:atp_ErrorFormat|.		
Note: this command works in quickfix window.</p></div></p>

<a name="atp-:SetErrorFile"></a>
<p><div class=command>:SetErrorFile</div>
<div class=indented>If you change <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> variable and you want
to update the |'errorfile'| option use this command. It will show you the value
to which |'errorfile'| was set.</div></p> 

<a name="atp-:OpenLog"></a>
<p><div class=command>:ShowErrors o</div>
<div class=command>:OpenLog</div>
<div class=map>map F6+l, imap F6+l</div>
	<div class=indented>Opens log file in a new split window with two options (which are set
	locally): 'ruler', 'nospell', and a map 'q' to ':bd'.

	<p>You can also use the command ':Explore' to see log, aux, ... files
	(which is a part of 'netrw' Vim plugin).</p>


	<p>In the log file there are some special tools to syncronize the tex source
	file and the Viewer (currently only Xpdf is supported) with log file: <a
	    href="#atp-:SyncTex-(log_file)">atp-:SyncTex (log)</a> and <a
	    href="#atp-:SyncXpdf">atp-:SyncXpdf (log)</a>) These tools can sync tex
	file/Xpdf automatically using autocommand group |CursorMoved|.</p></div></p>

<a name="atp-:SyncTex-(log_file)"></a>
<p><div class=command>:SyncTex[!]	(inside log file)</div>
<div class=map>nmap \g</div>
	<div class=indented>If you open log file with ':ShowErrors o' command then you can use
	this command to move to the place in the source code where the error
	occurs. It works with project files and also can go to error which
	appear in a declared package. It will go to the first error line
	declared in the log file below the cursor position (more precisely, to
	first line which matches '^l\.\d\+\|on input line\|at lines' will be used).

	<p>With bang [!] it opens new window if the file with error is not shown
	in the current tab page. Without bang it opens the file in the window
	where ':ShowErrors o' was used.</p>
	<a name="g:atp_LogSync"></a>
	<p>If you set g:atp_SyncLog = 1 (the default value is 0) then the source
	file will be syncronize with the log file via autocommand (with
	|CursorMoved|). This sets 'cursorline' option to indicate the
	corresponding line in the source file. When the log buffer becomes
	hidden this option should be unset.</p>
	<a name="atp-:LogSync"></a>
	<p>To set g:atp_SyncLog you can use :Sync command. ':Sync' will toggle
	the value, ':Sync on' will set it to 1 and ':Sync off' will set it 
	to 0.</p>

	<p>If you set g:atp_developer = 1 this command will also go to files
	under texmf tree (packages and classes).</p></div></p>

<a name="atp-:SyncXpdf"></a> <a name="g:atp_SyncXpdfLog"></a>
<p><div class=command>:SyncXpdf</div>
<div class=indented>If you set g:atp_SyncXpdfLog = 1 (the default value is 0) and you use
Xpdf as a viewer it will be synchronised with the log file (with
autocommand group |CursorMoved|). You can also use the command
:SyncXpdf or :Xpdf in the log buffer which does the same.</div></p>

<a name="output"></a>
<h2>Output</h2>
<a name="atp-:ViewOutput"></a>
<p><div class=command>:ViewOutput</div>
<div class=map>map \v,map F3, imap F3</div>
<div class=indented>You would like to see what you are editing use this function. It will use
the program defined in the variable b:atp_Viewer. See <a
    href="atp-configure.html#b:atp_Viewer">b:atp_Viewer</a>, <a
    href="atp-configure.html#g:atp_XpdfServer">g:atp_XpdfServer</a>, <a
    href="atp-configure.html#b:xpdfOptions">b:xpdfOptions</a>. When there is no output file
it will run TeX and open the file. Read more about particular viewers
(inverse/reverse searching) in <a href="atp-viewers.html#atp-Viewers">atp-viewers</a>.</div></p> 

<a name="atp-:SyncTex"></a>
<p><div class=command>:SyncTex[!]</div>
<div class=map>map t, map <S-LeftMouse></div>
<div class=indented>Which makes an forward search (vim->Viewer). As for now ATP supports Okular,
Xpdf and Xdvi with this feature (Evince is not yet supported).

<p>Note: you can also set reverse search for Okular and Xdvi, see <a
    href="atp-viewers.html#atp-Viewers-Okular">atp-Viewers-Okular</a> and 
    <a href="atp-viewers.html#atp-Viewers-Xdvi">atp-Viewers-Xdvi</a> for an instruction how to do
    that. Xpdf doesn't support reverse searching.</p>

<p><a name="atp-:SyncTex_Xpdf-hack"></a>
Note: there is a bug in Xpdf, one canot sent commands to Xpdf to quickly. If
the <a href="#atp-:SyncTex">atp-:SyncTex</a> command only updates the page, but
doesn't shift it then you can try to set g:atp_XpdfSleepTime variable to
something higher than the default 0.1 (this is sleep time between sending
commands to Xpdf in seconds)</p>

<p>When the output file or the synctex file (.synctex.gz) doesn't exists then
first it will be generated. It can also open the document if it is not yet
opened.</p>

<p>Note: with bang <a href="#atp-:SyncTex">atp-:SyncTex</a> will not check if
viewer is running.</p>

<p>Read <a href="atp-viewers.html#atp-:SyncTex_with_Okular">atp-:SyncTex_with_Okular</a> if you
use Okular.</p></div></p>
<a name="atp-:Viewer"></a>
<p><div class=command>:Viewer {viewer-program}</div>
<div class=indented>Command which help to set b:atp_Viewer variable (with nice completion).</div></p>

<a name="atp-:SetXdvi"></a>
<p><div class=command>:SetXdvi</div>
<div class=indented>This command sets the options for xdvi viewer, which enables inverse and
reverse searching. You can use the command <a
    href="#atp-:SyncTex">atp-:SyncTex</a> for forward searches
(Vim-&gtXdvi)</p>
    <table border=0 vspace=0 cellspacing=0 >
	<tr><td><div class=command>:SyncTex</div></td><td>(although dvi is using srcspecials rather than synctex)</td></tr>
	<tr><td><div class=map>map t</div></td><td></td></tr>
    <tr><td><div class=map>nmap &ltS-LeftMouse&gt</div></td><td></td></tr>
    </table>
For inverse searching hold CTRL and click left mouse button on the text in xdvi
viewer. It sets:
    <div class=variable>let b:atp_TexOptions="-src-specials"</div>
and also other variable to enable reverse searching (Xdvi->Vim) see more
<a href="atp-viewers.html#atp-Viewers-Xdvi">atp-Viewers-Xdvi</a>.</div></p>

<a name="atp-:SetXpdf"></a> <a name="atp-SetOkular"></a>
<p><div class=command>:SetXpdf</div>
<div class=command>:SetOkular</div>				
	<div class=indented>This command sets options for Xpdf viewer. Xpdf supports forward
	searching (vim->Xpdf) with command: <a href="#atp-:SyncTex">atp-:SyncTex</a>. It sets
	    <div class=variable>let b:atp_TexOptions="-synctex=1"</div>
 	Thus it enables the forward searching (the above is the default 
	value for ATP, but it will change when you use |atp-:SetXdvi| which
	uses "-src-specials".

	<p>It reads the Xpdf viewer options from the variables
	<a href="atp-configure.html#b:atp_xpdfOptions">b:atp_xpdfOptions</a> and g:atp_xpdfOptions. Similarly for Okular.</div></p>
						
<a name="bib_commands"></a>
<h2>Bib Commands</h2> 
<p><div class=command>:BibSearch /{pattern}/ [flag]</div>				
<div align=right>See <a href="#atp-:BibSearch">atp-:BibSearch</div>
<div class=indented>This command finds bib entries in bib files defined in your tex file
and in the variable b:atp_BibFiles (see <a
    href="#b:atp_BibFiles">b:atp_BibFiles</a>), which match the
[pattern] (a Vim regular expression). The output is configurable by the
[flag] argument, see <a href="atp-bibsearch.html#atp-bibflags">atp-bibflags</a>. By
default the pattern is case insensitive.</p></div></p>

<a name="atp-:AMSRef"></a>
<p><div class=command>:AMSRef[!] {bibdata}</div> 
<div class=indented>A command to get bib data from <a href="http://www.ams.org/mathscinet-mref">AMSRef</a>.
		     
<p>The bib data will be appended to bibliography of the current document. If
there are many bib files will get a choice which one to use. This command is
also available in bib files.  Without bang, i.e. "!", it writes and closes the
bib buffer with it will leave you in unsaved bib file buffer.  You will be also
asked for the bib key, the default choice is to use the AMS bib key. </p>

<p>This command also works when you use \begin{bibliography} environment. But
the default is to use a bib file.  The obtained bibliographic reference is
copied to the register g:atp_bibrefRegister (the default is "0" so you can
paste it using Vim command 'p'). In addition, it is stored in the variable
g:atp_bibref.</p></div></p>

<a name=":BibChoose"></a>
<p><div class=command>:BibChoose</div>						
<div class=map>map c, map y, map p</div>
<div align=right>See <a href="#atp-:BibChoose">atp-:BibChoose</a></div>
<div class=indented>This function is defined in the buffer with results of BibSearch command. It
is mapped to 'y', 'c' and 'p' and let you copy the bib entry key to a register
(see |atp-:BibChoose|) or directly to last opened buffer (after the last cursor
position). When you choose to paste, it will close the BibSearch window.</div></p>

<a name="atp-:FindBibFiles"></a>
<p><div class=command>:FindBibFiles</div>
<div class=indented>This updates the variables s:bibfiles, s:allbibfiles, s:notreadablebibfiles.
Finds all bib files defined in all '\bibliography' commands. For more about the
above variables read <a href="atp-bibsearch.html#atp-variables-bib">atp-variables-bib</a>. This
function is called internally be the script functions BibSearch/BibChoose.  The
command :FindBibFiles finds bib files in the current buffer.

<p>If a readable bib file was not found under one of path listed in of
g:atp_bibinputs variable (see <a href="#g:atp_bibinputs">g:atp_bibinputs</a>)
it is classified as not readable. </p></div></p> 

<a name="open"></a>
<h2>Open Files</h2>
<a name="atp-:GotoFile"></a> <a name="atp-:EditInputFile"></a>
<p><div class=command>:GotoFile[!]</div>
<div class=command>:EditInputFile[!]</div>
<div class=map>nmap gf</div>
<div class=indented>This command finds input files under b:atp_MainFile (it is recursive).  The
nmap 'gf' checks first if there is a file under the cursor. If there is no file
under the cursor it list all input files. Input file is one introduced in the
source file with \input{<file>}, \input <file> \include{<file>}. The current
file is now shown with highlight group: |hl-WarningMsg|. </p>

<p>This command uses kpsewhich to find in which path to find input files.
Actually the path variables: <a href="#g:atp_texinputs">g:atp_texinputs</a> for
input files and <a href="#g:atp_bibinputs">g:atp_bibinputs</a> for bib files
are used.</p>

<p>The bibliographic declared are also listed. The command searches for them in
any directory listed in g:atp_bibinputs (see <a
    href="#g:atp_bibinputs">g:atp_bibinputs</a>).</p>

<p>If g:atp_developer = 1 (default 0) then the map 'gf' can also open package
files and document class files, but only when using 'gf' over \usepackage or
\documentclass tex commands.</p>

<p>With bang "!" this command regenerates tree of files (this is important only
in files with input lines), without it uses cached values (if they exist).</p>

<p>The current file is now shown with highlight group: |hl-WarningMsg|.</p></div></p> 

<a name="atp-:InputFiles"></a>
<p><div class=command>:InputFiles</div>
<div class=indented>List input files of the current project. It also updates the <a
    href="atp-ProjectFiles.html#b:ListOfFiles">b:ListOfFiles</a> and <a
    href="atp-ProjectFiles.html#b:TreeOfFiles">b:TreeOfFiles</a> variables to the current
values.

<p>The variable <a name="g:atp_inputfile_pattern">g:atp_inputfile_pattern</a>
is used as a pattern to find input files. If you use 'biblatex' you do not need
to put any pattern matching bibliographies (\addbibresource, \bibliography,
...), ATP has special way of dealing with them which is faster. If you use
'subfile' package ATP will add \\subfile pattern.</p></div></p>

<a name="atp-:Open"></a> <a name="g:atp_LibraryPath"></a>
<p><div class=command>:Open[!] [pattern]</div> 
	<div class=indented>If you configure g:atp_LibraryPath, this function will find files
	matching [pattern] under g:atp_LibraryPath and let them open with
	a program defined in 
		<div class=variable>g:atp_OpenTypeDict</div>
	The g:atp_LibraryPath is a comma-separeted list of directory names.
	You should use wildcards '**' and '*' as in |globpath()|, if you want
	to include subdirectories, etc. For example
	    <div class=variable>let g:atp_LibraryPath=$HOME."/**"</div>
	will search for files under your $HOME directory. The default value of
	g:atp_OpenTypeDict is: 
    <table border=0 vspace=0 cellspacing=0 >
	<tr><td><div class=variable>let g:atp_OpenTypeDict</div></td><td> = {</td><td></td></tr>
	<tr><td></td><td>\ "pdf" : "xpdf",</td><td> "ps" 	: "evince",</td></tr>
	<tr><td></td><td>\ "djvu": "djview",</td><td> "txt" 	: "split" ,</td></tr>
	<tr><td></td><td>\ "tex"	: "edit",</td><td> "dvi"	: "xdvi -s 5" }</td></tr>
    </table>
	The values of g:atp_OpenTypeDict should be a program to open the file,
	or one of 'tabe', 'split', 'edit', (if 'vim' is specified, then 'tabe'
	will be used). The cat program is also supported.

	<a name="g:atp_Library"><\a>
	<p>Found files (all not just matching ones) are stored in the variable
	g:atp_Library. It is set by |globpath()| on g:atp_LibraryPath and then
	filtered, only files which extensions are given in g:atp_OpenTypeDict
	will be stored. This variable is restored by the global project script.
	You can use {bang} "!" to regenerate the library if it has changed.
	This is particularly useful as by default ATP remembers g:atp_Library in
	the common project script (see <a href="atp-ProjectFiles.html#atp-ProjectScript">atp-ProjectScript</a>).</p></div></p>

<a name="atp-:Delete"></a>
<p><div class=command>:Delete[!]</div>
<div class=map>map <F6>d</div>
	<div class=indented>Deletes all files which extension belongs to g:atp_tex_extensions in
	the directory <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a>. By default |g:atp_tex_extensions| does
	not contain 'tex', 'pdf', 'dvi' so none of your important files will
	be deleted. When the command is used without bang the the extensions
	from |g:atp_DeleteWithBang| are removed from |g:atp_tex_extensions|.
	The defualt value of |g:atp_DeleteWithBang| contains for exemple
	'synctex.gz' extensions, thus it won't be removed by :Delete (without
	bang "!").
	<a name="g:atp_delete_output"></a>
	<p>If you set |g:atp_delete_output|=1 the function will delete also the
	current output file (but not any other!) and 'synctex.gz' file.</p>

	<a name="g:atp_DeleteWithBang"></a>
 <div class=map>g:atp_DeleteWithBang = ['synctex.gz', 'tex.project.vim']</div>
	<p>This is list of extensions which will not be removed when
	<a href="#atp-:Delete">atp-:Delete</a> is run without bang. You do not need to add "pdf" or
	"dvi", extensions.</p></div></p>
  							
<a name="printing"></a>
<h2>Printing</h2>
<a name="atp-:SshPrint"></a>
<p><div class=command>:SshPrint [lpr_options]</div>
	<div class=indented>It will run 'lpr' command and append to it the options defined in
	the variable 'g:printeroptions' + options given in the second argument.
	It prints the pdf or dvi depending on the value of <a
	    href="atp-configure.html#b:atp_TexCompiler">b:atp_TexCompiler</a>.
	<a name="g:atp_ssh"></a>
	<div class=variable>g:atp_ssh</div>
	<p>If you specify the variable 'g:atp_ssh=<user>@<host>' it will print
	via ssh on the <host> using the [lpr_options] passed to the lpr
	command. The command ':SshPrint' has a completion set for the printers
	available on your local system or in the host. You do not have to
	escape white spaces.</p>
	
	<p>The command has completion for the names of printers (also remote
	printers) and also other lpr options and its values, press <Tab> to
	cycle through printers, or type first letters of the printers name and
	press Tab to complete it.</p></div></p>

<a name="atp-:Lpr"></a>
<p><div class=command>:Lpr [lpr_options]</div>
	<div class=indented>It prints using the lpr command on a local printer. The syntax and
	completion are the same as for <a href="#atp-:SshPrint">atp-:SshPrint</a>.</div></p>


<a name="atp-:Lpstat"></a>
<p><div class=command>:Lpstat</div>
	<div class=indented>Sends "lpstat -l" remotely (using the |g:atp_ssh| value) or locally and
	echoes the output.</div></p>

<a name="atp-:ListPrinters"></a>
<p><div class=command>:ListPrinters</div>
<div class=indented>List printers available on the host <a href="#g:atp_ssh">g:atp_ssh</a>.</div></p>

<a name="wrapping"></a>
<h2>Wrapping Tools</h2>
<a name="atp-:WrapSelection"></a>
<p><div class=command>:WrapSelection {beginWrapper} [endWrapper] [cursor_pos] [new_lines]</div>
	<div class=indented>Puts selected text between {beginWrapper} and [endWrapper]. Also sets
	the cursor position according to the [cursor_pos]. Possible values
	are: a number -- indicates the character offset from beginning of
	{beginWrapper}; or 'end' put the cursor at the end of [endWrapper] or
	'begin' leave the cursor at the beginning (to be precise at the end of
	the starting wrapper).  The default [endWrapper] is '}'.  The last
	argument [new_lines] 0/1 (default is 0): if 1 then the {beginWrapper}
	and [endWrapper] are put in separate lines (the begin line and end
	line are split), this is useful for putting text into and environment
	\begin{}:\end{}.

	<p>See |<f-args>| to know how to pass arguments. (They are separated with
	spaces, white spaces in arguments should be escaped with backslash
	'\'.)</p>

	<p>For the predefined maps which use WrapSelection see below <a
	    href="#atp-maps-WrapSelection">atp-maps-WrapSelection</a> or use <a
	    href="#atp-:HelpVMaps">atp-:HelpVMaps</a>.</p></div></p>

<a name="atp-:InteligentWrapSelection"></a>
<p><div class=command>:InteligentWrapSelection {mathWrapperPair}, {textWrapperPair}, [cursor_pos], [new_lines]</div>
	<div class=indented>Puts the selected text inside {mathWrapperPair} if the cursor stands
	in mathematics otherwise inside {textWrapperPair}.  {mathWrapperPair}
	{textWrapperPair} are Vim lists of length at least 1, the first wrapper
	is the opening and the second is the closing one (if not given the
	default '}' is used. The other arguments are as for <a
	    href="#atp-:WrapSelection">atp-:WrapSelection</a>. If the opening
	leader in is not given then this command is not wrapping the text (see
	below for the suggested map '\tx').

	<p>The command arguments should be separated with commas and quoted
	separately (see |<args>|).</p>

	<p>For the predefined maps which use <a
	    href="#atp-:WrapSelection">atp-:WrapSelection</a> see below <a
	    href="#atp-maps-InteligentWrapSelection">atp-maps-InteligentWrapSelection</a>
	or use <a href="#atp-:HelpVMaps">atp-:HelpVMaps</a>.</p>

	<a name="atp-maps-WrapSelection"></a> <a name="atp-maps-InteligentWrapSelection"></a>
	<p>These are the provided maps in visual mode:
	    <div class=map>vmap &ltbuffer&gt \rm	:&ltC-U&gtInteligentWrapSelection ['\\textrm{'],	['\\mathrm{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&lt \em	:&ltC-U&gtInteligentWrapSelection ['\\emph{'],	['\\mathit{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \it	:&ltC-U&gtInteligentWrapSelection ['\\textit{'],	['\\mathit{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \sf	:&ltC-U&gtInteligentWrapSelection ['\\textsf{'],	['\\mathsf{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \tt	:&ltC-U&gtInteligentWrapSelection ['\\texttt{'], 	['\\mathtt{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \bf	:&ltC-U&gtInteligentWrapSelection ['\\textbf{'],	['\\mathbf{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \bb	:&ltC-U&gtInteligentWrapSelection ['\\textbf{'],	['\\mathbb{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \tx	:&ltC-U&gtInteligentWrapSelection ['\\textrm{'],	['\\text{']&gtCR&lt</div>
	    <div class=map>vmap &ltbuffer&gt \sl	:&ltC-U&gtWrapSelection \\textsl{&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \sc	:&ltC-U&gtWrapSelection \\textsc{&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \up	:&ltC-U&gtWrapSelection \\textup{&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \md	:&ltC-U&gtWrapSelection \\textmd{&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \un	:&ltC-U>WrapSelection \\underline{&ltCR&gt</div&gt
	    <div class=map>vmap &ltbuffer&gt \ov	:&ltC-U&gtWrapSelection \\overline{&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \n	:&ltC-U&gtInteligentWrapSelection ['\\textnormal{'],['\\mathnormal{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \cal	:&ltC-U&gtInteligentWrapSelection [''],['\\mathcal{']&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtmb :WrapSelection \\mbox{ } begin&ltCR&gt</div>
   	Suggested maps: 
	    <div class=map>vmap &ltbuffer&gt \tx	:&ltC-U&gtInteligentWrapSelection [''],['\\text{']&ltCR&gt</div>
	    <div class=map>vmap &ltbuffer&gt \in	:&ltC-U&gtInteligentWrapSelection [''],['\\intertext{']&ltCR&gt"</div>
	The leader '\' in above commands is configurable: the value of
	<div class=map>g:atp_vmap_text_font_leader is used (the default value is &ltLocalLeader&gt).</div></p>

	<p>Another provided font wrapper: 
	    <div class=map>vmap LocalLeaderf	:exe ':WrapSelection {\usefont{'.g:atp_font_encoding.'}{}{}{}\selectfont\  }'.(len(g:atp_font_encoding)+11).'&ltCR&gt'</div>
	Where the variable:
	<a name="g:atp_font_encoding"></a>
	    <div class=variable>g:atp_font_encoding</div>
	<p>stores the default encoding which is 'OT1', unless you use fontenc
	package, then the default for fontenc is used (the last defined in
	\usepackage[...]{fontenc} see the 'Latex2e font selection'
	/font user guide/ available on CTAN).</p>

	<p>Other wrappers: 
	    <div class=map>vmap m			:WrapSelection \( \)&ltCR&gt</div>
	    <div class=map>vmap M			:WrapSelection \[ \]&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gt(		:WrapSelection ( ) begin&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gt[		:WrapSelection [ ] begin&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gt{		:WrapSelection { } begin&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gt)		:WrapSelection ( ) end&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gt]		:WrapSelection [ ] end&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gt}		:WrapSelection { } end&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtb(	:WrapSelection \left( \right) begin&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtb[	:WrapSelection \left[ \right] begin&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtb(	:WrapSelection \left( \right) begin&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtb[	:WrapSelection \left[ \right] end&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtb{	:WrapSelection \left{ \right} end&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtb{	:WrapSelection \left{ \right} end&ltCR&gt</div>
 	And the maps to put the selected text into an environment:
	    <div class=map>vmap &ltLocalLeader&gtA	:WrapSelection \begin{align} \end{align} 0 1&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtC	:WrapSelection \begin{center} \end{center} 0 1&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtE	:WrapSelection \begin{equation} \end{equation} 0 1&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtL	:WrapSelection \begin{flushleft} \end{flushleft} 0 1&ltCR&gt</div>
	    <div class=map>vmap &ltLocalLeader&gtR	:WrapSelection \begin{flushright} \end{flushright} 0 1&ltCR&gt</div>

	    The leader <LocalLeader> can be changes using the variable <a name="g:atp_vmap_environment_leader">g:atp_vmap_environment_leader</a> 
	(its default value is &ltLocalLeader&gt).
	Note: that the arguments for this command must be put in ':' or ":".
   	the highlighted text will put inside \textbf{ }.</p>

	<p>You can also use a wrapper which was yanked into register 'a':
	<div class=command>	:WrapSelection @a</div>
  	This will work not only in visual mode. It will operate on last
	selected text. So if you accidentally lost the selection you can still
	use this command (but not the maps)!</p></div></p>

<a name="atp-:TexAlign"></a>
<p><div class=command>:TexAlign</div>
<div class=map>map \a </div>
<div class=indented>This is a wrapper around Align command of the great <a
    href="http://www.vim.org/scripts/script.php?script_id=884">AutoAlign Vim
    plugin</a> This command sets correct align options and aligns the
environment.  The following LaTeX environments are supported: equation, align,
alignat, flalign, displaymath and tabular Equation, align, alignat, flalign and
displaymath are checked using syntax, tabular environment is checked using
searchpair() function, the g:atp_completion_limits[2] applies.</div></p>

<a name="motion"></a>
<h2>Motion Commands</h2>
<a name="atp-:Tags"></a>
<a name="atp-:LatexTags"></a>
<p><div class=command>:Tags[!]</div>
<div class=command>:LatexTags[!]</div>
    <div class=indented>Make a tag file with a python script included in ATP. It also scans aux
    file for associated numbers to labels which then are used as tags. If you
    declare hyperref package in the preambule also \hyperref{}{} commands are
    matched for tags as well. 
    <a href="#atp-:Tags">atp-:Tags</a> command will be defined only if you do not define it yourself.

    <p>Natbib as well as biblatex commands are supported (with exception of
    \cites, ... biblatex commands).</p>

    <p>With bang the bibtags for \cite commands are not made. If you use more
    than one bibliography file searching to which of them it belongs might
    take some time. If this is the case and you do not want this kind of tags
    you can make the tag file faster.</p>

    <p>Note: you might need to adjust 'iskeyword' Vim option. ATP is adding <a
	href="#g:atp_separator">g:atp_separator</a> to 'iskeyword' if <a
	href="#g:atp_no_separator">g:atp_no_separator</a> is 0.</p>

    <p>Note!:In Vim 'iskeyword' by default contains '_'. It is disabled by the
    stadard tex syntax file (you do not want to include _ from _{} LaTeX
    construct into 'w' motion). So it is better to avoid it in label names, so
    that CTRL-] works well. If you need to add it use:
    <div class=indented>au FileType set iskeyword+=_</div>
    (this will not work with setlocal).</p>

    <p>Note: the python script is sourced in the background. When the script
    finishes it will let you know. The tag file is not accessible until the
    script finishes.</p>

    <p>Check out <a href="#tag-and-searches">tag-and-searches</a> how to use tags.</p>

    <p>:LatexTags command is only defined if there was :Tags command
    defined.</p></div></p>

<a name="atp-:TOC"></a>
<p><div class=command>:TOC[!]</div>
<div class=map>nmap \t</div>
	<div class=indented>Shows Table of Contents of your document. It do not yet support the
	starred version of chapter, section,... .

	<p>The optional argument bang controls if the table of contents data base
	must be generated: by default map \t doesn't regenerate the toc data
	base (unless if it doesn't exist), :TOC command regenerate the
	data base, :TOC! not.</p>

	<p>See <a href="atp-toc-window.html#atp-toc-window">atp-toc-window</a> for commands and maps defined in the toc window.</p>

	<p>TOC() supports many edited files. For example if you have in your
	buffer list two files a.tex and b.tex this command will produce table
	of contents of both of them. If you have just one opened window
	(excluding the ToC window) then pressing &ltspace&gt, &ltenter&gt, p and q
	will take you to the right buffer (which will be read if is unloaded
	or hidden). If you split a window then &ltspace&gt, &ltenter&gt,
	p, q will take you to the window from which you are coming. However,
	if you have two windows with two different buffers loaded they will
	act on the window with the matching buffer name.</p>

	<p>The variable t:toc_window_width sets the width of table of contents
	window. By default t:toc_window_width=30. You can set a global
	variable g:toc_window_width to override the default value.</p></div></p>

<a name="atp-:CTOC"></a>
<p><div class=command>:CTOC</div>
	<div class=indented>This function returns the name of the currently edited chapter/
	section/subsection/subsubsection. Use ':echo CTOC()' or just ':CTOC' to
	see the returned value. If you added a section unit the function will
	not update the database, run ':TOC' to do that (map \t).</div></p>

<a name="atp-:Labels"></a>
<p><div class=command>:Labels[!]</div>
<div class=map>map \L</div> 
	<div class=indented>Shows labels defined in your file. You can also use the commands and
	mappings described in <a href="atp-toc-window.html#atp-toc-window">atp-toc-window</a>.

	<p>If you forget what are these mappings, write ':map <buffer>' in the
	TOC or LABELS window, or move to the end of the LABELS window to see
	a short help message.</p>

	<p>The key 's' shows the context of the label under the cursor (your
	current window splits).</p>

	<p>The variable t:labels_window_width sets the width of labels window. By
	default t:labels_window_width=30. You can set a global
	variable g:labels_window_width to override the default value.</p>

	<p>Without bang "!" the labels data base will not be generated.
	Difference of \t and \L  is that \L regenerates the database (which is
	quite fast).</p></div></p>

<a name="atp-:GotoLabel"></a>
<p><div class=command>:GotoLabel[!] {pattern} </div>
	<div class=indented>The command does the obvious thing. The {pattern} matches against the
	label or label value (as appears in output file). When matching the
	label value '^' is added at the beginning of pattern. With bang it
	doesn't regenerate the labels dictionary. It works with project files.
	It has completion.  If pattern matches many labels they all are listed
	with some useful info: label value, label and the file where it was
	defined (only in projects). Examples:
	    <div class=command>:GotoLabel 1.2</div>
	    <div class=command>:GotoLabel ^thm:</div>
	    Note: there is <a href="#atp-:Tags">atp-:Tags</a> command which makes the tag file, and you
	can use vim |tags| commands.

	<p>Note: You can also use a tag file and vim |tags| commands, see
	<a href="#atp-:Tags">atp-:Tags</a>.</p></div></p>

<a name="atp-:GotoNamedDest"></a>
<p><div class=command>:GotoNamedDest &ltdestination_name&gt</div>
<div align=right>{only in Xpdf}</div>
	<div class=indented>Using '\hypertarget{&ltdestination_name&gt}{&lttext&gt}' from hyperref package
	you can insert into PDF named destinations. This command will set the
	position of PDF file in Xpdf to this destination. There is
	a completion for destination names. This command solely works with
	Xpdf. Using:
	    <div class=command>:%s/\\label{\([^}]*\)}/\hypertarget{\1}{}/gc</div>
       you can turned labels into named destinations.</div></p>


<a name="atp-:F"></a>
<p><div class=command>:[count]F {arg}</div>
	<div class=indented>Go (forward) to {arg}, {arg} might be: part, section, subsection,
	subsubsection, and defined environment. You can use command completion
	which uses all the locally defined environments.</div></p>

<a name="atp-:B"></a>
<p><div class=command>:[count]B {arg}</div>
<div class=indented>Go (backward) to {arg}, like above <a href="#atp-:F">atp-:F</a>.</div></p>


<a name="atp-:NEnv"></a> <a name="atp-&gte"></a> <a name="atp-&ltC-F&gt"></a>
<p><div class=command>:NEnv {environment}</div>
<div class=command>:[count]F {environment}</div>
<div class=map>[count]map &gte</div>
<div class=map>[count]map &ltC-F&gt</div>
	<div class=indented>Move to next environment, for example ':NEnv definition'. Completion
	is set, which finds environments defined in current tex source file.
	This function omits environments in comment lines.

	<a name="atp-&gtm"></a> <a name="atp-&gtM"></a>
	<p>{environment} can be also math or displayedmath. For convenience
	there are maps: }m and }M respectively.</p>

	<p>If <a href="atp-ProjectFiles.html#g:atp_mapNn">g:atp_mapNn</a> is set to one (see <a href="atp-ProjectFiles.html#atp-:ToggleNn">atp-:ToggleNn</a>) then this command
	is using <a href="atp-ProjectFiles.html#atp-:S">atp-:S</a>.</p></div></p>

<a name="atp-:PEnv"></a> <a name="atp-&lte"></a> <a name="atp-&ltC-B&gt"></a>
<p><div class=command>:PEnv {environment}</div>
<div class=command>[count]:B {environment}</div>
<div class=map>[count]map &lte</div>
<div class=map>[count]map &ltC-B&gt</div>
	<div class=indented>Move to previous environment, for example ':NEnv definition'. Completion
	is set, which finds environments defined in current tex source file.
	This function omits environments in comment lines.

	<a name="atp-&ltm"</a> <a name="atp-&ltM"</a>
	<p>{environment} can be also math or displayedmath. For convenience
	there are maps: {m and {M respectively.</p>

	<p>If g:atp_mapNn is set to one (see <a href="atp-ProjectFiles.html#atp-:ToggleNn">atp-:ToggleNn</a>) then this command
	is using <a href="atp-ProjectFiles.html#atp-:S">atp-:S</a>.</p></div></p>

<a name="atp-:NextSection"></a> <a name="atp-:NPart"></a>	<a
    name="atp-&gtp"></a> <a name="atp-:NChap"></a>	<a
    name="atp-&gtc"></a> <a name="atp-:NSec"></a>	<a
    name="atp-&gts"></a> <a name="atp-:NSSec"></a>	<a name="atp-&gtS"></a> <a name="atp-:NSSSec"></a>
<p><div class=command>:NPart[!], :NChap[!], :NSec[!], :NSSec[!], :NSSSec[!] [title_pattern]</div>
<div class=command>[count]:F {section}</div>
<div class=map> map &gtp,  map &gtc,  map &gts,  map &gtS</div>
<div class=map>vmap &gtp, vmap &gtc, vmap &gts, vmap &gtS</div>
	<div class=indented>Go to next part/chapter/section/subsection/subsubsection which title
	matches optionally given [title_pattern]. With bang "!" the command
	doesn't skip commented sections. Maps skip them. The search will wrap
	around the end of a file if 'wrapscan' is set.

	<p>The {section} argument for :F is one off:
	    part/chapter/section/subsection/subsubsection.</p>

    <table border=0 vspace=0 cellspacing=0 >
	<tr><td>Map</td><td>  		Command</td><td>			Meaning
		<tr><td><div class=map>&gtp</div></td><td>		<div class=command>:NPart</div></td><td>go to next part</td></tr>
	<tr><td><div class=map>&gtc</div></td><td>		<div class=command>:NChap</div></td><td>go to next chapter</td></tr>
	<tr><td><div class=map>&gts</div></td><td>		<div class=command>:NSec</div></td><td>go to next section</td></tr>
	<tr><td><div class=map>&gtS</div></td><td>		<div class=command>:NSSec</div></td><td>go to next subsection</td></tr>
    </table>

    <a name="g:atp_map_forward_motion_leader">g:atp_map_forward_motion_leader</a>
    <p>You can set the leader '>' using <a href="#g:atp_map_forward_motion_leade">g:atp_map_forward_motion_leader</a>r
	variable.</p>

	<p>Note: If you leave the default value of <a href="#g:atp_map_forward_motion_leade">g:atp_map_forward_motion_leader</a>
	then ATP remaps |&gt&gt| to &gt&gt and also |v_&gt| to &gt&gt. |&gt| is working and is
	not touched by ATP. If you have |'timeout'| set then the map is
	executed faster, if you use |'notimeout'| this workaround it makes
	these operators work.</p>

	<p>Note: If you set <a
	    href="#g:atp_map_forward_motion_leader">g:atp_map_forward_motion_leader</a>="}" then ATP remaps |}|
	operator to }}</p>

	<p>Note: the maps work in visual mode and operator pending mode ('d\ns'
	will delete till the end of the section). You can use |n| and |N| Vim
	normal commands (also in visual mode) to go further. </p>

	<p>In visual mode these maps go to end of current section or, if already
	at the end of section, end of next section. </p>

	<p>[title_pattern] is the pattern which will match for the pattern, it
	should start with '.*' when you want to match somewhere in a middle of
	the title. </p>
	
	<p>These commands (and maps) use Vim |search()| function or <a href="atp-ProjectFiles.html#atp-:S">atp-:S</a>
	command depending on the value of <a
	    href="atp-ProjectFiles.html#g:atp_mapNn">g:atp_mapNn</a> (see <a
	    href="atp-ProjectFiles.html#atp-:ToggleNn">atp-:ToggleNn</a>, when g:atp_mapNn=1 the 
	    <a href="atp-ProjectFiles.html#atp-:S">atp-:S</a> command is used). You can set the value
	of <a href="atp-ProjectFiles.html#g:atp_mapNn">g:atp_mapNn</a> using the command <a
	    href="atp-ProjectFiles.html#atp-:ToggleNn">atp-:ToggleNn</a>. If 'wrapscan' is set and
	g:atp_mapNn=1 the search will wrap around the end of the project (not
	the end of the current buffer).</p>

	<p>You can unmap these keys and use &ltPlug&gtGotoNextSubSection,
	&ltPlug&gtGotoNextSection, &ltPlug&gtGotoNextChapter, &ltPlug&gtGotoNextPart to
	define new maps.</p></div></p>


<a name="atp-:PrevSection"></a> <a name="atp-:PPart"></a>	<a
    name="atp-&ltp"></a> <a name="atp-:PChap"></a>	<a
    name="atp-&ltc"></a> <a name="atp-:PSec"></a>     <a
    name="atp-&lts"></a> <a name="atp-:PSSec"></a>	<a
    name="atp-&ltS"></a> <a name="atp-:PSSSec"></a>
<p><div class=command>:PPart[!], :PChap[!], :PSec[!], :PSSec[!], :PSSSec[!] [title_pattern]</div>
<div class=command>[count]:B {section}</div>
<div class=map> map &ltp,  map &ltc,  map &lts,  map &ltS</div>
<div class=map>vmap &ltp, vmap &ltc, vmap &lts, vmap &ltS</div>
	<div class=indented>Go to previous part/chapter/section/subsection/subsubsection which
	title matches [title_pattern] (an optional argument). With bang "!"
	the command doesn't skip commented sections. Maps skip them. The
	search will wrap around the beginning of a file if 'wrapscan' is set.

	<a align=right name="g:atp_map_backward_motion_leader">"g:atp_map_backward_motion_leader"</a>
	<p>You can set the leader '&lt' using <a
	    href="#g:atp_map_bacward_motion_leader">g:atp_map_bacward_motion_leader</a>
	variable.</p>

	<p>The {section} argument for :B is one off:
	    part/chapter/section/subsection/subsubsection.</p>

	    <p>For description of arguments read <a href="#atp-:NextSection">atp-:NextSection</a> just above.</p>

    <table border=0 vspace=0 cellspacing=0 >
	<tr><td>Map</td><td>Command</td><td>Meaning</td></tr>
	<tr><td><div class=map>&ltp</div></td><td>		<div class=command>:PPart</div></td><td>go to previous part</td></tr>
	<tr><td><div class=map>&ltc</div></td><td>		<div class=command>:PChap</div></td><td>go to previous chapter</td></tr>
	<tr><td><div class=map>&lts</div></td><td>		<div class=command>:PSec</div></td><td>go to previous section</td></tr>
	<tr><td><div class=map>&ltS</div></td><td>		<div class=command>:PSSec</div></td><td>go to previous subsection</td></tr>
    </table>

    <p>These commands (and maps) use Vim |search()| function or <a
	href="atp-ProjectFiles.html#atp-:S">atp-:S</a> command depending on the value of
    <a href="atp-ProjectFiles.html#g:atp_mapNn">g:atp_mapNn</a> (see <a href="atp-ProjectFiles.html#atp-:ToggleNn">atp-:ToggleNn</a>, when
    g:atp_mapNn<a href="atp-ProjectFiles.html#g:atp_mapNn">g:atp_mapNn</a>=1 the <a href="atp-ProjectFiles.html#atp-:S">atp-:S</a> command is used). If
    'wrapscan' is set and <a href="atp-ProjectFiles.html#g:atp_mapNn">g:atp_mapNn</a>=1 the search will wrap around the
    beginning of the project (not the beginning of the current buffer).</p>

	<p>You can unmap these keys and use &ltPlug&gtGotoPreviousSubSection,
	&ltPlug&gtGotoPreviousSection, &ltPlug&gtGotoPreviousChapter,
	&ltPlug&gtGotoPreviousPart to define new maps.</p>


	<p>Note: If you leave the default value of <a
	    href="atp-mappings.html#g:atp_map_forward_motion_leade">g:atp_map_forward_motion_leader</a>r
	then ATP remaps |&lt&lt| to &lt&lt and also |v_&lt| to &lt&lt. |&lt| is
	working and is not touched by ATP. If you have |'timeout'| set then the
	map is executed faster, if you use |'notimeout'| this workaround it
	makes these operators work.</p>

	<p>Note: If you set <a
	    href="#g:atp_map_forward_motion_leader">g:atp_map_forward_motion_leader</a>="{"
	then ATP remaps |}| operator to {{</p></div></p>


<p>Previous commands where using relative position - goto next/previous
section/chapter. The following commands/maps will go to section/chapter as
counted from first one.</p>
<a name="atp-:SSec"></a> <a name="atp--S"></a> <a name="atp-:Sec"></a>  <a name="atp--s"></a> <a name="atp-:Chap"></a> <a name="atp--c"></a> <a name="atp-:Part"></a> <a name="atp--p"></a>
<p><div class=command>:[count]SSec</div>
<div class=map>nmap -S</div>
<div class=command>:[count]Sec</div>
<div class=map>nmap -s</div>
<div class=command>:[count]Chap</div>
<div class=map>nmap -c</div>
<div class=command>:[count]Part</div>
<div class=map>nmap -p</div>
	<div class=indented>Go to subsection/section/chapter/part [count] from begin of the
	section/chapter/document, i.e. 3]s will jump to section 3 in current
	chapter. Mark ' is preserved.

	<p>Note: if you are in a section which has no subsections :SSec and -S
	will go to next section, the same aplies to other section types.</p>

	<p>You can set the leader for maps with <a
	    name="g:atp_goto_section_leader">g:atp_goto_section_leader</a>.</p></div></p>


<a name="atp-:SkipCommentForward"></a> <a name="atp-]star"></a> <a name="atp-gc"></a>
<p><div class=command>:SkipCommentForward</div> 
<div class=map>nmap ]* gc</div>
	<div class=indented>Go to end of current/next comment group.</div></p>

<a name="atp-:SkipCommentBackward"></a> <a name="atp-[star"></a> <a name="atp-gC"></a>
<p><div class=command>:SkipCommentBackward</div>
<div class=map>nmap [* gC</div>
	<div class=indented>Go to begining of current/previous comment group.</div></p>

<a name="env_tools"></a>
<h2>Environment Tools</h2>
<a name="atp-:ToggleStar"></a>
<p><div class=command>:ToggleStar</div>
<div class=map>map &ltLocalLeader&gts</div>
	<div class=indented>Add/removs a star from the current environment (if it is not one
	belonging to the list:
	<div class=variable>g:atp_no_star_environments</div>
	See <a href="atp-mappings.html#b:atp_StarEnvDefault">b:atp_StarEnvDefault</a> and <a
	    href="atp-mappings.html#b:atp_StarMathEnvDefault">b:atp_StarMathEnvDefault</a>.</div></p>

<a name="atp-:ToggleEnv"></a>
<p><div class=command>:ToggleEnv</div>
<div class=map>map &ltS-F4&gt</div>
	<div class=indented>mapped to &ltF4&gt and &ltS-F4&gt, switches environment name. See
	(i.e. echo ) g:atp_toggle_environments_1...7 (you can change or add
	your own variables, just add numbers - they must be consecutive).
	
	<p>Read <a href="#g:atp_toggle_labels">g:atp_toggle_labels</a> below
	how it handles the prefixes of labels.</p></div></p>

<a name="atp-:ChangeEnv"></a>
<p><div class=command>:ChangeEnv</div>
<div class=map>nmap &ltF4&gt</div>
	<div class=indented>This does the same as the above command but asks for environment name.

	<p>Read <a href="#g:atp_toggle_labels">g:atp_toggle_labels</a> below
	how it handles the prefixes of labels.</p>

	<a name="g:atp_toggle_labels"></a>
	<p>The commands <a href="#atp-:ToggleEnv">atp-:ToggleEnv</a> and <a
	    href="#atp-:ChangeEnv">atp-:ChangeEnv</a> changes the prefixes of
	labels (if there is one, which belongs to g:atp_shortnames_dict) and
	all ref's (\ref, \eqref and \pageref).  You have to turn on this
	feature by putting g:atp_toggle_labels=1 (by default it is 0).  Check
	if it works for you!  If there is a label or reference to which it
	wants to change it doesn't change labels and issue a Warning Message,
	thus I believe it should work for every one, but as this changes your
	file it is turned off by default.)</p> 

	<p>In project files this is done in all files belonging to the project.
	Changes are not saved by default (ATP uses |'hidden'| option, so when
	you use q! or qa! all changes will be lost).</p></div></p>

<a name="atp-:WrapEnvironment"></a>
<p><div class=command>:WrapEnvironment {environment}</div> 
<div class=map>vmap &ltF4&gt</div>
	<div class=indented>Mark part of the text and wrap it into anvironment given as the
	argument, the map will let you choose the environment name.</div></p>

<a name="wdiff"></a>
<h2>Wdiff</h2>
<a name="atp-:Wdiff"></a>
<p><div class=command>:Wdiff {old-file} {new-file}</div>
	<div class=indented>This is diff using the GNU wdiff. This command will split the view and
	show the wdiff output. You can use ]s and [s to go to next previous
	change. The deleted parts of {old-file} are marked embraced into
	{=...=} and highlighted with |hl-DiffDelete|. The added parts of
	{new-file} are embraced with {+...+} and highlighted with
	|hl-DiffAdd|. If the preambles differ you will be asked which one to
	use in the diff file.

	<p>This is an alternative for latexdiff program, but is much faster.</p>

	<p>The diff file might not compile well (thus the b:atp_autex is set to
	0 by default), this is mainly because the math environments can be
	break and the output might contain: \( a {= =c\)=} {+ !=c\)+} Other
	things which are not taken into account are changes of environment
	names, changes of coordinates in tikz. It would be nice to tell to
	wdiff to not diff them, but this is not implemented.</p>

	<p>After you resolve such conflicts the file should compile nicely
	(though I didn't do many tests). After that you can change {=...=} and
	{+...+} for something better. For example you can change {= and =} for
	\textcolor{red}{=} and {+, +} for \textcolor{blue}{+}. If you resolved
	syntactic conflicts in a very nice way you can change whole {=<old>=}
	for \textcolor{red}{<old>} and {+<new>+} for \textcolor{blue}{<new>}.
	For this you can use the following Vim command:</p></div></p>

<a name="atp-:NiceDiff"></a>
<p><div class=command>:NiceDiff</div>
	<div class=indented>(which also remaps ]s and [s and keeps the highlighted areas).
	The :NiceDiff command, although I tried, is not changing all the regions,
	I will try to fix this in next releases. (Thus not all parts of the output
	file might be highlighted).</div></p>


<a name="dsearch"></a>
<h2>Definition Search</h2>
<a name="atp-:Dsearch"></a>
<p><div class=command>:Dsearch[!] [/]{pattern}[/]</div> 
	<div class=indented>The {pattern} argument is optional. It is any vim pattern. Finds all
	definitions which matches the pattern. It looks in the main file (only
	in the preamble, unless the optional bang '!' is used) and all the
	input files (except bib files). This command respects the options:
	'ignorecase' and 'smartcase'. You can override them with '\C' (match
	case what follows) and '\c' (ignore case in what follows).

	<p>It works likes ]d but handles multi line definitions.<p></div></p>

<a name="g:atp_DsearchMaxWindowHeight"></a>
<p><div class=variable>g:atp_DsearchMaxWindowHeight=15</div>
<div class=indented>You can set the maximal hieght of the window wich shows the results of
<a href="#atp-:Dsearch">atp-:Dsearch</a> (default is 15).</div></p>

<a name="font_search"></a>
<h2>Font Search and Preview</h2>
<a name="atp-:FontSearch"></a>
<p><div class=command>:FontSearch[!] [pattern]</div>
	
	<div class=indented>For example:
	<div class=indented>
	<div class=command>:FontSearch ^t1</div>
		will list all the fd files in your tex distribution which
		names starts with t1 (i.e. which describes fonts in encoding
		'T1')
	<div class=command>:FontSearch! bookman</div>
	will list all fd files which full path matches 'bookman'.</div>

    <p>In the opened window there are several mappings defined:
    <div class=indented>
    <table border=0 vspace=0 cellspacing=1 >
	<tr><td valign=top>&ltEnter&gt</td><td>open the fd file under the cursor</td></tr>
	<tr><td valign=top>&ltTab&gt</td><td>list fonts defined in the fd file
		(shows the command that you can use in your tex file to use
		this font)</td></tr>
	<tr><td valign=top>p</td><td>preview the fonts defined in the fd file
		under the cursor, do not shows the latex source. </td></tr>	
	<tr><td valign=top>P</td><td>preview fonts and show the latex source
		<br> (then you can see the errors why the preview was not
		produced; in many cases there are no encoding files or fonts
		themselves for which you have to look in <a
		    href="http://www.ctan.org/"><b>ctan archive</b></a>
		yourself; or <em>you can just see how to use fonts :)</em>
		)</td></tr> <tr><td valign=top>q</td><td>close the window
		(actually, delete the buffer using :bd, it will be still in the
		list if you type ":ls!", so even then you can reload previous
		searches.)
	</td></tr>
    </table></div>

	<p>In addition to 'p' and 'P' maps there is a :Preview command. 
	Note: the maps 'p' and 'P' work in both normal and visual mode.
	You can select a part of the text and use this maps or the command
	:Preview to make one preview file for all the font files.</p>


	<p>The same mappings are defined in the window with fd file opened
	(except &ltEnter&gt, &ltTab&gt).</p> 

	<p>Additionally, read |font-lowlevelcommands| to learn how to use
	|\usefont|, |\fontsize|, |\selectfont| and other such commands.
	The 'Latex 2e font selection' by 'LeTeX3 Project Team' might be very
	useful. It is available on the net (you probably have it in your tex
	distribution if it is installed with the documentation, if not check
	the <a href="http://www.ctan.org/"><b>ctan archive</b></a>).</p>

	<p>ATP also has a very nice completion for various font declaration
	commands, see <a href="#atp-completion-fontdeclaration">atp-completion-fontdeclaration</a>.</p>

	<p>Hopefully, this will help your documents to become beautiful :)</p></div></p>

<a name="atp-:FontPreview"></a>
<p><div class=command>:FontPreview[!] {fdFile} [encoding] [keep_tex]</div>
<div class=indented>Previews all fonts defined in fd file matching the pattern <fd_file> with
encoding [encoding] (optional). If [keep_tex] is 1 (default is 0) it will keep
the latex source file for debugging purposes.

<p>Without [!] it matches just the name of the fd files, with [!] the pattern
{fdFile} matches for full path.</p>

<p>It returns a list of fonts which fd files matches the {fdFile} pattern in
[encoding]. You will be asked to chose for which files make a preview, possible
answers are: 
<div class=indented>1,2,3</div>
which is equivalent to 
<div class=indented>1-3</div>
you can also mix this notation: 
<div class=indented>1,2-5,7</div>
As in FontSearch command the [keep_tex] variable specifies if
the source file will be shown (for debugging purposes, or just to look how
to use the font :).</p></div></p>

<a name="various"></a>
<h2>Various Commands</h2>
<a name="atp-status-line"></a> <a name="atp-:Status"></a> <a name="atp-:ATPStatus"></a>
<p><div class=command>:Status[!]</div>
<div class=command>:ATPStatus[!]</div>
	<div class=indented>This comman sets the status line, which include: the name of currently
	edited chapter (or section) the value of <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> (unless used
	with bang!) and it will warn you if <a href="atp-configure.html#b:atp_OutDir">b:atp_OutDir</a> variable is not
	set. The status line will also contain the information about
	processing compelation: see |atp-status-line-notification|,
	<a href="#g:atp_ProgressBar">g:atp_ProgressBar</a>. This function is called at startup unless the
	variable '<a href="atp-highlight.html#g:atp_StatusLine">g:atp_StatusLine</a>=0' is set. The status is set by the
	autocommand:
		<div class=aucommand>au BufWinEnter *.tex :call Status()</div>
	In this way every opened window with a '*.tex' file will get the correct
	status line.

	<p>If there was a command with name 'Status', atp is not overwriting it,
	it uses ATPStatus name.</p>

	<a name="g:atp_statusOutDir" align=right ><div class=variable>g:atp_statusOutDir</div></a>
	<p>Note: if you set g:atp_statusOutDir=0 (the default is 1) then the
	output directory will be not seen in the statusline.</p></div></p>

<a name="atp-function-ToDo"></a> <a name="atp-:ToDo"></a> <a name="atp-:Note"></a>
<p><div class=command>ToDo({keyword}, {stop}, [bufname])</div>
<div class=command>:ToDo [bufname]</div>
<div class=command>:Note [bufname]</div>
	<div class=indented>The function list all the lines of the buffer [bufname] which match
	for the pattern '%.*{keyword}'. The {stop} argument is the pattern to
	before which to stop. The optional argument is the buffer name
	(the buffer name completion is set on). If not given the current
	buffer is assumed.  You can set highlighting for this command by:
		<div class=map>highlight atp-Todo ctermfg=... 	guifg=...</div>
	The command :ToDo sets keyword='\c\<todo\>' and
	stop='\s*%.*\c\<note\>', and the command :Note sets
	keyword='\c\<note\>' and stop='\s*%.*\c\<todo\>'. This prevent from
	listing ToDo lines with Notes and vice versa. </div></p>

<a name="atp-:WordCount"></a>
<p><div class=command>:WordCount[!]</div> 
	<div class=indented>The command to compute the number of words. With bang [!] it will show
	the word count of each input file. It uses 'detex' program (which is
	present in 'texlive') to remove the latex markups prior to word
	counting (done by the external 'wc' program). 
	Note: This command will first save the file.</div></p> 

<a name="atp-:Babel"></a>
<p><div class=command>:Babel</div>
	<div class=indented>If g:atp_babel variable is set on start up to 1 (however, the default
	value is 0, you can use |vimrc| or <a href="atp-configure.html#atprc">atprc</a> file to switch it on) then
	ATP will set the |'keymap'| option according to the default babel
	language (which is the last language passed to babel as optional
	argument [lang_list] in \usepackage[lang_list]{babel}).
  
	<p>If g:atp_babel is set to 1 the keymap name is shown in the status
	line (if you use the <a href="#atp-status-line">atp-status-line</a>).
</div></p>

<a name="g:atp_keymaps"></a>
<p><div class=map>g:atp_keymaps</div>
<div class=indented>The <a href="#g:atp_keymaps">g:atp_keymaps</a> variable is used to translate babel language name
to 'keymap' value. The default is something like:
<table border=0 vspace=0 cellspacing=0 >
    <tr><td><div class=map>let g:atp_keymaps</div></td><td> = { </td><td></td></tr>
    <tr><td></td><td>	\ 'british'	: 'ignore',</td><td>		'english' 	: 'ignore',</td></tr>
    <tr><td></td><td>	\ 'USenglish'	: 'ignore',</td><td> 		'UKenglish'	: 'ignore',</td></tr>
    <tr><td></td><td>	\ 'american'	: 'ignore',</td><td></td></tr>
    <tr><td></td><td>    	\ 'bulgarian' 	: 'bulgarian-bds',</td><td> 	'croatian' 	: 'croatian',</td></tr>
    <tr><td></td><td>	\ 'czech'	: 'czech',</td><td>		'greek'		: 'greek',</td></tr>
    <tr><td></td><td>	\ 'plutonikogreek': 'greek',</td><td>		'hebrew'	: 'hebrew',</td></tr>
    <tr><td></td><td>	\ 'russian' 	: 'russian-jcuken',</td><td>	'serbian' 	: 'serbian',</td></tr>
    <tr><td></td><td>	\ 'slovak' 	: 'slovak',</td><td> 		'ukrainian' 	: 'ukrainian-jcuken',</td></tr>
    <tr><td></td><td>	\ 'polish' 	: 'polish-slash' }</td><td></td></tr>
</table>
<p>When the value is <ignore> then the function <SID>Babel() (or the
command <a href="#atp-:Babel">atp-:Babel</a>) will ignore setting keymap option for this
language. Using the above syntax you can set this variable in |vimrc|
or <a href="atp-configure.html#atprc">atprc</a> file.</p>

<p>This is useful if you in day to day work use one language, but some
times you write a tex file in some other language.</p></div></p>

<a name="atp-:ShowOptions"></a> 
<p><div class=command>:ShowOptions[!] [pattern]</div>
	<div class=indented>This will show values of variables that are currently set. 
	With bang it also shows global variables defined in
	'ftplugin/ATP_files/options.vim' (that means almost all global
	variables). Completion lists are filtered out by default.

	<p>The optional argument [pattern] is used to filter variables names with
	the given pattern.</p>

	<p>TIP: if you are looking for a variable you can use this command to
	find it.</p></div></p>

<a name="atp-:HelpEnvIMaps"></a> <a name="atp-:HelpMathIMaps"></a> <a name="atp-:HelpVMaps"></a>	
<p><div class=command>:HelpEnvIMaps</div>
<div class=command>:HelpMathIMaps</div>
<div class=command>:HelpVMaps</div>
<div class=indented>These commands list valid mappings defined by ATP (unless g:no_plugin_maps
or g:no_atp_maps are defined).</div></p>

<a name="atp-:ShowPackages"></a>
<p><div class=command>:ShowPackages</div>	
<div class=indented>lists LaTeX packages defined in the preamble.</div></p>
<a name="atp-:Preamble"></a>
<p><div class=command>:Preamble</div>	
<div class=indented>echoes the preamble to vim pager.</div></p>

<a name="atp-:ReloadATP"></a>
<p><div class=command>:ReloadATP</div> 
<div class=indented>Reloads ATP plugin: variables, functions, and maps. Note that maps are not
deleted.</div></p>

<a name="atp-toc-window"></a>
<h2>TABLE OF CONTENTS WINDOW</h2>

<p>For the table of contents command and maps read <a href="#atp-:TOC">atp-:TOC</a>.</p>

<p>The Table of Contents window is used by both <a
    href="#atp-:TOC">atp-:TOC</a> and <a href="#atp-:Label">atp-:Labels</a>s
commands.</p>

<p>In the Table of Contents window there are the following nmaps:</p>

<div class=indented>
<table border=0 vspace=0 cellspacing=1 >
    <tr><td valign=top>'e'</td><td>to echo the line from your tex file</td></tr>
    <tr><td valign=top>'y' or 'c'</td><td>to yank the label of the chapter under the cursor
			    to a register, if it exists,</td></tr>
    <tr><td valign=top>'p'</td><td>to paste it directly to your tex file (just after the
			    current cursor position), </td></tr>
    <tr><td valign=top>'s'</td><td>it splits the window with your tex source file and sets
	    the current line to the beginning of the chapter/section under the
	    cursor,</td></tr>
    <tr><td valign=top>'q'</td><td>to quit, and finally, </td></tr>
    <tr><td valign=top>&ltEnter&gt</td><td>to go to the chapter under the cursor and close ToC.</td></tr>
    <tr><td valign=top>&ltspace&gt</td><td>to go to the chapter under the cursor but leave ToC open.</td></tr>
</table></div>
			    

<p>There are also commands: ':C' and ':P', which do the same as 'c' and 'p'
mappings. They all call the function 'Yank(<where>)', the argument &ltwhere&gt
can be one of: '@&ltregister name&gt' or 'p'. </p>

<p>You can also delete and paste sections using the Table of Contents
window:</p>

<a name="atp-:YankSection"></a> <a name="atp-:DeleteSection"></a> <a name="atp-:PasteSection"></a> <a name="atp-:SectionStack"></a>
<p>These commands are available in table of contents. They act on
parts/chapters/sections/subsections/subsubsections.
<div class=command>:YankSection [register]</div>
Yank the section under the cursor (in table of contents) to the given register.
If the register is not specified use the unnamed register (|registers|).</p>
	 
<p>The other commands do not use registers but an internal stack.
<div class=command>:DeleteSection</div>
<div class=command>:PasteSection</div>
<div class=command>:SectionStack</div>
Using ':DeleteSection' you can delete the section under cursor together 
with all its subsections.  /Section can be one of: part, chapter,
section, subsection, subsubsection, or bibliography/.  Deleted section
will be added to a stack which can be shown using the command
':SectionStack' There is a command to paste the section from section
stack ':PasteSection'. By default it pastes the most recent element in
the stack. Passing a number will paste that element of the stack
/bear in mind that then numbers of sections in the stack will change/.</p>

<p>':PasteSection' puts the section just after where current section ends
(section under the cursor in the ToC buffer).</p>

<p>Note: If you use bibtex commands to make bibliography ATP finds the line
which contains '\bibliography' command. And then searches backward for the
first line which is a blank line. The next line is assumed to be the first line
of bibliography.  Thus to move the last section before bibliography or the
bibliography itself its better you put a blank line before bibliography
commands.  The same applies for bibliographies put in the middle of document
(end of a chapter, part, etc.) The end of bibliography is found in the same way
as the end of subsubsection.  If you use
\begin{thebibliography}:\end{thebibliography} there is no such a problem.</p>

<p>If you want to paste a section before the first section, use the line with
the file name.</p> 

<a name="atp-:Undo"></a>
<div class=command>:Undo</div> 
 <div class=map>nnoremap u, nnoremap U, nnoremap g-, nnoremap g+</div> 
	<p>You can use undo. The :Undo command will undo in the buffer under
	the cursor (it switches to the correct window, using the Vim undo
	function, and runs :TOC command - so after all your back in ToC.). The
	':Undo' command has one argument - the Vim undo command to use, it is
	one of: 'u/U/g-/g+' (the default is 'u'). They are mapped to 'u','U',
	'g-' and 'g+'.  (only in the ToC buffer).  Note: ':Undo' command
	doesn't changes the Section Stack.</p>

	<p>There is one more level of security: There is a global variable which
	stores all the deleted sections together with some information about
	them:
	<div class=variable>g:atp_SectionBackup</div>
	it is a Vim list (see |List|). Each entry is a list of the following format:
	<div class=variable>[ &lttitle&gt, &lttype&gt, &ltdeleted_section&gt, &ltsection_nr&gt, &ltfile&gt ]</div>
	where &lttitle&gt is the section title, &lttype&gt is one of: part, chapter, 
	section, subsection, subsubsection bibliography or abstract.  Deleted
	section is a list of deleted lines, &ltsection_nr&gt is the number of the
	section that it had before delete, &ltfile&gt is the full path to the
	file which it comes from.  If you need to use it, you can use the Vim
	function |append()| to put the &ltdeleted_section&gt in the right place.</p>

	<p>NOTE:<br>
		You may want to have a map: >
		<div class=aucommand>:au FileType toc_atp nnoremap dd :DeleteSection&ltCR&gt</div>
		this can be put in your '$HOME/.atp.vim' configuration file.</p>

<a name="atp-bibsearch"></a>
<h2>SEARCHING IN BIB FILES</h2>

	<div class=indented><h4>Table of Contents:</h4></div>
	<div class=indented><a href="#atp-:BibSearch">atp-BibSearch</a></div>
	<div class=indented><a href="#atp-bibpatterns">atp-bibpatterns</a></div>
	<div class=indented><a href="#atp-bibflags">atp-bibflags</a></div>
	    <div class=double_indent><a href="#atp-bibflags:default">atp-bibflags:default</a></div>
	    <div class=double_indent><a href="#atp-bibsearch-show-only-keys">atp-bibsearch-show-only-keys</a></div>
	    <div class=double_indent><a href="#atp-bibflags:+">atp-bibflags:+</a></div>
	    <div class=double_indent><a href="#atp-bibflags:output">atp-bibflags:output</a></div>
	    <div class=double_indent><a href="#atp-bibflags:all">atp-bibflags:all</a></div>
	    <div class=double_indent><a href="#atp-bibflags:last">atp-bibflags:last</a></div>
	    <div class=double_indent><a href="#atp-bibflags:add-flag">atp-bibflags:add-flag</a></div>	
	    <div class=double_indent><a href="#atp-bibflags:examples">atp-bibflags:examples</a></div>
	<div class=indented><a href="#atp-:BibChoose">atp-:BibChoose</a></div>	
	<div class=indented><a href="#atp-bibsearch-highlight">atp-bibsearch-highlight</a></div>
	<div class=indented><a href="#atp-:BibSearch">atp-:BibSearch</a></div>

	    <h4>Naming Conventions:</h4>
	    <pre>
		@article{&ltlabel&gt,					\	
			author = { .... },		&lt-- bib entry   | 
			title  = { .... },				 &gt bib field
			journal= " .... ",				|
		}							/	

			article 		&lt-- bib field keyword 
			author,title,...	&lt-- bib entry label 	
			&ltlabel&gt			&lt-- bib field label 	
	    </pre>


<p>One more function is provided which searches the bib files for bib fields, 
and for the bib field labels for the latex command \cite{}.</p>

    <a name="atp-:BibSearch"></a> 	
<div class=command>:BibSearch /{pattern}/ [flag]</div>
	<p>which do what you expect. The arguments should not be quoted and
	separated by a white spaces (if you want to include a white space use
	'\ '), for more see |f-args|. If you do not provide any argument then
	all entries of all bib files will be shown. </p>
	
	<a name="g:atp_bibsearch"></a>
	<p>Note: {pattern} should be python regular expression not vim regular
	exression. Unless you set |g:atp_bibsearch|="vim" (the default is
	"python"). Python regular expressions are quite similar to vim with
	'nomagic' set ( grouping with '(' and ')', with separating
	alternatives with '|'). But there is no vim '\&' in python regexp.</p>

	<p>The pattern to highlight matching string is passed to |@/| hence you can
	use |n| and |N| in the BibSearch buffer. This will only work for
	{pattern} which is both vim and python regular expression.</p>

	<p>See <a href="#atp-bibflags">atp-bibflags</a> for the [flag] argument.</p>

	<p>The next one shows all bib fields which were written by Joyal and
	Tirney (and may by somebody else).</p>

	    <div class=command>:BibSearch author.*Joyal\&.*Tirney</div>
 	<div class=indented>This is not possible with |g:atp_bibsearch|="python" (the default).</div>

	<a name="atp-bibpatterns"></a>
	<p>Note: Upper pattern is vim pattern lower one is python regexp.</p> 

	<p>Before the match all the ligature symbols and {:} are removed. For
	example \`a, \' e, \oa,\ea are substituted with a, e, oa, ea
	(respectively).  Note that the space in \' e is also removed. Each
	line (without ligatures) of every bib file found in your tex document
	will be matched against the pattern, for example if the pattern is:</p>
	<div class=example>	
	    'author.*Grothendieck'<br>
	    'author.*Grothendieck'</div>
	the BibSearch function will find all the bibliographic fields
	which in one line have the words 'author' and 'Grothendieck' (in most
	cases it means that you will see only works of Grothendieck). Another
	example:
	<div class=example>	
	    '^\(\s*author.*Joayl\)\|Galois Theory'<br>
	    '^(\s*author.*Joayl)|Galois Theory'</div>
	will result in all bib fields which author is Joyal or 
	which includes the words 'Galois Theory' (which by the way appear in
	many article/book titles), yet another example:	
	<div class=example>	
	    'author.*Joayl\|title.*Galois Theory'<br>
	    'author.*Joayl|title.*Galois Theory'</div>
	This will match against all bib entries written by Joyal or which title
	includes the word 'Galois Theory'.
	<div class=example>	
	    'author.*Joyal\&.*Tirney'<br>
	    ! python has no '\&' !</div>
	will find all the bib entries which were written by Joyal and Tirney
	(and maybe somebody else). </p>

	<p>For now, there is no possibility to filter bibliographic entries which
	both match a pattern in separate lines, i.g. to show all bib entries
	written by Joyal on 'Descent Theory'.</p>

	<p>Before a match, all '{', and '}' are deleted from the line of the bib file.
	But you will see them in the output (what can be useful for debugging
	errors in bib files)</p>

	<p>Note that in Vim patterns should be quoted using '...' not "...".  </p> 

	<p>Further examples are supplied after the next section
	<a href="#atp-bibflags:examples">atp-bibflags:examples</a>, which describes other functionalities of the
	BibSearch/BibChoose commands.</p>

	<div align=right><a name="atp-bibpattern:last">b:atp-bibpattern:last</a></div>
	<div align=right><a name="atp-bib-b:atp_LastBibPattern">atp-bib-b:atp_LastBibPattern"</a></div>
	<p>The variable 'b:atp_LastBibPattern' stores the last pattern used by
	bib search.</p>

	<a name="atp-bibflags"></a>
	<p>The first optional argument [flags] chooses what and in which order
	you want to see the  bib entries found (entries are listed in
	the order they appear in bib file).  Flag is a word made of letters.
	There are three kinds of flags: entry flags which matches against
	labels of bib entries, like author, title, etc..., and keyword flags: which
	matches against keywords of bib fields: @article, @book, @techreport,
	etc...  and two special flags 'All' and 'L'. A flag is a word on
	letters:</p>
<pre>
		a  - author
 		e  - editor
 		t  - title
 		b  - booktitle
 		j  - journal
 		s  - series
 		y  - year
 		n  - number
 		v  - volume
 		p  - pages
 		P  - Publisher
 		N  - Note
 		S  - School
 		h  - howpublished
 		o  - organization
		u  - url	
		H  - Homepage	
  any other letter - do not show anything but the first line of bib entry 
		@a - article 						/@article/
		@b - book or booklet 					/@book,@booklet/
		@B - Booklet 						/@booklet/	
		@c - incollection 					/@incollection,@inbook/
		@p - proceedings, inproceedings, conference   		/@proceedings,@inproceedings,@conference/
		@m - misc 						/@misc/
		@M - Manual 						/@manual/
		@t - master or PhD thesis  				/@masterthesis,@phdthesis/
		@T - Techreport 					/@techreport/
		@u - unpublished  					/@unpublished/		
		All - all flags						(see <a href="#atp-bibflags:all">atp-bibflags:all)</a>		
		L   - last flags					(see <a href="#atp-bibflags:last">atp-bibflags:last)</a>		
</pre>
	<p>Examples:
	<div class=example>
	    tayu@a		--&gt show the entries: tile, author, year, url of matching articles.</div>
	<div class=example>
		baeP@b		--&gt show the entries: booktitle, author, editor, 
		publisher of matching books (@book,@booklet).</div>

	<p>Flags '@.' are filtered out, if one does not belong to the one above
	then it is deleted. You can see which flags are defined using
	ShowOptions function/command (they are listed as Available
	KeyWordFlags).</p>
	<a name="atp-bibflags:default"></a>
	<p>The default flag is stored in the global variable g:defaultbibflags and is
	equal to 'tabejsyu'. This means that the output for each bib field found 
	will include the <pre>
		title
		author
		booktitle
		editor
		journal 
		series
		year
	    </pre>
	if title,author,... are specified in the bibliography for the given
	position. If there are many position which match you can set flags to
	be as simple as possible to include more lines on the screen. For
	example 'tabe' is quite reasonable (note that all bib entries are
	matched separately, i.e. if a bib field has both 'title' and 'booktitle'
	bib entries it will give you both of them.</p>

	<a name="atp-bibsearch-show-only-keys"></a>
	<p>If you just want to list just the lines with bib fields keywords:
	@article{, @book{, etc. supply a flag which do not belongs to
	'g:defaultallbibflags', for example 'X', or 'X@a'</p>
	
	<a name="atp-bibflags:+"></a>
	<p>You can also specify flags with '+', for example: 
	<div class=example>flags='+p'</div>
	<div class=example>flags='+@b'</div>
	This feature <b>adds flags to the default value</b> defined in the variable
	g:defaultbibflags (see <a
	    href="#atp-defaulbibflags">atp-defaulbibflags)</a>. The first will
	result in showing the default entries and the page number, the second
	will result in showing only books with the default bib entries. You can
	specify as many additional flags as you wish.  <a name="atp-bibflags:output"></a>
	Note that the function shows the line with database file name if there
	are entries in this bibliography which match the pattern thus,for
	example, if you specify the flag '@a' and you see the line with
	database file name, but you do not see any bib entry, then in this
	database there are bib fields which match but these are not
	articles.</p>
	
	<a name="atp-bibflags:all"></a>
	<p>The flags='All' is a synonym of flag=g:defaultallbibflags which by default is
	equal to'tabejfsvnyPNSohiuHcp' i.e. all flags in this order. If you
	add your own flag you should change this global variable. You can add to
	this flag any flag which contains '@' (see <a href="#atp-bibflags">atp-bibflags)</a> by
	the plus operator, i.e. All+@a@b or +@aAll will give the same result.</p>

	<a name="atp-bibflags:last"></a> <a name="atp-bib-b:atp_LastBibFlags"></a>	
	<p>The variable 'b:atp_LastBibFlags' stores the recently used flags. The flag
	'L' sets the flags for this search to the value of 'b:atp_LastBibFlags'.
	You can write '+L@a', '+L@a', 'L@a' or '@aL' but not '+@La', if you
	want to add some flags to previous searches. Next time the flag 'L'
	will change the meaning (i.e. it is really the last time not earlier
	:) However, there is no '-' :( '-@aL' could be helpful.</p>
	 
	<p>The variable 'b:atp_LastBibFlags' is not changed when you use the 'All'
	flag.</p>

	<a name="atp-bibflags:add-flag"></a>
	<p>You can add your own flags but not keyword flags (i.e. @a,@b,...).
	Just add an entry to the dictionary g:bibflagsdict. (:ShowOptions v to
	see its current value), For example
	<div class=variable>let g:bibflagsdict=extend(g:bibflagsdict,  { '<flags_name>' : [ '<bib_entry_name>': '<how_to_show>'] })</div>
	where, &ltflags_name&gt is the flag to use (it should be one letter), it
	must be different from the defined flags, &ltbib_entry_name&gt is a
	lower case bib entry name, like 'title', 'url', etc., &lthow_to_show&gt if
	you want to have a nice output put the bib entry name and that much of
	white spaces to get 13 strings.</p>

	<a name="atp-bibflags:examples"></a>
	<p>Some examples:						
	    <div class=command>:BibSearch</div> 
				<div class=indented>Above command shows all bib fields with
				the default flags (might be slow, why not to
				open bib file with :GotoFile)</div>
	    <div class=command>:BibSearch @ yt</div>	
				<div class=indented>and this is a tip how to show all bib fields with
				different flags than the default ones(the '@'
				will match at every bib field!). It is
				equivalent to:</div>
	    <div class=command>:BibSearch // yt</div>

	    <div class=command>:BibSearch /title[\s.]*Galois Theory/  aetb</div>

<a name="atp-:BibChoose"></a>
<div class=command>:BibChoose {BibEntry[RegisterName]}</div>
<div class=map>map c, map y, map p</div>
	<p>This command is only available in the window with BibSearch results
	and allows to copy a bib entry key to a register or directly to the
	last opened buffer (after the cursor position). It is mapped to 'c'
	and 'y'. You will be asked to give the number of bib entry to yank:</p>
<pre>
	    &ltbib entry number&gt&ltregister name&gt&ltEnter&gt	- to copy it to a register
	    &ltbib entry number&gt&ltEnter&gt			- to paste it to 'tex' file
	    &ltEnter&gt					- to skip the choice
</pre>	
	When you paste the bib entry key the bib search window will close. For
	example:
		<div class=command>:BibChoose 5e</div>
		<div class=command>:BibChoose 7+</div>
		<div class=command>:BibChoose 2</div>
	Copy the bibkey to register e,+ or paste directly to the buffer 
	in which :BibSearch was invoked, at last cursor position.</p>

	<p>The same you will obtain using the nmaps y or c.</p> 
	
	<p>This commands and maps are only in the BibSearch buffer.</p>

	<a name="atp-bibsearch-highlight"></a>
	<p>The colours of the output are set by the syntax file
	'syntax/bibsearch_atp.Vim'. All groups except one are the same as in
	the syntax file for bib files ('syntax/bib.Vim' in your $VIMRUNTIME
	directory). Their names are 'bibsearchEntryKw' instead 'bibEntryKw'.
	The one that is differently defined 'bibsearchComment'.  Which is
	changed in that way to highlight the bib file names.  One additional
	highlight group is: 'bibsearchInfo'. It highlights the number of
	entry and its line number in the bib file. By default all bibsearch
	groups are linked to the corresponding bib group, the bibsearchInfo
	group is not set.</p>
	
	<p>In a colour file (~/.Vim/color/*.Vim) you can use these groups to set
	colours.  See |highlight| or just read a colour file. For example,
	this is a nice set of colours for dark background </p>
		
<a name="atp-bibsearch-notes"></a>
<h3>Notes</h3>
    <a name="atp-bibsearch-comments"></a>
	<p>Please do not hesitate to report any bug to the 
	<a
	    href="http://sourceforge.net/mailarchive/forum.php?forum_name=atp-vim-list">mailing
	    list</a>.</p>
	
	<p>The algorithm will work only if all kind of bib entries of your bib
	file are included in the list g:bibentries. However, changing just this
	variable is not enough. In that case the search engine (function
	s:search) will produce correct output, but the function which displays
	found entries, will not know how to work with the new entries. One
	would have to add an entry to the dictionary 'g:bibflagsdict'. If it is
	the case, please let me know on the <a
	    href="http://sourceforge.net/mailarchive/forum.php?forum_name=atp-vim-list">mailing
	    list</a>.</p> 
	<p>As you can see entries of the type '@string' which can be used in
	bib files are not supported (i.e. there is no function which
	substitutes the variables defined in @string to their values), but it
	is doable.  @string{ Name = Value }</p>

<a name="atp-completion"></a>	
<h2>COMPLETION</h2>

<p>The completion is by default mapped to <Tab>. For example if you type
\math<Tab> you will get a list of choices which completes this command. (See
':h popupmenu-completion' and ':h completion' for more).</p>

<a name="atp-completion-expert-mode"></a> <a name="atp-completion-non-expert-mode"></a>
<p>There are two completion algorithm: expert mode  and non expert mode: the
keyword for completion in expert mode must match at the beginning, in non
expert mode any where. Also in expert mode the list of possible completions is
smaller (for example there is no '\lneqq', there is only '\lneq').</p>

<p>Note: Non expert mode doesn't check if you are editing math (see
<a href="#g:atp_MathOpened">g:atp_MathOpened</a>), and is useful when you want to complete a non-math
command inside mathematics.</p>

<a name="atp-Tab-note"></a>
<p>If you prefer to not map &ltTab&gt key then you can define
g:atp_no_tab_map=1 in your vimrc file or atprc file |atprc|. Note that Vim can
add/remove tabshift width from the beginning of line in other ways: in normal
mode with |&gt&gt| and |&lt&lt|, in insert mode: |i_CTRL-T|, |i_CTRL-D| and in
visual mode with |&gt| and |&lt|. Also you can use <a
    href="#atp-g>">atp-g&gt</a> and <a href="#atp-g<">atp-g&lt</a>. The
alignment of tabular and other environments can be done with <a
    href="#atp-:TexAlign">atp-:TexAlign</a> command.</p> 

<p>You can switch off/on completion modes adjusting the variable
'g:atp_completion_active_modes', all names of completion modes are stored in
the variable 'g:atp_tab_completion_modes'.</p>

<a name="g:atp_local_completion"></a>
<p>If <a href="#g:atp_local_completion">g:atp_local_completion</a> is set to
non zero value, then input files will be scanned for \def, \newcommand,
\newnevironment and \newtheorem commands and they will be used for completion
(with <a href="#atp-:LocalCommands">atp-:LocalCommands</a>). If its value is
1 then this will be done during first completion, if it is set to 2 then this
will be done at start up. The default value is 2 when vim has |+python| feature
otherwise it is 1. With |+python| this is done at every time you use the Tab
completion.</p>

<p>NOTE: if you press &ltTab&gt but then you changed your mind, the completion pop-up
menu allows to cancel completion: press ctrl+p (i.e.  go up - some times more
than once) and then press &ltspace&gt.</p>

<p>Note: Completion checks the preamble for definitions of LaTeX packages. If
a supported package is present (for example: tikz) then the completion will
contain additional commands. If you add a package or a class you should unlet
corresponding variable: <a href="#g:atp_LatexPackages">g:atp_LatexPackages</a>
and <a href="#g:atp_LatexClasses">g:atp_LatexClasses</a>.</p>

<a name="atp-:ToggleTab"></a>
<div class=command>:ToggleTab</div>
<div class=map>nmap, imap `&ltTab&gt</div>
    <p>It is a command to toggle the tab map off/on: :ToggleTab, it is also mapped
    to `&ltTab&gt.</p> 

    <p>Note: see <a href="#atp-Tab-note">atp-Tab-note</a>.</p>

<a name="atp-completion-modes"></a> <a name="atp-completion-commands"></a>
<h3>Completion Modes</h3>
<h4>commands</h4>
		<div class=indented><p>if g:atp_check_if_math_mode = 1 then the pull of commands
		contains math commands only if there you are inside a math
		environment. This works perfectly if you switch from $:$ and
		$$:$$ to their equivalent (and more up-to-date) \(:\) and \[:\].
		The list of math environment in which ATP will think you are
		editing a math mode is stored in the variable:
		'g:atp_math_modes'. Its entries are two element list of
		patterns which matches the beginning and end of a math mode.
		The '0' entry have to provide the beginning and end pattern of
		in line math '\(:\)', the second for displayed math '\[:\]'.
		Its default value is given below.</p>
	
		<p>If you add a package (like tikz or amsmath, or amssymb) then
		the set of completions will contain extra commands/environment
		names defined in these packages  Because some classes calls
		amsmath package silently setting the variable
		'g:atp_amsmath=1' will ensure that you will get completions
		for these commands. The algorithm checks if you have this
		package declared or if you use some of the standard ams
		class (actually checks if the document class name matches
		'^ams').</p> 

		<p>If you do not want math commands completions at all define
		':let g:atp_no_math_command_completion=1' (you can put it in
		your |vimrc| or <a href="#atprc">atprc </a>file, or define while writing,
		both will work, so you can switch off the math completions
		temporarily).</p>

		<p>The label command completes in a special way: for example in
		a line like:
			<div class=example>\begin{theorem}\lab&ltTab&gt</div>
		will complete to 
			<div class=example>\begin{theorem}\label{thm:</div>
		The dictionary of short names is 'g:atp_shortname_dict'. If
		you do not likes this idea (however it can help you to
		correctly write \ref{ - to avoid referring to lemmas as
		propositions, and also it makes completion for \ref{ nicer
		- you can list only labels for theorems), so if you do not
		want it anyway: 'let g:atp_no_short_names=1' will make the
		work.</p> 
		<a name="g:atp_amsmath"></a>
		<p>If <a href="#g:atp_amsmath">g:atp_amsmath=</a>1 or you use one of ams classes, or the
		package amsmath is found by ATP ams math commands and
		environment names will be added to the list of completions.</p>

		<a name="atp-variables-local_completion"></a> <a name="b:atp_LocalColors"></a> <a name="b:atp_LocalCommands"></a> <a name="b:atp_LocalEnvironments"></a>
		<p>By default the first time you are completing an environment
		name or a command a list of locally defined environments and
		commands is made (it takes a few seconds). If you do not want
		to completions for them define "let <a href="#g:atp_local_completion">g:atp_local_completion=</a>0",
		if <a href="#g:atp_local_completion">g:atp_local_completion=</a>2" then the search for local
		definitions and commands will be done on startup (after
		version 8.4 for this you have to switch off abbreviations by
		setting g:atp_noabbreviations to 1 - but anyway it is not time
		consuming because these variables are loaded from
		<a href="#atp-ProjectScript">atp-ProjectScript)</a>.</p>

		<a name="atp-:LocalCommands"></a>	
<div class=command>:LocalCommands[!]</div>
		<p>If you added a command or an environment the command
		:LocalCommands! will update the list of local definitions.
		With bang "!" it update the list of input files
		<a href="#b:ListOfFiles">b:ListOfFiles </a>in which the search is done. The output is
		stored in three variables:
				<div class=variable>b:atp_LocalColors</div>
				<div class=variable>b:atp_LocalCommands</div>
				<div class=variable>b:atp_LocalEnvironments</div>
		If a command was declared with a arguments (i.e. using #1, or
		#1#2, etc.) a single '{' is attached. It doesn't match for
		definitions inside comments.</p>

		<p>Note: the python version searches for commands, environments,
		...  defined in the begining of line (with possible white
		spaces).</p>

		<p>Note: the python version of LocalCommands will save the
		current buffer, without saving project script and with
		'nowritebackup' and 'nobackup' set.</p></div>

	    <a name="atp-tikzpicture"></a>
	    <h4>tikzpicture</h4><div class=indented>
		<p>There is an extended support for tikz picture environment both
		inline \tikz{:} and displayed: \begin{tikzpicture}
		\end{tikzpicture}. The completion works for both commands and
		keywords. The pull of them is enlarged if you add tikz
		libraries. Normal commands are added if you are inside {:}.</p></div>

	    <a name="atp-completion-ref"></a> <a name="atp-completion-label"></a> <a name="atp-completion-cite"></a>
	    <h4>ref/label/cite</h4><div class=indented>
		<p>For label completion puts short names, for ref and eqref
		commands the completions are the labels found in all files
		associated to the main file (the plugin searches the input
		and include files for them). The same for cite: which searches
		also in bib files defined in the main file.</p>

		<p>In the popup menu the first column show the label name, second
		column contains the first letter of the counter name used:
		e for equation, t for theorem, s for section, c for chapter,
		I for Item, etc. - these are the most common things you will
		see. The third column contains the value of the counter. It is
		put in brackets () if it comes from equation counter.</p>

		<p>There is also omni completion (CTRL-X CTRL-O, see
		|i_CTRL-X_CTRL-O|) for \cite command. Check it out, as it is
		very nice (especially in gvim!) and very fast.</p> 

		<p>For both completion and omni completion for the cite command,
		the text after \cite{  [ or after a comma after \cite{ ] is
		treated as a regular expression. Thus you can write:
		<div class=example>\cite{.*author1\&.*author2&ltTab&gt</div>
		to get the completions for things written by both author 1 and
		2 (regardless of the order they appear in bib files).</p>

		<p>BibTeX omni completion is triggered by '\cite{', '\citep{' or
		'\citet{'.  For example, assume you have in your .bib files an
		entry looking like:</p>
<pre>
		@book {	knuth1981,
				author = "Donald E. Knuth",
				title = "Seminumerical Algorithms",
				publisher = "Addison-Wesley",
				year = "1981" }
</pre>
		<p>Then, try:
			<div class=example>\cite{Knuth 1981&ltCTRL-X&gt&ltCTRL-O&gt</div>
			<div class=example>\cite{algo&ltCTRL-X&gt&ltCTRL-O&gt</div>
		\ref{{pattern}<Tab> matches the label name for the {pattern}.
		When pattern is matched for a number of a label '^' is added in
		front of the pattern (see below). In this case both completion modes:
		expert and non-expert works in the same way.</p>

		<p>You can also use Vim patterns after '\cite{'.</p>

		<p>Tab Completion for labels (|atp-completion|) allows to specify
		the number of the counter, e.g.
			<div class=example>\ref{3.1&ltTab&gt</div>
		will complete into the label of the counter with value '3.1'.
		As for now you can not specify which counter to complete. You
		can also write '\ref{3.1$' then '^3.1$' is used as a pattern!</p>

		<p>For this two work the aux file must be present.  As for now
		the aux file, if it is not present, is not made.</p>

		<p>This is working with the main document classes: article, book,
		review, amsart, amsbook, memoir. If for some class it is not
		working thanks for reporting me (it's enough to email me just
		the document class).</p></div>

	    <a name="atp-completion-brackets"></a>
	    <h4>brackets</h4><div class=indented>
		<p>Closing of brackets {:},{:},[:],(:) (also closes math modes \(:\) and
		\[:\]). 
		Relevant variables are: g:atp_bracket_dict a dictionary of
		brackets by default it consists of pairs '(' : ')', '{' : '}',
		'[' : ']'. There is a second dictionary g:atp_sizes_of_brackets
		which contains all the sizes of brackets in latex plus a pair
		'\' : '\', for closing the math modes: \(:\), \[:\] and the
		brackets \{:\}.</p></div>
		<a name="atp-closing-environments"></a> <a name="atp-completion-env"></a>
	    <h4>environments</h4><div class=indented>
		<p>Completes after '\begin{' and '\end{'. For example
		'\begin{cen<Tab>' will give '\begin{center}' 
		But '\begin{theorem}<Tab>' or
		'\begin{theorem}\label{thm:1}<Tab> will close the environment.
		The algorithm tries to close environment in many natural
		situations: for example when it did found less than one command
		completion. It closes the right environment when they are
		nested (however not in right place!) and it preserves the
		indention. When after \begin{center}\label{...} XXX there is
		something (in place of XXX) it will close the environment
		after the cursor position otherwise in next line
		(\hypertarget{...}{...} command is treated like \lebl{...}).</p>

		<p>The environments opened in tex definitions ('\def',
		'\newcommand', '\renewcommand') will not be closed unless the
		current cursor position is in that line (sometimes one might
		want to have a definition which only opens an environment).</p>

		<p>If you type \begin{envname}<Tab> the cursor position will not
		change. You can use |i_CTRL-M| (|i_CTRL-J| is used by
		|atp-j_motion|) after <Tab> to open new line inside {envname}.
		Otherwise the cursor position will be right after the closing
		\end{envname}.</p>

		<p>See <a href="#g:atp_amsmath">g:atp_amsmath.</a></p></div>

	    <h5>Examples:</h5><div class=indented>
			<p>(the &ltTab&gt indicates in which position the
			&ltTab&gt can be pressed to get the described
			behaviour).
			<pre>
			    \begin{theorem}
				    \begin{enumerate}
				    \item .....
				    \item .....
					\begin{minipage} 	
					    ......
					\end{minipage}
					    ......
					    ......&ltTab&gt
					    XXXXXX
					    ......
			    \end{theorem}
			</pre>
			Usually the closing comes in the next line,
			unless we are inside an environment which is opened
			after the non closed environment: 
			<pre>
			    \begin{theorem}
				    \begin{enumerate}
				    \item .....
				    \item .....
					\begin{minipage}&ltTab&gt 	
					    ......&ltTab&gt
					\end{minipage}&ltTab&gt
					    XXXXXX
					    ......
					    ......
					    ......
			    \end{theorem}
			</pre>
			Then the closing will be put just after the last
			opened environment closes, or
			<pre>
			    \begin{theorem}
				    \begin{enumerate}
				    \item .....
				    \item .....
					\begin{minipage}
					    ......
					\end{minipage}
					    ......
					    ......
					    ......
					    XXXXXX
			    \end{theorem}&ltTab&gt
			    ....&ltTab&gt
			</pre>
			If we are outside the theorem environment,
			'\end{enumerate}' will be placed just above
			'\end{theorem}', and 	
			<pre>
			    \begin{theorem}[Joyal\&Tirney]\label{thm:jt}
				    \begin{enumerate}
				    \item .....
				    \item .....
					\begin{minipage} 	
					    ......
					    ......
					    XXXXXX
				    \end{enumerate}&ltTab&gt
			    \end{theorem}&ltTab&gt
			</pre>
			will put \end{minipage} just above
			\begin{enumerate}. Furthermore, if:
			<pre>
			    \begin{theorem}
				    \begin{enumerate}\label{enu:1}
				    \item .....
				    \item .....
					\begin{minipage} 	
					    ......
					    \begin{itemize}
						    ......
					    \end{itemize}
					    ......
					    ......
					    XXXXXX
				    \end{enumerate}&ltTab&gt
			    \end{theorem}&ltTab&gt
			</pre>
			'\end{minipage}' will be put just above
			'\end{enumerate}'.  Furthermore,
			<pre>
			\begin{theorem}[...]\label{...} Let \(C\) be a ....
			......
			......&ltTab&gt XXXXX
			</pre>
		That is, if you like to write \begin{}:\end{} in the beginning
		and end of a line this will be preserved. However, there is no
		support for nested environments then!</p></div>

	    <a name="atp-completion-abbreviations"></a>
	    <h4>abbreviations</h4><div class=indented>
		<p>There is tab completion for insert mode abbreviation names
		(use &ltctrl-y&gt to choose one from the list and then type
		&ltspace&gt, just typing &ltspace&gt should also work).</p></div>

	    <a name="atp-completion-fontdeclaration"></a>
	    <h4>font declarations</h4><div class=indented>
		<p>This is completion for the commands 
		<pre>
		    \usefont{&ltencoding&gt}{&ltfont_familly&gt}{&ltfont_series&gt}{&ltfont_shape&gt},
		    \fontencoding{&ltencoding&gt},
		    \fontfamily{&ltfont_family&gt},
		    \fontseries{&ltfont_series&gt},
		    \fontshape{&ltfont_shape&gt},
		    \DeclareFixedFont{&ltcmd&gt}{&ltencoding&gt}{&ltfont_familly&gt}{&ltfont_series&gt}{&ltfont_shape&gt}{&ltsize&gt}
		</pre>
		It first splits the line and take a part between the commands
		\selectfont (if there is not \selectfont command this step is
		omitted).</p>

		<p>Then if the &ltencoding&gt is declared the font families for the
		completion will only come from this &ltencoding&gt.</p>

		<p>If &ltfont_family&gt is defined, &ltfont_series&gt and &ltfont_shape&gt
		come from the particular font definition file (the declared
		encoding is used if not the value of
		<a href="#g:atp_font_encoding">g:atp_font_encoding </a>is used).</p>

		<p>If &ltfont_family&gt and &ltfont_series&gt are defined then the
		&ltfont_shape&gt for this font (in the above encoding) is found.</p></div>
		
		<a name="atp-completion-bibstyle"></a>
		<h4>bibstyle</h4><div class=indented>
		<p>Completion for the command '\bibliographystyle{'. Finds all
		"bst" files available in your tex distribution. </p></div>

		<a name="atp-completion-documentclass"></a>
		<h4>documentclass</h4><div class=indented>
		<p>Completion for the command '\documentclass'. Returns list of
		all classes available in your distribution.</p></div>

<a name="atp-completion-variables"></a>
<h3>ATP Completion Variables</h3>

<p>These are all variables which can help to customise the completion:
(if the value is given it is the default, if it is not means it is too long to
put it here).</p>
<a name="g:atp_completion_limits"></a>
<div class=variable>g:atp_completion_limits		= [ '40', '60', '80',
    '100' ]</div>
<p>The above variable specifies how long should atp plugin search for
closed/unclosed environments:
<pre>
	    the first value 	- search for \(:\)  [ in line math ]
	    the second	 	- search for \[:\]  [ displayed math ]
	    the third	 	- search for \begin{<env>:\end{<env>	
	    the fourth	 	- for environments defined in the variable
</pre></p>
<div class=variable>g:atp_long_environments</div>
<p>You can also put "-1" as the values of g:atp_completion_limits, then the
search forward/backward will last till first/last line. However, this makes it
run slower.</p>
<a name="g:atp_long_environments"></a>
    <div class=variable>g:atp_long_environments 	= []</div>
<p>If some of your environments are very long put their names in this list. Do
not forget that is environment &ltenv&gt is long and is put inside environment
&ltcenter&gt then &ltcenter&gt is also long!</p>
				 
<p>However, this will not close long environments (for that you have to change
the third argument of g:atp_completion_limits !). This just prevents closing
environments which are closed and to long to see that.</p>
<pre><div class=variable>g:atp_completion_modes = [
		    \ 'commands', 		'inline_math', 
		    \ 'displayed_math', 	'package_names', 
		    \ 'tikz_libraries', 	'environment_names', 
		    \ 'close_environments' ,'labels', 
		    \ 'bibitems', 		'input_files',
		    \ 'bibfiles',		'bibstyles',
		    \ 'documentclass' ] </div></pre>
<p>This is the list of completion modes.</p>
<a name="g:atp_completion_active_modes"></a>
<div class=variable>g:atp_completion_active_modes	= g:atp_completion_modes</div>
<p>This is the list of completion modes which are active, by default all modes
are active. Remove a value from this list to make it inactive (You can use
remove() command, see ':h remove()').</p> 
<div class=variable>g:atp_sort_completion_list	= 12</div>
<p>If the length of completion list for Tab Completion is longer than this
value, entries will be sorted alphabetically, else they are provided in,
I hope, useful order. If set to 0 the list will not be sorted (if set to 1 it
will be always sorted).</p>
<div class=variable>g:atp_environments</div>
<div class=variable>g:atp_amsmath_environments</div>
<div class=variable>g:atp_shortname_dict</div>
<p>It is used to define <short_name> in \label{<short_name><separator> when
completing the \label command.</p>
<a name="g:atp_separator"></a>
<div class=variable>g:atp_separator			= ':'</div>
<p>It is used as a separator in: \label{<short_name><separator> when completing the \label command.</p>
<a name="g:atp_no_separator"></a> <a name="g:atp_env_short_names"></a> <a name="g:atp_no_serparator_list"></a>
<div class=variable>g:atp_no_separator 		= 0</div>
<div class=variable>g:atp_no_separator_list		= ['', 'titlepage']</div>
<p>The following variabe if set to one then completion for \label command will
put short name of the environment where it stand. It uses the dictionary
g:atp_shortname_dict to get the short name.</p>
<div class=variable>g:atp_env_short_names 		= 1</div>
<a name="g:atp_commands"></a> <a name="g:atp_math_commands"></a> <a name="g:atp_ams_negations"></a> <a name="g:atp_math_commands_non_expert_mode"></a> <a name="g:atp_ams_negations_non_exprt_mode"></a>
<p>These variables are lists which stores LaTeX commands used in
completion.</p>
<div class=variable>g:atp_commands</div>
<div class=variable>g:atp_math_commands</div>
<div class=variable>g:atp_ams_negations</div>
<div class=variable>g:atp_math_commands_non_expert_mode</div>
<div class=variable>g:atp_ams_negations_non_expert_mode</div>
<p>The two last are lists of commands will be add only in the non expert mode
(<a href="#atp-completion-non-expert-mode">atp-completion-non-expert-mode</a>).</p>
<div class=variable>g:atp_amsmath_commands</div>
<div class=variable>g:atp_fancyhdr_commands</div>
<div class=variable>g:atp_tikz_environments</div>
<div class=variable>g:atp_tikz_libraries</div>
<div class=variable>g:atp_tikz_commands</div>
<div class=variable>g:atp_completion_truncate	= 4</div>
<p>do not complete commands less than 4 characters (not counting the leading
'\' if present). If 0 then complete all the defined commands. This only works
in the expert mode.</p>

<a name="g:atp_MathOpened"></a>
<div class=variable>g:atp_MathOpened		= 1</div>
the default value is 1. With the default value expert mode completion will
check if you are completing inside mathematical environment or not. Inside
math environment only math commands are completed and outside math commands
are disabled. This makes the set of completions more accurate. If you need non
math command (like \textrm{}) inside math use non expert mode (see <a
    href="#atp-completion-non-expert-mode">atp-completion-non-expert-mode</a>)</p>

<a name="g:atp_MathZones"></a>
<pre>
	<div class=variable>let g:atp_MathZones	= [
	    		\ 'texMathZoneV', 	'texMathZoneW', 
	    		\ 'texMathZoneX', 	'texMathZoneY',
	    		\ 'texMathZoneA', 	'texMathZoneAS',
	    		\ 'texMathZoneB', 	'texMathZoneBS',
	    		\ 'texMathZoneC', 	'texMathZoneCS',
	    		\ 'texMathZoneD', 	'texMathZoneDS',
	    		\ 'texMathZoneE', 	'texMathZoneES',
	    		\ 'texMathZoneF', 	'texMathZoneFS',
	    		\ 'texMathZoneG', 	'texMathZoneGS',
	    		\ 'texMathZoneH', 	'texMathZoneHS',
	    		\ 'texMathZoneI', 	'texMathZoneIS',
	    		\ 'texMathZoneJ', 	'texMathZoneJS',
	    		\ 'texMathZoneK', 	'texMathZoneKS',
	    		\ 'texMathZoneL', 	'texMathZoneLS',
			\ 'texMathZoneT' ]
</div></pre>
<p>the default value in plaintex files is </p>
<div class=variable>g:atp_MathZones	= [ 'plaintexMath' ]</div> 
<p>These are zones recognized by tab completion as mathematical ones (see <a
    href="#g:atp_MathOpened">g:atp_MathOpened</a>).</p>

<div class=variable>g:atp_no_tab_map</div>
<div class=variable>g:atp_no_complete		= ['document']</div>
<p>List of environments which is not closed by &lttab&gt completion. (The
document environment in longer documents can be not seen by the algorithm as
closed, because it searches only in a part of the text, see <a
    href="#g:atp_completion_limits">g:atp_completion_limits</a> variable
above).</p>
<div class=variable>g:atp_bracket_dict  	= { '(' : ')', '{' : '}', '[' : '] }</div>
<pre><div class=variable>g:atp_sizes_of_brackets = {
			\ '\left'	: '\right', 		'\bigl'	: '\bigr', 
			\ '\Bigl' 	: '\Bigr', 		'\biggl': '\biggr' , 
			\ '\Biggl' 	: '\Biggr', 		'\' 	: '\' }
</div></pre>
<a name="g:atp_LatexPackages"></a> <a name="g:atp_LatexClasses"></a>
<p>The variables: </p>
<div class=variable>g:atp_LatexPackages</div>
<div class=variable>g:atp_LatexClasses</div>
<p>stores list of packages and classes in your tex distribution. They are
restored when you exit Vim from the global project script (see <a
    href="#atp-ProjectScript_global">atp-ProjectScript_global</a>).  They are
used for completion of the LaTeX commands \usepackage and \documentclass.</p>

<p>If you reinstall, add or remove tex classes/packages from your tex
distribution it is enough to unlet these variables. ATP will find new values
when it will need them for the first time.</p> 

<a name="atp-omnicompletion"></a>
<h2>OMNI COMPLETION</h2>
<p>by David Munger (LatexBox plugin)</p>

<p>Completion is achieved through omni completion |compl-omni|, with default
bindings &ltCTRL-X&gt&ltCTRL-O&gt. There are four types of completion:</p>



<a name="atp-omnicompletion-commands"></a>
<h3>Commands</h3>

<p>Command completion is triggered by the '\' character.  For example,</p>
<div class=example>\beg&ltCTRL-X&gt&ltCTRL-O&gt</div>
completes to
<div class=example>\begin{</div></p>

<p>Associated settings:<br>
<a href="#atp-g:LatexBox_completion_commands">atp-g:LatexBox_completion_commands</a><br>
<a href="#atp-g:LatexBox_completion_close_braces">atp-g:LatexBox_completion_close_braces</a>


<a name="atp-omnicompletion-environments"></a>
<h3>Environments</h3>

<p>Environment completion is triggered by '\begin{'.  For example, >
<div class=example>\begin{it&ltCTRL-X&gt&ltCTRL-O&lt</div>
completes to
<div class=example>\begin{itemize}</div></p>

<p>Completion of '\end{' automatically closes the last open environment.</p>

<p>Associated settings:<br>
<a href="#atp-g:LatexBox_completion_environments">atp-g:LatexBox_completion_environments</a><br>
<a href="#atp-g:LatexBox_completion_close_braces">atp-g:LatexBox_completion_close_braces</a></p>


<a name="atp-omnicompletion-labels"></a>
<h3>Labels</h3>

<p>Label completion is triggered by '\ref{' or '\eqref{'.  For example, >
	<div class=example>\ref{sec:&ltCTRL-X&gt&ltCTRL-O&gt</div>
offers a list of all matching labels, with their associated value and page number.
Labels are read from the aux file, so label completion works only after
compilation.</p>

<p>It matches:<br>
	1. Labels:
		<div class=example>\ref{sec:&ltCTRL-X&gt&ltCTRL-O&gt</div>
	2. Numbers: 
		<div class=example>\eqref{2&ltCTRL-X&gt&ltCTRL-O&gt</div>
	3. Labels and numbers together (separated by whitespace): >
		<div class=example>\eqref{eq 2&ltCTRL-X&gt&ltCTRL-O&gt</div>
	

<p>Associated settings:<br>
<a href="#atp-g:LatexBox_ref_pattern">atp-g:LatexBox_ref_pattern</a><br>
<a href="#atp-g:LatexBox_completion_close_braces">atp-g:LatexBox_completion_close_braces</a>



<a name="atp-omnicompletion-bibtex"></a>
<h3>BibTeX Entries</h3>

<p>BibTeX completion is triggered by '\cite{', '\citep{' or '\citet{'.
For example, assume you have in your .bib files an entry looking like:
<pre>
	@book {	knuth1981,
		author = "Donald E. Knuth",
		title = "Seminumerical Algorithms",
		publisher = "Addison-Wesley",
		year = "1981" }
</pre>
Then, try:
<div class=example>\cite{Knuth 1981&ltCTRL-X&gt&ltCTRL-O&gt</div>
<div class=example>\cite{algo&ltCTRL-X&gt&ltCTRL-O&gt</div></p>

<p>You can also use regular expressions (or Vim patterns) after '\cite{'.</p>

<p>Associated settings:</p>
<a name="atp-g:LatexBox_cite_pattern"></a>		
<div class=variable>let g:LatexBox_cite_pattern = '\\cite\(p\|t\)\?\*\?\_\s*{'</div>
<a name="atp-g:LatexBox_ref_pattern"></a>		
<div class=variable>let g:LatexBox_ref_pattern = '\\v\?\(eq\|page\)\?ref\*\?\_\s*{'</div>

	<p>Patterns to match \cite and \ref commands for BibTeX and label completion.
	Must include the trailing '{'.
	To match all commands that contain 'cite' (case insensitive), use:
		<div class=variable>let g:LatexBox_cite_pattern = '\c\\\a*cite\a*\*\?\_\s*{'</div>
	To match all commands that end with 'ref' (case insensitive):
		<div class=variable>let g:LatexBox_ref_pattern = '\c\\\a*ref\*\?\_\s*{'</div>
	Both examples match commands with a trailing star too.</p>

<a name="atp-g:LatexBox_bibtex_wild_spaces"></a>
<div class=variable>let g:LatexBox_bibtex_wild_spaces = 1</div>

	<p>If nonzero, spaces act as wildcards ('.*') in completion.
	For example, if nonzero, >
		<div class=example>\cite{Knuth 1981</div>
	is equivalent to >
		<div class=example>\cite{Knuth.*1981</div></p>

<a name="atp-g:LatexBox_completion_close_braces"></a>
<div class=variable>let g:LatexBox_completion_close_braces = 1</div>

	<p>If nonzero, omni completion will add closing brackets where relevant.
	For example, if nonzero,
		<div class=example>\begin{itemize</div>
	completes to 
	<div class=example>\begin{itemize}</div>
<br>
<a name="atp-g:LatexBox_completion_environments"></a>
<a name="atp-g:LatexBox_completion_commands"></a>
<div class=variable>g:LatexBox_completion_environments</div>
<div class=variable>g:LatexBox_completion_commands</div>

<p>Static completion lists for environments <a
    href="#atp-omnicompletion-environments">atp-omnicompletion-environments </a>and commands <a
href="#atp-omnicompletion-commands">atp-omnicompletion-commands.</a></p>

<a name="atp-configure"></a> <a name="atp-variables"></a>
<h2>HOW TO CONFIGURE ATP TO YOUR NEEDS</h2>
<a name="atp-ProjectFiles"></a> <a name="b:atp_MainFile"></a>
<p>There are several options you can set, and they might be set in your Vimrc
file. The default values are given below (except the completion setup and
bibtex documented above). Note: not all variables are listed below.</p>

<p>All the values of important variables with their values can be shown
(grepped) by <a href="atp-commands.html#atp-:ShowOptions">atp-:ShowOptions</a> command.</p>

<a name="atprc"></a>
<p>$HOME/.atprc.vim (only on Unix and GNU/Linux) or<br> 
$VIMRUNTIME/ftplugin/ATP_files/atprc.vim					
<div class=indented>A configuration file for ATP. You do not have to use autocommands to set
local-buffer variables, just place them here. The settings in <a
    href="#atprc">atprc</a> file override the values in the project script (<a
    href="atp-ProjectFiles.html#atp-ProjectScript">atp-ProjectScript</a>). You can also overwrite
the plugin maps there it you want to have different behaviour on the key map
used by ATP.</div></p>

<p>Tip: If you want to see (almost) all the variables, type ':let g:atp_&ltCTRL_D&gt',
and ':let b:atp_&ltCTRL_D&gt'.</p>

<p>All buffer variables (see |b:var|), i.e. these which name begins with "b:",
should be set in your |vimrc| or <a href="#atprc">atprc</a> file. If you want to use your vimrc file
then the best way to do that is by using an autocommand:</p>
<div class=aucommand>au BufReadPre *.tex let b:atp_TexCompiler="latex"</div>
If you put just let |b:atp_TexCompiler|, this will also work but not always: for
example when you open a new buffer in existing Vim session. However, if you
put them in your <a href="#atprc">atprc</a> it is enough to use the standard "let b:...=".</p>
<a name="b:atp_TexCompiler"></a>
<p><div class=variable>let b:atp_TexCompiler	= "pdflatex"</div>
	<div class=indented>Used by functions: TEX() (map \l, imap \l), VTEX() (map &ltF5&gt, imap &ltF5&gt)

	<p>You can set it to latex, tex, luatex, and so on and possibly to
	lilypond as well. </p> 

	<p>There is a command to set this variable with nice completion, see
	<a href="atp-commands.html#atp-:Compiler">atp-:Compiler.</a></p></div></p> 

<a name="b:atp_TexCompilerVariable"></a>
<p><div class=variable>let b:atp_TexCompilerVariable = "max_print_line=2000"</div> 		
<div class=indented>You can use it to set an environment variables for the compiler. The
"max_print_line" sets the maximal length of a line in the log file.  The value
2000 is high enough to prevent line breaking.

<p>Note: the gramar for this variable: it should be a semicolon separated list
of variables and values, i.e. 'variable_1=value_1;variable_2=value_2'</p>
<a name="b:atp_BibCompiler"></a>
<div class=variable>let b:atp_BibCompiler	= "bibtex"</div>
<p>This variable sets the bibtex backend. There are other programs which might
be used, for example biber and pybib (not tested with ATP).</p>
	
<p>The default value will be "biber" if the preamule contains
\usepackge[backend=biber]{biblatex}. If it is set to "biber" ATP will adjust
<a href="#g:atp_keep">g:atp_keep</a> variable (add run.xml, bcf extensions)
when you use <a href="atp-commands.html#atp-:TEX">atp-:TEX,</a> <a
    href="atp-commands.html#atp-:Bibtex">atp-:Bibtex,</a> or <a
    href="atp-commands.html#atp-:MakeLatex">atp-:MakeLatex</a> commands.</p></div></p>


<a name="b:atp_TexFlavor"></a>
<p><div class=variable>let b:atp_TexFlavor	= "tex"</div>	
<div class=indented>If you are editing a plain tex file it is automatically set to 'plaintex',
then you get highlighting for $$:$$. Some other features are planned (you can
also set this while editing a 'tex' file, i.e.  latex document but using $$:$$
is latex is not recommended it is know to break some latex specific
things).</div></p>

<a name="b:atp_TexOptions"></a>
<p><div class=variable>let b:atp_TexOptions	= "-synctex=1"</div>
<div class=indented>This is a comma ',' sepparated list of TeX compiler options. If you want to
set some additional options to your tex compiler you can use this variable,
note that '-output-directory' and '-interaction' are set by ATP. </div></p>

<a name="b:atp_OutDir"></a>
<p><div class=variable>let b:atp_OutDir	= fnameescape(fnamemodify(resolve(b:atp_MainFile,":h")) . "/"</div>
	<div class=indented>This is the directory in which tex will put the output files. If the
	open file is not a symbolic link it is equal to the directory in which
	the tex file is located. If the open file is a symbolic link it points
	to the directory in which the real file is located.
	
	<p>If you set this variable to './' (or '.') and change the current
	working directory for example to /tmp (:cd /tmp) then the latex output
	will be placed in /tmp, i.e. it will move with with cd. However, the
	default value of b:atp_OutDir is not affected by :cd command.</p>

	<p>White spaces and other characters should not be escaped. It will be
	quoted in '...' using the |shellescape()| function.</p>

	<p>You can see the current output directory in the status (it is in the
	short notation) to see it whole type:
	<div class=example>:echo b:atp_OutDir</div>
	or use the <a
	    href="atp-commands.html#atp-:ShowOptions">apt-:ShowOptions</a>
	command.</p>

	<p>If in your environment the variable $TEXMFOUTDIR is set the value of
	b:atp_OutDir will be set to its value.</p>

	<p>See <a
	    href="atp-ProjectFiles#b:atp_MainFile">b:atp_MainFile</a>.</p></div></p>

<a name="b:atp_auruns"></a>
<p><div class=variable>let b:atp_auruns	= 1</div>
	<div class=indented>This variable control how many times the automatic function calls tex
	compiler (consecutively). It is useful if you are working with PDF
	files and you want to have bookmarks (you can get them using hyperref
	package with the option: bookmarks. Then set b:atp_auruns to '2'.</div></p>

<a name="b:atp_running"></a>
<p><div class=variable>b:atp_running</div>
	<div class=indented>This variable stores the current number of running instances of latex.
	When it is greater than 1 a message in the status line is shown. If :PID
	command returns that no latex is running this variable this variable
	is reset to 0. </div></p>

<a name="g:atp_MathVimOptions"></a>
<p><div class=variable>g:atp_MathVimOptions	= { 'textwidth' : '0' }</div>
	<div class=indented>This variable is a dictionary of Vim settings and its values which
	will be valid when you edit mathematics inside the pairs \(:\), $:$,
	\[:\], $$:$$ (only in plain tex files or if g:atp_TexFlavour
	= 'plaintex').  For example, the default value will toggle between
	your 'textwidth' in non-math and 0 in math.  The dictionary may
	contain short option names equally well as long names.

	<p>Note: the standard tex syntax file defines other zones: for example
	for align and equation environments (and many others) but some how
	they are not accessible using synstack() function. </p></div></p>
			
<p>This feature can be turned off setting variable:
<div class=variable>g:atp_SetMathVimOptions</div>
	<div class=indented>to '0', the default is '1'.</div></p>

<a name="g:atp_autex_check_if_closed"></a>
<p><div class=variable>let g:atp_autex_check_if_closed = 1</div> 
	<div class=indented>This feature is not implemented.
	tex run if all environments \begin:\end, \(:\) and \[:\] are closed.
	Set g:atp_autex_check_if_closed=0 in order to not make the checks.</div></p>

<a name="g:texmf"></a>
<p><div class=variable>let g:texmf	= $HOME/texmf</div>
	<div class=indented>This variable configures where input files are placed. See
	<a href="atp-commands.html#atp-:EditInputFile">atp-:EditInputFile</a>.</div></p>

<a name="g:askforoutdir"></a>
<p><div class=variable>let g:askforoutdir	= 0</div>
	<div class=indented>Its values are 1 and 0.  When it is set to 1 you will be asked for the
	name of a directory where tex will put output files, note that this
	name should end with a "/".</div></p>

<a name="b:atp_Viewer"></a>
<p><div class=variable>let b:atp_Viewer	= "okular"</div>
	<div class=indented>it was tested with Xpdf, Evince, ePdfViewer, Kpdf, Okular, Xdvi and
	they all works fine. I'm using Xpdf and the Xpdf server options are
	supported so that the file is automatically reloaded (other viewers,
	except epdfview, have this functionality as well. This do not works
	for acroread. Read more about viewers in <a
	    href="#atp-viewers">atp-viewers</a>. 

	<p>If you use program b:atp_Viewer then you can use the variable
	b:atp_{b:atp_Viewer}Options to set the options (it is a vim list), for
	example if b:atp_Viewer="xpdf" then you might use:</p></div></p>

<a name="atp-Viewers_Options"></a> <a name="b:atp_xdviOptions"></a> <a name="b:atp_xpdfOptions"></a> <a name="b:atp_okularOptions"></a> <a name="b:atp_evinceOptions"></a>
<p><div class=variable><a href="#b:atp_xpdfOptions">b:atp_xpdfOptions</a></div>
<div class=variable><a href="#b:atp_xdviOptions">b:atp_xdviOptions</a></div>
<div class=variable><a href="#b:atp_okularOptions">b:atp_okularOptions</a></div>
<div class=variable><a href="#b:atp_evinceOptions">b:atp_evinceOptions</a></div>
<div class=indented>, etc ... (also global variables g:atp_...Options)
	Used by function: ViewOutput() (map \v, map &ltF3&gt, imap &ltF3&gt)

	<p>These are lists in which every viewer switch and its value should be
	placed as element (seprate!). See examples below. </p>

	<p>For example, if you want to have different look of one document you can
	set it to "-bg gray20". Some examples:
 	<div class=variable>let b:atp_xpdfOptions	= ['-bg', 'Grey30', '-mattecolor', 'SlateBlue2', '-papercolor', 'White']</div>
	<div class=variable>let g:atp_xpdfOptions	= ['-bg', 'NavajoWhite4', '-fg', 'black', '-mattecolor', 'burlywood']</div>
	<div class=variable>let b:atp_xdviOptions	= ['-expertmode', '0', '-s', '6']</div>
	</p></div>
	
<a name="g:atp_XpdfServer"></a> 
<p><div class=variable>let b:atp_XpdfServer=fnamemodify(expand("%"),":t")	</div>	
	<div class=indented>Used by function: ViewOutput() (map \v, map &ltF3&gt, imap &ltF3&gt)

	<p>It is equal to the name of the source file. You do not need escape
	spaces in the name (shellescape() function is used before it is send
	to the shell).</p></div></p>

<a name="b:atp_OpenViewer"></a>	
<p><div class=variable>let b:atp_OpenViewer	= 1</div>
	<div class=indented>If the function which calls TeX compiler do not see that you are
	viewing the output file it will open it for you if b:atp_OpenViewer=1.
	Otherwise, this feature is disabled.</div></p>

<p><div class=variable>let g:atp_delete_output	= 0</div>
	<div class=indented>If set to 1 then Delete function (map <F6>d) will delete also the
	output file.</div></p>	

<a name="g:atp_cpcmd"></a>
<p><div class=variable>let g:atp_cpcmd		= "/bin/cp"</div>
 	<div class=indented>This sets the copy command used by compiler. The value tries to not use
	shell internal function and to avoid the -i switch (ask if overwrite).</div></p> 

<a name="g:atp_tex_extensions"></a>	
<p><div class=variable> let g:atp_tex_extensions=["aux", "log", "bbl", "blg", "bcf", "run.xml", "spl", "snm", "nav", "thm", "brf", "out", "toc", "mpx", "idx", "maf", "blg", "glo", "mtc[0-9]", "mtc1[0-9]", "pdfsync" , "ind"]</div>	
	<div class=indented>This list is used by the <a href="atp-commands.html#atp-:Delete">atp-:Delete</a> command which deletes all the
	 files with the specified extension in the directory <a
	     href="#b:atp_OutDir">b:atp_OutDir</a>.</div></p>

<a name="g:atp_keep"></a>			
<p><div class=variable> let g:atp_keep	= [ "log", "aux", "toc", "bbl", "ind", "idx", "synctex.gz", "blg", "loa", "toc", "lot", "lof", "thm", "out" ]</div>
	<div class=indented>Files with an extension belonging to this list will be copied from
	'b:atp_OutDir' to the temporary directory with appropriate name. Then it
	will be used by (La)TeX. (log file will be copied after it is created,
	other files will be copied back and forth between 'b:atp_OutDir' and the
	temporary directory). These four elements: log,aux,toc,bbl are
	essentially minimum to work with: table of contents, pdf-bookmarks and
	bibtex. There are possibly other classes, like beamer, or packages
	like theorem (produce .thm files) which will need to configure this
	variable.

	<p>If you use "biber" ATP will add "run.xml" and "bcf".</p>

	<p>You can change this variable by the command:
	<div class=variable>	:let g:atp_keep+=["spl"]</div></p>
	</div></p>

<a name="g:printeroptions"></a>		
<p><div class=variable> let g:printeroptions	= ""</div>
	<div class=indented>You can set the printer options. These are options for the 'lpr'
	command, which will print the output file (pdf or dvi) this depends on
	the b:atp_TexCompiler that you use.</div></p>

<a name="g:atp_TexCommand"></a>
<p><div class=variable>g:atp_TexCommand</div>
	<div class=indented>This variable is for debugging purposes. It stores the last executed command to
	compile your document. It changes also when your compiler was run
	automatically.
		<div class=command>:TEX</div>
		<div class=command>:echo g:atp_TexCommand</div>
		<div class=command>:TEX!</div>
		<div class=command>:echo g:atp_TexCommand</div>
	It is read-only variable.</div></p>

<a name="b:atp_TempDir"></a>
<p><div class=variable>b:atp_TempDir = b:atp_OutDir/.tmp</div>
	<div class=indented>In this directory vim (or python) will make a temporary directory
	(with a unique name) to which output files will be put by your TeX
	compiler. This is done so to prevent overwriting the output file while
	the compelation is being done (this can cause problems when there are
	many TeX processes and the Viewer is accessing not yet compilated
	file). The output files are copied back to b:atp_OutDir after
	compelation. The tmporary directory is passed to your TeX compiler
	using '-output-directory' switch. </div></p> 

<a name="g:atp_TempDir"></a>
<p><div class=variable>g:atp_TempDir</div>
	<div class=indented>In this direcory the logs of ATP are stored. If vim has python support
	is created by python in most secure way available (readable only by
	the user) if not it is made using mkdir() vim function with 0700
	permissions.</div></p>

<a name="g:atp_CompilersDict"></a>
<p><pre><div class=variable>let g:atp_CompilersDict 	= { 
		\ "pdflatex": ".pdf", 		"pdftex" 	: ".pdf", 
		\ "xetex" 	: ".pdf", 	"latex" 	: ".dvi", 
		\ "tex" 	: ".dvi",	"elatex"	: ".dvi",
		\ "etex"	: ".dvi", 	"luatex"	: ".pdf"}
</div></pre>
	<div class=indented>This variable is used to associate an extension to the compiler that
	is used.</div></p>

<p><div class=variable>g:defaultbibflags</div>		
<div class=indented>see <a href="atp-bibsearch.html#atp-bibflags:default">atp-bibflags:default</a></div>
<div class=variable>g:defaultallbibflags</div>		
<div class=indented>see <a href="atp-bibsearch.html#atp-bibflags:all">atp-bibflags:all</a></div>
<div class=variable>b:atp_LastBibFlags</div>		
<div class=indented>see <a href="atp-bibsearch.html#atp-bibflags:last">atp-bibflags:last</a></div>

<div class=variable>b:bibfiles</div>				
<div class=indented>see <a href="atp-bibsearch.html#atp-variables-bib">atp-variables-bib</a></div>
<div class=variable>s:bibfiles</div>
<div class=variable>s:allbibfiles</div>
<div class=variable>s:notreadablebibfiles</div>
    <div class=indented>For more on bib flags see <a href="atp-bibsearch.html#atp-bibflags">atp-bibflags</a>.</div></p>

<p><div class=variable>let t:toc_window_width=g:atp_toc_window_width</div>
	<div class=indented>t:toc_window with is set to g:atp_toc_window_width (by default is 30)
	The globale variable configures the initial width of the window with
	table of contents.</div></p>

<p><div class=variable>let t:labels_window_width=30</div>
	<div class=indented>g:labels_window_width (by default not set, if set overrides
	t:labels_window_width)
	Configures the initial width of the window with labels.</div></p>

<p><div class=variable>g:atp_statusline</div>
	<div class=indented>by default it is not set, put the line</p>
	<div class=variable>let g:atp_statusline=0</div>
	<p>in your |vimrc| or <a href="#atprc">atprc</a> file if you do not want the status line provided by this
	plugin. (See <a href="atp-commands.html#atp-:Status">atp-:Status</a>).</div></p>

<p><div class=variable>let b:atp_TruncateStatuSection=40</div>
	<div class=indented>This variable sets how many characters of the section/subsection title
	(or chapter/section titles if you write a book) should be shown in the
	status line.  Section title and subsection title gets equal amount of
	characters.</div></p>

<p><div class=variable>g:atp_kpsewhich_tex</div>
<div class=variable>g:atp_raw_kpsewhich_tex</div>
	<div class=indented>This two variables stores the information returned by 
	    <div class=indented>'kpsewhich -show-path tex'</div>
	They are locked. The first one has pretended '**' wildcards to every
	directory, which is done for using with globpath() and findfile()
	functions.</div></p>

<a name="g:atp_VimCompatible"></a>
<p><div class=variable>g:atp_VimCompatible</div> 
    <div class=indented>variable with default value 0 ("no"). Its values are 0/1 or yes/no. It
    changes the behaviour of '%'. In nocomatible mode it gen go to matching
    pair in a different line in compatible mode it find the matching pair only
    if the ending bracket is in the same line.</div></p>
<h2>WRITING PROJECTS</h2>
<p><div class=variable>let b:atp_MainFile	= expand("%:p")</div>
<div class=indented>This variable points to the main file of the project, it is set on the
start up to the file you open. If you edit project file (for the first time),
start with the main file and use gf (see <a href="atp-commands.html#atp-:GotoFile">atp-gf</a>) to go
to the project file you want to edit. In this way all the project files will
have correctly set this variable. The value of this variable is used by
compilation functions. This variable is written in the project script (see <a
    href="#atp-ProjectScript">atp-ProjectScript)</a>. And when the project
script is on (see <a href="#atp-ProjectScript">atp-ProjectScript,</a> or set
<a href="#b:atp_ProjectScript">b:atp_ProjectScript=</a>1) it is restored
between sessions. In this way, next time, you can open any project file and
the b:atp_MainFile variable will be set to the correct value.</div></p>

<a name="b:TreeOfFiles"></a> <a name="b:ListOfFiles"></a> <a name="b:TypeDict"></a> <a name="b:LevelDict"></a>
<p><div class=variable>b:TreeOfFiles</div>
<div class=variable>b:ListOfFiles</div>
<div class=variable>b:TypeDict</div>
<div class=variable>b:LevelDict</div>
<div class=indented>The project feature stores more variables: <a
    href="#b:TreeOfFiles">b:TreeOfFiles</a> a dictionary which contains the
tree of input files, <a href="#b:ListOfFiles">b:ListOfFiles</a> - list of
input files, <a href="#b:TypeDict">b:TypeDict</a> dictionary of types of input
files, where the type is one of following: {preamble}, {input}, {bib}. The
last variable is <a href="#b:LevelDict">b:LevelDict</a> which is a dictionary
of input levels (for example: an input file in input file has level 2).

<p>There are other tools to make editing project files more easy. There is
search function: <a href="#atp-:S">atp-:S</a> which works better than the Vim
|:ijump| command, which cannot go above the current file in the tree of input
files /but |:ijump| is much faster/.</p></div></p> 

<a name="b:atp_ProjectDir"></a>
<p><div class=variable>b:atp_ProjectDir</div>
<div class=indented>Stores the project directory, by default where <a
    href="#b:atp_MainFile">b:atp_MainFile</a> is located (the filename is
resolved if it is a symbolic link). It is not written to the <a
    href="#atp-ProjectScript">atp-ProjectScript</a> (this makes the <a
    href="#atp-ProjectScript">atp-ProjectScript</a> independent of the host
when <a href="#g:atp_RelativePath">g:atp_RelativePath</a> is set). This
variable is mainly for internal purposes. If you want to set the output
directory use <a href="#b:atp_OutDir">b:atp_OutDir.</a></div></p>

<a name="g:atp_RelativePath"></a>
<p><div class=variable>g:atp_RelativePath = 1</div>
<div class=indented>If set to 1 (which is the default), project variables: <a
    href="#b:atp_MainFile">b:atp_MainFile,</a> <a
    href="#b:TreeOfFiles">b:TreeOfFiles,</a> <a
    href="#b:ListOfFiles">b:ListOfFiles,</a> <a
    href="#b:TypeDict">b:TypeDict,</a> <a href="#b:LevelDict">b:LevelDict
</a>will store path relative to <a href="#b:atp_ProjectDir">b:atp_ProjectDir
</a>(which is the same as path to your main file, however if the file is
a symbolic link it will hint to the resolved path). The <a
    href="#atp-:S">atp-:S</a> will use correctly these values. This is
particularly useful if you want to share the project file.
	 
<p>If you run into problems with <a href="#atp-:S">atp-:S</a> you can set this variable to
0 and use <a href="atp-commands.html#atp-:InputFiles">atp-:InputFiles</a> to regenerate the variables - they will
now store the full path (the other way around also works).</p></div></p>

<a name="atp-:ToggleNn"></a>
<p><div class=command>:ToggleNn [on]</div>
<div class=indented>The command <a href="#atp-:ToggleNn">atp-:ToggleNn</a> toggles the value of
<a href="#g:atp_mapNn">g:atp_mapNn</a> variable.  The optional argument [on]
has three possible values: "",  "on" or "off".  The default "", toggles the
value of <a href="#g:atp_mapNn">g:atp_mapNn,</a> "on" sets g:atp_mapNn to
1 and "off" sets it to 0.</div></p>

<a name="g:atp_mapNn"></a>
<p><div class=variable>g:atp_mapNn = 0</div>
<div class=indented>If it is set to 1 then several tools use <a href="#atp-:S">atp-:S</a> command instead of Vim
|search()| function (which looks only in the current buffer).  These are: <a
    href="atp-commands.html#atp-:NPart">atp-:NPart</a>, <a href="atp-commands.html#atp-:NChap">atp-:NChap</a>,
<a href="atp-commands.html#atp-:NSec">atp-:NSec</a>, <a href="atp-commands.html#atp-:NSSec">atp-:NSSec</a>, <a
    href="atp-commands.html#atp-:NSSSec">atp-:NSSSec</a>, <a href="atp-commands.html#atp-:PPart">atp-:PPart</a>,
<a href="atp-commands.html#atp-:PChap">atp-:PChap</a>, <a href="atp-commands.html#atp-:PSec">atp-:PSec</a>, <a
    href="atp-commands.html#atp-:PSSec">atp-:PSSec</a>, <a href="atp-commands.html#atp-:PSSSec">atp-:PSSSec</a>,
<a href="atp-commands.html#atp-:NEnv">atp-:NEnv</a>, <a href="atp-commands.html#atp-:PEnv">atp-:PEnv</a>.

<p>The default value of <a href="#g:atp_mapNn">g:atp_mapNn</a>is 0.</p>

<p>The variable g:atp_mapNn should be always set as follows (in
<a href="atp-configure.html#atprc">atprc</a> or |vimrc| file):<pre>
	if !exists("g:atp_mapNn")	
	    let g:atp_mapNn = 1
	endif
</pre>
Then the value will be preserved when atp opens new buffer when using
<a href="#atp-:S">atp-:S</a> command. If you want to have project specific
setting use <a href="#atp-ProjectScript">atp-ProjectScript</a>.</p></div></p>

<p>Another good tip for LaTeX project files is to set <a
    href="atp-configure.htm#b:atp_TexFlavor">b:atp_TexFlavor</a>
variable to 'tex' (in your |vimrc| or <a href="atp-configure.html#atprc">atprc</a> file). This will prevent
from situations that Vim recognizes input file as a plain TeX while it
is an input file into a LaTeX project. 
Another way is add options to 'viewoptions' (see |'viewoptions'|). And
set mkview and loadview via autocommands
<div class=aucommand>au BufWinLeave *.tex mkview</div>
<div class=aucommand>au BufWinEnter *.tex silent loadview</div>
This will ensure that filetype variable is set correctly. Some ATP tools
behave in a different way in plaintex files. For example TreeOfFiles function
(it makes the variables <a href="#b:TreeOfFiles">b:TreeOfFiles</a>, <a
    href="#b:ListOfFiles">b:ListOfFiles</a>, <a
    href="#b:TypeDict">b:TypeDict</a>, <a
    href="#b:LevelDict">b:LevelDict</a>). It is recursive in LaTeX files but
not in plain TeX files). On this function is based the command <a
    href="atp-completion.html#atp-:LocalCommands">atp-:LocalCommands</a> which makes list of
commands, environments and colours for Tab Completion and also <a
    href="#atp-:S">atp-:S</a> command. It is done so, because in plain tex
there is no way to distinguish input files from input packages which we do not
want to scan (especially recursively, which might be time consuming). </p>

<a name="atp-ProjectScript"></a>
<h2>Project Script</h2>
<p>The file: <a href="#b:atp_MainFile">b:atp_MainFile</a> . ".project.vim", in the same directory as
<a href="#b:atp_MainFile">b:atp_MainFile</a> stores values of local variables saved before Vim
	leaved a buffer (it is very similar to |View|). Also values of some global 
	variables are stored in a seprate file (oine for all tex files).</p>

<p>Loading procedure searches for files which ends with .project.vim. There
might be many such files in one directory. The file is used which contains the
current buffer in the list <a href="#b:ListOfFiles">b:ListOfFiles</a>. If none
of the project scripts was containing the current buffer name in <a
    href="#b:ListOfFiles">b:ListOfFiles</a> then new project script will be
written for the current buffer. Before writing the project script file if <a
    href="#b:ListOfFiles">b:ListOfFiles</a> doesn't exists it will be
generated and written.</p>

       <p>If the project script is stored locally the it is easier to include it
       in a revision system (bzr, svn, etc.) and share it with collaborators.</p>

       <p>The global project script (which, by default, stores global variables:
       <a href="atp-completion.html#g:atp_LatexPackages">g:atp_LatexPackages</a>, <a
	   href="atp-completion.html#g:atp_LatexClasses">g:atp_LatexClasses</a>, <a
	   href="atp-commands.html#g:atp_Library">g:atp_Library</a>) is now
       '~/.vim/ftplugin/ATP_files/common_var.vim'.</p>

       <p><a href="atp-configure.html#atprc">atprc</a> file is executed before project script file (with local
       variables) and common_var.vim (with global variables) files are
       sourced. Thus this files will override the settings in |vimrc|
       and <a href="atp-configure.html#atprc">atprc</a> files.</p> 

<a name="b:atp_ProjectScript"></a> <a name="g:atp_ProjectScript"></a>
<p><div class=variable>b:atp_ProjectScript = 1</div>
<div class=variable>g:atp_ProjectScript (not set)</div>
<div class=indented>Setting one of the variables <a
    href="#b:atp_ProjectScript">b:atp_ProjectScript</a> or <a
    href="#g:atp_ProjectScript">g:atp_ProjectScript</a> to 0 the feature will
be turned off. Local variable, i.e. b: has precedence over the global one g:.
So you can turned off the feature for only specific files. The global variable
will turn it off for all files.</div></p>
	
<a name="b:atp_ProjectScriptFile"></a>
<p><div class=variable>let b:atp_ProjectScriptFile = b:atp_MainFile.".project.vim"</div>
<div class=indented>This variables stores the name of local project script file.

	<p>Local and global variables are supported. The local variables which
	are cached in this way are listed in </p></div></p>

<a name="g:atp_ProjectLocalVariables"></a>
<p><pre><div class=variable>let g:atp_ProjectLocalVariables = [
		\ "b:atp_MainFile", 	"g:atp_mapNn", 		"b:atp_autex", 
		\ "b:atp_TexCompiler", 	"b:atp_TexFlavor", 	"b:atp_OutDir" , 
		\ "b:atp_auruns", 	"b:atp_ReloadOnErr", 	"b:atp_OpenViewer", 
		\ "b:atp_XpdfServer",	"b:atp_ProjectDir", 	"b:atp_Viewer",
		\ "b:TreeOfFiles",	"b:ListOfFiles", 	"b:TypeDict",
		\ "b:LevelDict", 	"b:atp_BibCompiler",	"b:atp_StarEnvDefault",
		\ "b:atp_StarMathEnvDefault"
		\ ] 
    </div></pre>
	<div class=indented>If your vim doesn't have python support |+python| three more
	variables are stored: <a
	    href="#b:atp_LocalEnvironments">b:atp_LocalEnvironments</a> <a
	    href="#b:atp_LocalCommands">b:atp_LocalCommands</a>, and <a
	    href="#b:atp_LocalColors">b:atp_LocalColors</a>. With |+python|
	this is not needed since <a
	    href="atp-completion.html#atp-:LocalCommands">atp-:LocalCommands</a> is then very
	fast and is run on |BufEnter|.</div></p>

<p>Each file has separate project scrips which stores the values
Ef these variables. It's name is stored in <a
    href="#b:atp_ProjectScriptFile">b:atp_ProjectScriptFile</a>.</p>

<a name="atp-ProjectScript_Global"></a>	
<a name="g:atp_ProjectGlobalVariables"></a>
<p>There is also file for variables for all projects. It stores values of
	global variables (by default it is "ftplugin/ATP_files/common_var.vim". 
	The global variables that are written in this file are given in Vim
	list:
<p><pre><div class=variable>let g:atp_ProjectGlobalVariables = [ 
			\ 'g:atp_LatexPackages', 	
			\ 'g:atp_LatexClasses', 
			\ 'g:atp_Library' ]
</div></pre>
	<div class=indented>If you want to disable this feature for some reason you can set:
		<div class=variable>let g:atp_ProjectScript = 0</div>
	or
		<div class=variable>let b:atp_ProjectScript = 0</div>
	if you want to disable this feature only for a given buffer. 
	(The value of local variable overrides the value of global one!).
	Hint: (if you want to disable loading project script for one file): 
	    In your .vimrc file you can set the local variable via
	    autocommand group BufEnter or you can put an if statement in your
	    <a href="atp-configure.html#atprc">atprc</a> file:<pre><div class=variable> 
		if expand("%:p") == <path_to_file>
		    let b:atp_ProjectScript = 0
		endif
		</div></pre>
	    or you can add to the project scrpit:
	    <div class=indented>(1) write in its first line 'finish', or</div>
	    <div class=indented>(2) include in it 'let |b:atp_ProjectScript| = 0'.</div></div></p>

<a name="atp-:LoadProjectScript"></a> <a name="atp-:WriteProjectScript"></a> <a name="atp-:DeleteProjectScript"></a> <a name="atp-:ToggleProjectScript"></a>
	</p>There are these commands:
	<div class=command>:LoadProjectScript[!] [local/common]</div>	
	<div class=command>:WriteProjectScript[!] [local/common]</div>			
	<div class=command>:DeleteProjectScript[!] [local/common]</div>			
	<div class=command>:ToggleProjectScript[!] [on/off]</div>			

	    <div class=indented>which do the obvious thing (if <a
		href="#g:atp_ProjectScript">g:atp_ProjectScript</a>=0 or |b:atp_ProjectScript|=0 they
	will not work). The default value of the optional argument is "local".
	:DeleteProjectScript [local] command (with optional argument [local]) deletes
	the project script file for the current buffer (only the local one), with
	bang "!" it deletes also globa project scrip. The bang of
	:WriteProjectScript forces to write to project script even when
	project script is turned off (<a
	    href="#b:atp_ProjectScript">b:atp_ProjectScript</a>==0 or
	!exists("<a href="#b:atp_ProjectScript">b:atp_ProjectScript</a>") and <a
	    href="#g:atp_ProjectScript">g:atp_ProjectScript</a>==0).

	<p>The command ':ToggleProjectScript [on/off]' turns on/off the feature
	for this buffer (it sets <a
	    href="#b:atp_ProjectScript">b:atp_ProjectScript</a>). When no argument is
	given it will toggle the value. With bang it also sets the global
	variable <a href="#g:atp_ProjectScript">g:atp_ProjectScript</a>.  <a
    href="#b:atp_ProjectScript">b:atp_ProjectScript</a> is by default in the
	    <a href="#g:atp_ProjectLocalVariables">g:atp_ProjectLocalVariables</a>
	so it will be restored afterwards. |b:atp_ProjectScript| if defined
	overrides the value of global variable |g:atp_ProjectScript|. So you can set
	in your atp file g:atp_ProjectScript = 0 and for some files using the
	if-construction:<pre><div class=variable>
		let g:atp_ProjectScript = 0
		if expand("%:t") == "myfile.tex"
		    let b:atp_ProjectScript = 1
		endif
	</div></pre>
	will turn on the feature only for myfile.tex. Something more elaborate
	would be to set <a href="#b:atp_ProjectScript">b:atp_ProjectScript</a>
	only for files with modification time less than two days for
	example.</p>

	<p>Note: If you delete the project script for the current buffer it will be
	written after exiting Vim, unless you turn off the project feature.</p>

	<p>The project script is disabled for files which full path matches
	"texmf".  With the optional bang <a
	    href="#atp-:LoadProjectScript">atp-:LoadProjectScript</a> loads the
	common project script also for them. <a
	    href="#atp-:WriteProjectScript">atp-:WriteProjectScript</a> command
	will write the project script disregarding if the file is under texmf
	directory or not.</p>

	<p>Note: If you use this feature, you might need to use the commands:
	<a href="atp-completion.html#atp-:LocalCommands">atp-:LocalCommands</a> and <a
	    href="atp-commands.html#atp-:InputFiles">atp-:InputFiles</a> which will update
	b:atp_LocalCommands, b:atp_LocalColors, b:atp_LocalEnvironments and <a
	    href="#b:TreeOfFiles">b:TreeOfFiles</a>, <a
	    href="#b:ListOfFiles">b:ListOfFiles</a>, <a
	    href="#b:TypeDict">b:TypeDict</a> and <a
	    href="#b:LevelDict">b:LevelDict</a>. Use these commands with
	a bang "!". The second set of variables is also updated by <a
	    href="#atp-:S">atp-:S</a> (also with "!") and and <a
	    href="atp-commands.html#atp-:GotoFile">atp-:GotoFile</a> (with "!" as well).</p>

	<p>Note: Also when you add a package to tex you should remove the common
	project scrip, so that the new packages will be added to completion
	list. </p></div></p>

<a name="atp-:S"></a>
<p><div class=command>:S[!] /{pattern}/ [flags]</div>
	<div class=indented>The pattern is a Vim pattern (with 'magic'). With bang "!" it
	regenerates the tree of input files.

	<p>This is command does the same job as |/| but is recursive in the tree
	of files (so it is useful only in project files). The syntax of this
	command is similar to |:vimgrep|.</p> 

	<p>This works similarly to |:ijump|. But also goes back to the root file
	(b:atp_MainFile).</p>

	<p>It sets the alternate file to the buffer from which the search begun.
	Note that this means that if nothing was found the alternate file
	before search will be lost.</p>

	<p>The {pattern} is any Vim pattern as described in |pattern| (it was only
	tested with 'magic' set on).</p>
			
	<p>The supported [flags] are 'bcewW'. Their meaning is the same as flags
	for |search()| function. </p>

	<p>You can enclose the pattern with any non-ID character (see
	|'isident'|) instead of /, as far as it does not appear in the
	{pattern}. Examples: 
	    <div class=example>:S pattern\_swith\_sspaces</div>
	will work but:
	    <div class=example>:S pattern with spaces</div>
	will not.</p>	

	<p>Note that the function might be slow when the project files where not
	yet opened.</p>

	<p>There is a function to check where the input file is on the hard drive
	if the name in the input command doesn't include the full path.  It
	asks kpsewhich which directories to search, filters out 
	directories which are not under '/home' (I assume that there is your
	local texmf tree) and also directories which name contains one of the
	two keywords 'texlive' and 'kpsewhich'. This makes the searching
	faster. </p>

<a name="atp-:S_input"></a>
	<p>Furthermore, the command is designed so that it can find all patterns
	'\\input' (and thus easily find next/previous input file). You can
	use:
		<div class=command>:S \\input</div>
		<div class=command>:S \\input b</div> 
	<p>and you can use |n| and |N| Vim normal commands. 
	Note that it if you go backward, then it means that it will find the
	most deep line, e.g.:<pre>
		file.tex
			----
			----
			\input{file.1} ---->  -------
					      -------
					      \input{file.1.1}
					      -------
	                ----X	 			      
	</pre>
	':S /\\input/ b' in the X position fill find \input{file.1.1} assuming 
	file.1.1.tex doesn't includes any other file.</p> 

	<p>The pattern can be '\\input'. Then it goes recursively to the first
	input line. </p></div></p>
	
<a name="atp-:NInput"></a> 	<a name="atp-&gti"></a>   <a name="atp-&gtgf"></a> <a name="atp-:PInput"></a> 	<a name="atp-&lti"></a>   <a name="atp-&ltgf"></a>
<p>Now it also doesn't search inside commented input files. There two
commands:
<div class=command>:NInput</div> 
<div class=map>nmap ]gf, nmap &gti</div>
<div class=command>:PInput </div>
<div class=map>nmap [gf, nmap &lti</div>
	<div class=indented>which finds the next/previous input line (also commented). See
	<a href="#atp-:S_input">atp-:S_input</a> to find how it works. They
	depend on <a href="#g:atp_mapNn">g:atp_mapNn</a>, if
	1 <a href="#atp-S:">atp-S:</a> is used if 0 Vim |search()| function. To repeat search you
	can use |n| and |N| Vim normal commands. These commands omit comment
	lines.</div></p>

<a name="atp-mappings"></a> <a name="atp-maps"></a>
<h2>MAPS</h2>
<p>Lots of mappings which are given here uses #. This is a convenient map on
British keyboards, but not in the US layout, you can change them for '`' or
some other key that it is not used in Vim (there are not many of them though).
The most commonly used latex-suite plugin uses similar set of mappings (but
there might be some differences). The easy way to change imap leaders is by
using the variables:</p>
<p><a name="g:atp_imap_first_leader"></a>
	    <div class=variable>g:atp_imap_first_leader == "#"</div>
	    <div class=indented>for Greak letters and some math
		commands,</div></p>
<p><a name="g:atp_imap_second_leader"></a>
	    <div class=variable>g:atp_imap_second_leader == "##"</div>
	    <div class=indented>for font commands, (another good choice is "_")</div></p> 
<p><a name="g:atp_imap_third_leader"></a>
	    <div class=variable>g:atp_imap_third_leader == "]"</div>
	    <div class=indented>for environments,</div></p> 
<p><a name="g:atp_imap_fourth_leader"></a>
	    <div class=variable>g:atp_imap_fourth_leader == "["</div>
	    <div class=indented>for extra environments in the old layout (this will be removed).</div></p>
<p><div class=variable><a
	href="atp-commands.html#g:atp_map_forward_motion_leader">g:atp_map_forward_motion_leader</a>
 == "&lt"</div>
	    <div class=indented>for maps to <a href="atp-ProjectFiles.html#atp-:NInput">atp-:NInput</a>, <a
		href="atp-commands.html#atp-:NSec">atp-:NSec</a>, .... , <a
		href="atp-commands.html#atp-&gtE">atp-&gtE</a>, <a href="atp-commands.html#atp-&gte">atp-&gte</a>.</div></p>
	<p><div class=variable><a
		href="atp-commands.html#g:atp_map_backward_motion_leader">g:atp_map_backward_motion_leader</a>
	== "&gt"</div>
	    <div class=indented>for maps to <a href="atp-ProjectFiles.html#atp-:PInput">atp-:PInput</a>, <a
		href="atp-commands.html#atp-:NSec">atp-:PSec</a>, .... , <a
		href="atp-commands.html#atp-&ltE">atp-&ltE</a>, <a
		href="atp-commands.html#atp-&lte">atp-&lte</a>.</div></p>

<p>Note: the best way to list mappings with leader '#' in insert mode is to use
      <div class=map>':imap #&ltCR&gt'.</div></p>

<p>You can list imaps with <a
    href="atp-commands.html#atp-:HelpMathIMaps">atp-:HelpMathIMaps</a> and <a
    href="atp-commands.html#atp-:HelpEnvIMaps">atp-:HelpEnvIMaps</a> but the best way is to use
|imap| directly.</p>

<p>All other mappings (|map|, |vmap|, |nmap|, ...) are using |<LocalLeader>| which can be
altered with the option |maplocalleader|. A good alternate solution is to use "_"
instead of "##".</p>

<p>Maps are using the <buffer> option thus are local to the buffer. To unmap you
also have to use this option, for example to unmap \l issue the command:
    <div class=map>:unmap &ltbuffer&gt &ltLocalLeader&gtl</div>
The maps are loaded unless you set one of variables: 'g:no_plugin_maps' or
'g:no_atp_maps' (disables maps defined in tex_atp.Vim), 'g:no_atp_toc_maps'
(disables maps defined in 'toc_atp.Vim'),  'g:atp_no_env_maps' (disables the
environment maps '[*', ']*') or 'g:atp_no_tab_map' (disables the tab map
for completion, then completion is mapped to <F7> and <S-F7> (for the non
expert mode) but there is no map for 'WrapSelection()', you have to provide 
one by your self).</p>

<p>Note: in all mappings '\' is set to your |<LocalLeader>| (and thus, in fact, the
maps listed below might differ).</p>

<p>Note: The list of commands might not be complete.</p>

<p>Note: There are many internal maps defined |&ltPlug&gt|, they are not documented,
but you can easily find them (you can start with
ftplugin/ATP_files/mappings.vim, where they are used in rhs of maps or you can
search for them inside the scripts).</p> 

<p>Note: you might like to use |'notimeout'| and |'nottimeout'| settings.
However, they require that there are no maps such that no lhs is a subset ot
the another, i.e. like "ab" and "abc". With the default settings it is
shouldn't be a problem.</p>

<div><a name="atp-j_motion">atp-j motion</a></div> 
<div><a name="atp-k_motion">atp-k motion</a></div>
<p>imap &ltCtrl-j&gt, imap &ltCtrl-k&gt	- these are two motions (based on syntax)
which help to navigate thought brackets (but not only) in insert mode.</p>
   
<div class=map>map &ltCtrl-j&gt, map &ltCtrl-k&gt</div> 	
	<p>- as above but in normal mode.</p>

	<p>These motions emulate the behaviour of latex-suite place holder system &lt++&gt,
	without putting the placeholder into tex file.</p>

<div class=command>:ShowOptions[!]</div>

<div class=command>:TEX[!]</div>
<div class=map>map \l,imap \l</div>

<div class=command>:VTEX[!]</div>
<div class=map>map &ltF5&gt, imap &ltF5&gt,</div>

<div class=command>:ViewOutput</div>
<div class=map>map \v,map &ltF3&gt, imap \v, imap &ltF3&gt</div>  

<a name="b:atp_BibtexOutput"></a>
<a name="b:atp_BibtexReturnCode"></a>
<p><div class=command>:Bibtex[!]</div>	
<div class=map>map \b</div>
<div class=indented>run only BibTeX, with bang [!] run LaTeX+BibTeX+LaTeX+LaTeX if you use <a
    href="atp-commands.html#g:atp_Compiler">g:atp_Compiler</a>='python' and BibTeX returned
with errors the compilation will stop. In the debug mode you will also get
BibTeX output. It is stored in <a
    href="#b:atp_BibtexOutput">b:atp_BibtexOutput</a>, BibTeX return code is
in <a href="#b:atp_BibtexReturnCode">b:atp_BibtexReturnCode</a>.</div></p>

<p><div class=command>:OpenLog</div>
<div class=command>:ShowErrors o</div>
<div class=map>map &ltF6&gtl, imap &ltF6&gtl</div></p>

<p><div class=command>:Delete[!]</div>
<div class=map>map &ltF6&gtd</div>
<div class=indented>See <a href="atp-commands.html#atp-:Delete">atp-:Delete</a>.</div></p>

<p><div class=command>:TOC[!]</div>
<div class=map>map \t</div>
<div class=indented>This is a mapping to the command <a href="atp-commands.html#atp-:TOC">atp-:TOC</a></div></p>


<p><div class=command>:Labels[!]</div>
<div class=map>map \L</div>
<div class=indented>This is a mapping to the command <a href="atp-commands.html#atp-:Labels">atp-:Labels</a></div></p>

<p><div class=command>:GotoFile</div>
<div class=command>:EditInputFile</div>
<div class=map>nmap gf</div></p>

<p><div align=left><a href="#atp-&gtm">atp-&gtm</a></div>
<div align=left><a href="#atp-&ltm">atp-&ltm</a></div>
<div class=map>nmap &gtm, nmap &ltm</div> 
	<div class=indented>Goto the beginning of next/previous math environment.</div></p>

<p><div align=left><a href="#atp-&ltM">atp-&ltM</a></div>
<div align=left><a href="#atp-&gtM">atp-&gtM</a></div>	
<div class=map>nmap &gtM, nmap &ltM</div>
	<div class=indented>Goto the beginning of next/previous displayed math environment.</div></p> 
							
<p><a name="atp-]]"></a>
<div class=map>nmap ]], vmap ]]</div>
	<div class=indented>Goto next \begin{</div></p>

<p><a name="atp-[["></a>
<div class=map>nmap ]], vmap ]]</div>
	<div class=indented>Goto previous \begin{</div></p>

<p><a name="atp-]["></a>
<div class=map>nmap ]], vmap ][</div>
	<div class=indented>Goto next \end{</div></p>

<p><a name="atp-[]"></a>
<div class=map>nmap [], vmap []</div>
	<div class=indented>Goto previous \end{</div></p>

<p><a href="atp-commands.html#atp-gc"></a>
<div class=map>nmap gcl, vmap gc</div> 
	<div class=indented>Goto end of comment group (current or next if not in comment).</div></p>

<p><a href="atp-commands.html#atp-gC"></a>
<div class=map>nmap gC, vmap gC</div>
	<div class=indented>Goto begin of comment group (current or previous if not in comment).</div></p>
	    
<a name="atp-:TexDoc"></a>
<p><div class=command>TexDoc:</div>
<div class=map>map &ltF1&gt, imap &ltF1&gt</div>
	<div class=indented>Then you have to type what you are looking for and press enter. The
	option 'keywordprg' is set to 'texdoc -m', i.e when your cursor is
	over a package name and you press 'K' key then you should see the
	package document file (if it is named after the package).

	<p>Without any argument it will open "g:atp_TeXdocDefault", by default it
	is eqaul to "-a lshort", i.e. "The not so short introduction to LaTeX
	2e" by Tobias Oetiker. You can change the default for something that
	you use more often, for example you can set it to "-a faq", i.e. 'The
	UK TeX FAQ' (or even to "-a lshort faq" if you want them both :).</p></div></p> 

<p><div class=command>:NInput</div>
<div class=map>nmap ]gf</div>
	<div class=indented>Goto next input file.</div></p>
<p><div class=command>:PInput</div>
<div class=map>nmap [gf</div>
    <div class=indented>Goto previous input file.</p></div></p>

<a name="pdffonts"></a> <a name="atp-:PdfFonts"></a>
<p><div class=command>:PdfFonts</div>
<div class=map>&ltF6&gtg</div>
<div class=indented>Runs pdffonts command on pdf output file.</div></p> 

<a name="atp-comment-lines"></a> <a name="atp-uncomment-lines"></a> <a name="g:atp_MapCommentLines"></a>
<p><div class=map>nmap \c, vmap \c</div>		
<div class=indented>comment</div>
<div class=map>nmap \u, vmap \u</div>
<div class=indented>uncomment
	<p>Comment/Uncomment lines (both in |Normal| and |Visual| modes).</p> 

	<p>Comment leader can be set with the variable g:atp_CommentLeader (by
	default it is '% '). If you do not want this maps or you want to remap
	them to something else you can set <a
	    href="atp-mappings.html#g:atp_MapCommentLines">g:atp_MapCommentLines</a>=0 in your
	|vimrc| or <a href="atp-configure.html#atprc">atprc</a> file and use
	&ltPlug&gtCommentLines, &ltPlug&gtUnCommentLines (these are normal
	maps), for example:
	<div class=map>nmap &ltLocalLeader&gtC 	&ltPlug&gtUnCommentLines</div>
	<div class=map>vmap &ltLocalLeader&gtC 	&ltPlug&gtUnCommentLines</div>
	A usefull map for uncommenting <a href="atp-editing.html#atp-_c">atp-_c</a> (i.e. <a
	    href="atp-editing.html#atp-select-comments">atp-select-comments</a>).</p></div></p>

<a name="atp-space"></a>
<p><div class=map>cmap &ltbuffer&gt &ltC-Space&gt 	\_s\+</div>
<div class=map>cmap &ltbuffer&gt &ltC-_&gt 		\_s\+</div>
    <div class=indented>The &ltC-Space&gt map doesn't work in Vim, instead &ltC-@&gt is used which
    works as &ltC-Space&gt. In Vim, and gVim as well, you can also use
    |atp-Q/|, <a href="#atp-Q?">atp-Q?</a> or <a
	href="#atp-&ltF2&gt">atp-&ltF2&gt</a> where &ltSpace&gt is mapped to
    \_s\+.</div></p>

<a name="atp-Q/"></a> <a name="atp-Q?"></a> <a name="atp-&ltF2&gt"></a>
    <p><div class=map>nmap Q/, nmap Q?, nmap &ltF2&gt</div>
	<div class=indented>Q/ and Q? to enter command-line window in which &ltspace&gt is mapped to
	'\_s\+'. If you want to insert a white space type CTRL-V followed by
	&ltSpace&gt.

	<p>&ltF2&gt acts as 'Q/i' (i.e. enters insert mode).
	If you want Q/ and Q? enter insert mode as well you can set: &gt
	    <div class=map>nmap Q/		q/:call ATP_CmdwinToggleSpace('on')&ltCR&gti</div>
	    <div class=map>nmap Q?		q?:call ATP_CmdwinToggleSpace('on')&ltCR&gti</div>
	in your <a href="atp-configure.html#atprc">atprc</a> or |vimrc| file.</p></div></p>

<a name="atp-imap-fonts"></a>
<h3>Font Commands</h3>

<table border=0 vspace=0 cellspacing=1 >
    <tr><td><div class=map>imap ##rm</div></td><td> \textrm{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##it</div></td><td> \textit{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##sl</div></td><td> \textsl{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##sf</div></td><td> \textsf{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##bf</div></td><td> \textbf{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##mit</div></td><td> \mathit{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##mrm</div></td><td> \mathrm{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##msf</div></td><td> \mathsf{}&ltLeft&gt</td></tr>
    <tr><td><div class=map>imap ##mbf</div></td><td> \mathbf{}&ltLeft&gt</td></tr>
</table>
<a name="atp-imap-greek-letters"></a>							
<h3>Greek Letters</h3>
<p>Note: You can list this mappings using the command |atp-:HelpMathIMaps|.
You might not see them using |:imap| unless the last cursor position in insert
mode was inside mathematics.</p>
  <a name="g:atp_imap_define_greek_letters"></a>
<p>Note: If you do not want imaps for greek letters you can set
<a href="#g:atp_imap_define_greek_letters">g:atp_ima_define_greek_letters</a> = 0</p>
<table border=0 vspace=0 cellspacing=1 >
    <tr><td><div class=map>imap #a</div></td><td>\alpha</td></tr>
    <tr><td><div class=map>imap #b</div></td><td>\beta</td></tr>
    <tr><td><div class=map>imap #c</div></td><td>\chi</td></tr>
    <tr><td><div class=map>imap #d</div></td><td>\delta</td></tr>
    <tr><td><div class=map>imap #e</div></td><td>\epsilon</td></tr>
    <tr><td><div class=map>imap #f</div></td><td>\phi</td></tr>
    <tr><td><div class=map>imap #y</div></td><td>\psi</td></tr>
    <tr><td><div class=map>imap #g</div></td><td>\gamma</td></tr>
    <tr><td><div class=map>imap #h</div></td><td>\eta</td></tr>
    <tr><td><div class=map>imap #k</div></td><td>\kappa</td></tr>
    <tr><td><div class=map>imap #l</div></td><td>\lambda</td></tr>
    <tr><td><div class=map>imap #i</div></td><td>\iota</td></tr>
    <tr><td><div class=map>imap #m</div></td><td>\mu</td></tr>
    <tr><td><div class=map>imap #n</div></td><td>\nu</td></tr>
    <tr><td><div class=map>imap #p</div></td><td>\pi</td></tr>
    <tr><td><div class=map>imap #o</div></td><td>\theta</td></tr>
    <tr><td><div class=map>imap #r</div></td><td>\rho</td></tr>
    <tr><td><div class=map>imap #s</div></td><td>\sigma</td></tr>
    <tr><td><div class=map>imap #t</div></td><td>\tau</td></tr>
    <tr><td><div class=map>imap #u</div></td><td>\upsilon</td></tr>
    <tr><td><div class=map>imap #vs</div></td><td>\varsigma</td></tr>
    <tr><td><div class=map>imap #vo</div></td><td>\vartheta</td></tr>
    <tr><td><div class=map>imap #w</div></td><td>\omega</td></tr>
    <tr><td><div class=map>imap #x</div></td><td>\xi</td></tr>
    <tr><td><div class=map>imap #z</div></td><td>\zeta</td></tr>
</table>

<p>Not all upper Greek letters are in LaTeX:</p>
<table border=0 vspace=0 cellspacing=1 >
    <tr><td><div class=map>imap #D</div></td><td> 	\Delta</td></tr>
    <tr><td><div class=map>imap #Y</div></td><td> 	\Psi</td></tr>
    <tr><td><div class=map>imap #F</div></td><td> 	\Phi</td></tr>
    <tr><td><div class=map>imap #G</div></td><td> 	\Gamma</td></tr>
    <tr><td><div class=map>imap #L</div></td><td> 	\Lambda</td></tr>
    <tr><td><div class=map>imap #M</div></td><td> 	\Mu</td></tr>
    <tr><td><div class=map>imap #P</div></td><td> 	\Pi</td></tr>
    <tr><td><div class=map>imap #O</div></td><td> 	\Theta</td></tr>
    <tr><td><div class=map>imap #S</div></td><td> 	\Sigma</td></tr>
    <tr><td><div class=map>imap #T</div></td><td> 	\Tau</td></tr>
    <tr><td><div class=map>imap #U</div></td><td> 	\Upsilon</td></tr>
    <tr><td><div class=map>imap #V</div></td><td> 	\Varsigma</td></tr>
    <tr><td><div class=map>imap #W</div></td><td> 	\Omega</td></tr>
    <tr><td><div class=map>imap #Z</div></td><td> 	\mathrm{Z}</td></tr>
</table>
<a name="atp-imap-environments"></a> <a name="g:atp_imap_ShortEnvIMaps"></a>
<h3>Environment Imaps</h3>
<p><div class=map>g:atp_imap_ShortEnvIMaps=1</div> 
    <div class=indented>By default the short environment imaps are defined, but if you set this
    variable to 0 you will get three letter abbreviations.  The only clashes
    is for proof (pro) and proposition (Pro) environments and itemize (ite)
    and \item (I). You can also reconfigure them using the variables:
    g:atp_imap_{env_name} (for example g:atp_imap_theorem, if you don't want
    a map for particular environment set the corresponding variable to empty
    string ""), <a href="#g:atp_imap_third_leader">g:atp_imap_third_leader</a>
    is used as a leader (the default is ]).  Map for letter environment is not
    defined when you use short imaps.</div></p>

<p>Note: you can list this mappings using the command <a
    href="atp-commands.html#atp-:HelpEnvIMaps">atp-:HelpEnvIMaps</a>.<br>
Note: This can be effectivly set only in <a href="atp-configure.html#atprc">atprc</a> or |vimrc| files.</p>

<p>These maps are fully customizable: both sides: the lhs and rhs side ! Here
is how you can set the rhs:</p>
<div class=map><a name="g:atp_EnvNameTheorem">g:atp_EnvNameTheorem</a></div>
<div class=map><a name="g:atp_EnvNameProposition">g:atp_EnvNameProposition</a></div>
<div class=map><a name="g:atp_EnvNameLemma">g:atp_EnvNameLemma</a></div>
<div class=map><a name="g:atp_EnvNameCorollary">g:atp_EnvNameCorollary</a></div>
<div class=map><a name="g:atp_EnvNameRemark">g:atp_EnvNameRemark</a></div>
<div class=map><a name="g:atp_EnvNameNote">g:atp_EnvNameNote</a></div>
<div class=map><a name="g:atp_EnvNameDefinition">g:atp_EnvNameDefinition</a></div>
<p>This variables defines environment names put it the following environment imaps.</p>

<p><a name="b:atp_StarEnvDefault"></a>
<div class=variable>b:atp_StarEnvDefault</div>
    <div class=indented>variable with value "*" or "" (the default). This
    star is added to theorem like environment imaps (<a
	href="#atp-imap-environments">atp-imap-environments</a>).  By default
    it will be restored by the project script. See <a
	href="atp-ProjectFiles.html#g:atp_ProjectLocalVariables">g:atp_ProjectLocalVariables</a>.</div></p>

<p><a name="b:atp_StarMathEnvDefault"></a>	
<div class=map>b:atpStarMathEnvDefault</div>
     <div class=indented>variable with values "*" or "" (the default).  It is added to align and
     equation imaps (<a
	 href="#atp-imap-environments">atp-imap-environments</a>).  By default
     it will be restored by the project script. See <a
	 href="atp-ProjectFiles.html#g:atp_ProjectLocalVariables">g:atp_ProjectLocalVariables</a>.</div></p>

<table border=0 vspace=0 cellspacing=1 >
    <tr><td><div class=map>imap ]b</div></td><td><div class=map>]beg</div></td><td> \begin{}&ltLeft&gt</td></tr>
<tr><td><div class=map>imap ]e</div></td><td><div class=map>]end</div></td><td>		\end{}&ltLeft&gt</td></tr>
<tr><td><div class=map>imap ]C</div></td><td><div class=map>]cen</div></td><td> 		\begin{center}&ltCr&gt\end{center}&ltEsc&gtO</td></tr>

<tr><td><div class=map>imap ]d</div></td><td><div class=map>]def</div></td><td> 		\begin{definition}&ltCr&gt\end{definition}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]t</div></td><td><div class=map>]the</div></td><td> 		\begin{theorem}&ltCr&gt\end{theorem}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]P</div></td><td><div class=map>]Pro</div></td><td>		\begin{proposition}&ltCr&gt\end{proposition}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]l</div></td><td><div class=map>]lem</div></td><td> 		\begin{lemma}&ltCr&gt\end{lemma}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]r</div></td><td><div class=map>]rem</div></td><td> 		\begin{remark}&ltCr&gt\end{remark}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]c</div></td><td><div class=map>]cor</div></td><td> 		\begin{corollary}&ltCr&gt\end{corollary}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]p</div></td><td><div class=map>]pro</div></td><td>		\begin{proof}&ltCr&gt\end{proof}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]x</div></td><td><div class=map>]exa</div></td><td> 		\begin{example}&ltCr&gt\end{example}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]n</div></td><td><div class=map>]not</div></td><td> 		\begin{note}&ltCr&gt\end{note}&ltEsc&gtO</td></tr>

<tr><td><div class=map>imap ]E</div></td><td><div class=map>]enu</div></td><td> 		\begin{enumerate}&ltCr&gt\end{enumerate}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]I</div></td><td><div class=map>]ite</div></td><td> 		\begin{itemize}&ltCr&gt\end{itemize}&ltEsc&gtO</td></tr>

<tr><td><div class=map>imap ]i</div></td><td><div class=map>]I</div></td><td>		\item</td></tr>
</table>
	<p>This map has more features: if the preceding line is of the form:
		<div class=indented>\item[(1)]</div>
	then using this map in a next line will result with
		<div class=indented>\item[(2)]</div>
	This will work for other types of items, (1) -&gt (2), 1) -&gt 2),
	[1] -&gt [2], 1. -&gt 2. and also (a) -&gt (b), b) -&gt c), [c] -&gt [d],
	but also (1a) -&gt (1b).</p> 
			

<table border=0 vspace=0 cellspacing=1 >
<tr><td><div class=map>imap ]a</div></td><td><div class=map>
	    ]ali</div></td><td>\begin{align}&ltCr&gt\end{align}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]q</div></td><td><div class=map>
	    ]equ</div></td><td>\begin{equation}&ltCr&gt\end{equation}&ltEsc&gtO</td></tr>

<tr><td><div class=map>imap ]l</div></td><td><div class=map>
	    ]lem</div></td><td>\begin{flushleft}&ltCr&gt\end{flushleft}&ltEsc&gtO</td></tr>
<tr><td><div class=map>imap ]R</div></td><td><div class=map>
	    ]rig</div></td><td>\begin{flushright}&ltCr&gt\end{flushright}&ltEsc&gtO</td></tr>

<tr><td><div class=map>imap ]T</div></td><td><div class=map>
	    ]tik</div></td><td>\begin{center}&ltCR&gt\begin{tikzpicture}&ltCR&gt&ltCR&gt\end{tikzpicture}&ltCR&gt\end{center}&ltUp&gt&ltUp&gt</td></tr>
<tr><td ><div class=map>imap ]f</div></td><td><div class=map>
	    ]fra</div></td><td>\begin{frame}&ltCr&gt\end{frame}&ltEsc&gtO</td></tr>

<tr><td valign=top><div class=map>imap ]let</div></td><td></td><td>
<pre>
\begin{letter}{&ltcursor&gt}
    \opening{g:atp_letter_opening} 
    \closing{g:atp_letter_closing}
\end{letter}</pre></td></tr>
</table>

<p><div class=variable><a name="g:atp_letter_opening">g:atp_letter_opening</a></div>
<div class=variable><a name="g:atp_letter_closing">g:atp_letter_closing</a></div>
<div class=indented>By default g:atp_letter_opening and g:atp_letter_closing are ''.</div></p>

<p>Next three sets of imaps: <a href="#atp-imap-math">">atp-imap-math</a>,
<a href="#atp-imap-math-misc">atp-imap-math-misc</a> and <a
href="#atp-imap-diacritics">atp-imap-diacritics</a> define imaps with
overlaping keys (lhs), but note that first two are defined only in math
environment, while the last only in non math environment. In this way `' in
math environment will produce \acute{} while in non math \'{}. </p>
<a name="atp-imap-math"></a>
<a name="g:atp_imap_math"></a>
<a name="g:atp_imap_define_math"></a>
<h3>Math Imaps</h3>
    <p>These imaps are defined in <a href="#g:atp_imap_math">g:atp_imap_math</a>
    variable (except ]m and ]M imaps). They might be turned off usgin <a
    href="#atp-:ToggleIMaps">atp-:ToggleIMaps</a> commands or <a
    href="#g:atp_imap_define_math">g:atp_imap_define_math</a> variable (be
    setting it to 0, works on the fly).</p>

    <p>For convienience, there are:
    <table border=0 vspace=0 cellspacing=1 >
	<tr><td><div class=map>imap ~~</div></td><td>		\tilde{}</td></tr>
	<tr><td><div class=map>imap ~^</div></td><td>		\hat{}		[^^ is used for ^{}]</td></tr>	
    </table>
    <a name="g:atp_imap_wide"></a>
    If g:atp_imap_wide is set to 1 (default is 0) the above imaps to
    \widetilde{} and \widehat{}.</p>

    <p><div class=indented>The last two maps and the following maps work around |'timeout'| vim
	setting (behave like |'notimeout'| was set):</div></p>

    <table border=0 vspace=0 cellspacing=1 >
	<tr><td><div class=map>imap ==</div></td><td>		&=</td></tr>
	<tr><td><div class=map>imap =~</div></td><td>		\cong</td></tr>
	<tr><td><div class=map>imap ~~</div></td><td>		\approx</td></tr>

	<tr><td><div class=map>imap o+</div></td><td>		\oplus</td></tr>
	<tr><td><div class=map>imap O+</div></td><td>		\bigoplus</td></tr>
	<tr><td><div class=map>imap o-</div></td><td>		\ominus</td></tr>
	<tr><td><div class=map>imap o.</div></td><td>		\odot</td></tr>
	<tr><td><div class=map>imap O.</div></td><td>		\bigodot</td></tr>
	<tr><td><div class=map>imap o*</div></td><td>		\otimes</td></tr>
	<tr><td><div class=map>imap O*</div></td><td>		\bigotimes</td></tr>
	<tr><td><div class=map>imap s+</div></td><td>		\cup</td><td>		[    set +]</td><td>/set = set theoretic/</td></tr>
	<tr><td><div class=map>imap s-</div></td><td>		\setminus</td><td>	[    set -]</td></tr>
	<tr><td><div class=map>imap S+</div></td><td>		\bigcup</td><td>		[big set +]</td></tr>
	<tr><td><div class=map>imap s*</div></td><td>		\cap</td><td>		[    set *]</td></tr>
	<tr><td><div class=map>imap S*</div></td><td>		\bigcap</td><td>		[big set *]</td></tr>
	<tr><td><div class=map>imap c*</div></td><td>		\prod</td><td>		[    cat *]</td><td>/cat = categorical/</td></tr>
	<tr><td><div class=map>imap c+</div></td><td>		\coprod</td><td>		[    cat +]</td></tr>
	<tr><td><div class=map>imap &lt=</div></td><td>		\leq</td></tr>
	<tr><td><div class=map>imap &gt=</div></td><td>		\geq</td></tr>
	<tr><td><div class=map>imap t&lt</div></td><td>		\triangleleft</td></tr>
	<tr><td><div class=map>imap t&gt</div></td><td>		\triangleright</td></tr>
	<tr><td><div class=map>imap s&lt</div></td><td>		\subseteq</td><td>	[    set &lt]</td></tr>
	<tr><td><div class=map>imap s&gt</div></td><td>		\supseteq</td><td>	[    set &gt]</td></tr>
    </table>

    <div call=indented>If you want to write 'o*' you can wait until |'timeoutlen'| passes or
    write 'o *' (TeX in math mode doesn't see spaces).</div></p>

<a name="atp-imap-math"></a>
<a name="g:atp_imap_math"></a>
<a name="g:atp_imap_define_math"></a>
<h3>Math Imaps Misc</h3>

    <p>These imaps are defined in <a href="#g:atp_imap_math">g:atp_imap_math</a>
    variable (except ]m and ]M imaps). They might be turned off usgin <a
    href="#atp-:ToggleIMaps">atp-:ToggleIMaps</a> commands or by setting the
    variable <a href="#g:atp_imap_define_math">g:atp_imap_define_math</a> to
    0 (this should also work on the fly).</p>

    <p>These are very useful mappings for typing mathematics. 
    Some of the ideas were taken from TeX_9 by Elias Toivanen and also AuTeX by
    Carl Mueller.<br>
    <b>Note</b>: you might not see them using |:imap| unless the last cursor position
    in insert mode was inside mathematics.</p>

<h4>AuTeX maps</h4>
<div class=map>imap __ 	_{}&ltLeft&gt</div>
<div class=map>imap ^^		^{}&ltLeft&gt</div>
    <div class=indented>You can set the leader for these two maps using
	g:atp_imap_subscript, g:atp_imap_supscript variables. If you do not
	have any maps which begins with _ or ^ then you can set them to _ and
	^, if this is the case thes maps will not be fired if you type \_ or
	\^ (which means literal _ or ^ in LaTeX).</div></p> 

<div class=variable><a name="g:atp_imaps">g:atp_imaps</a></div>
    <div class=indented>Both above maps can be turned on/off on the fly with
	<a href="#g:atp_imaps">g:atp_imaps</a> (1 - on, 0 - off). Use <a
    href="#atp-:ToggleMathIMaps">atp-:ToggleMathIMaps</a> (mapped to '<Tab>)
    to switch it on/off.</div></p>

<p><div class=map>imap ]m 	\[\]&ltLeft&gt&ltLeft&gt</div>
<div class=map>imap ]M 	\[\]&ltLeft&gt&ltLeft&gt</div>
    <div class=indented>The following imaps can be turned on/off on the fly
	with <a href="#g:atp_imap_define_math">g:atp_imap_define_math</a>
	variable (0 - off, 1 - on). You can use <a
	href="#atp-:ToggleMathIMaps">atp-:ToggleMathIMaps</a> (mapped to
    '&ltTab&gt).</div></p>

    <table border=0 vspace=0 cellspacing=1 >
	<tr><td><div class=map>imap #\</td><td>	\setminus</td></tr>
	<tr><td><div class=map>imap #/</div></td><td>		\frac{}{}</td></tr>
	<tr><td><div class=map>imap #&</div></td><td>		\wedge</td></tr>
	<tr><td><div class=map>imap #ve</div></td><td>	\vee</td></tr>
	<tr><td><div class=map>imap #V</div></td><td>		\Vee</td></tr>
	<tr><td><div class=map>imap #N</div></td><td>		\Nabla</td></tr>
	<tr><td><div class=map>imap #=</div></td><td>		\equiv</td></tr>
	<tr><td valign=top><div class=map>imap `8</div></td><td>		\infty
		    [the default '#' is not working, ` is used intead, but only if <a
			href="#g:atp_imap_first_leader">g:atp_imap_first_leader</a>='#']</td></tr>
	<tr><td><div class=map>imap `6</div></td><td>		\partial	[as above, you
		    can also use \p&ltTab&gt]</td></tr>
	<tr><td><div class=map>imap #@</div></td><td>		\circ</td></tr>
	<tr><td><div class=map>imap #=</div></td><td>		\equiv</td></tr>
	<tr><td><div class=map>imap #*</div></td><td>		\bigcap</td></tr>
	<tr><td><div class=map>imap #+</div></td><td>		\bigcup</td></tr>
	<tr><td><div class=map>imap #\</div></td><td>		\backslash</td></tr>
	<tr><td><div class=map>imap #&gt</div></td><td>	\geq</td></tr>
	<tr><td><div class=map>imap #&lt</div></td><td>	\leq</td></tr>
	<tr><td><div class=map>imap #.</div></td><td>		\dot		[#.s will put \dots]</td></tr>
    </table><br>

<h4>Math Accents</h4>
    <p>These imaps are defined in g:atp_imap_math_misc variable. They might be
    turned off usgin <a href="#atp-:ToggleIMaps">atp-:ToggleIMaps</a> commands or
    <a href="#g:atp_imap_define_math">g:atp_imap_define_math_misc</a> variable.
    <p>
    <table border=0 vspace=0 cellspacing=1 >
	<tr><td><div class=map>imap ``</div></td><td>		\grave{}</td></tr>
	<tr><td><div class=map>imap `'</div></td><td>		\acute{}</td></tr>
	<tr><td><div class=map>imap `></div></td><td>		\vec{}</td></tr>
	<tr><td><div class=map>imap `.</div></td><td>		\dot{}</td></tr>
	<tr><td><div class=map>imap `v</div></td><td>		\check{}</td></tr>
	<tr><td><div class=map>imap `_</div></td><td>		\bar{}</td></tr>
	<tr><td><div class=map>imap `~</div></td><td>		\tilde{}	[if g:atp_imap_wide is nonempty it is \widetilde{}]</td></tr>
	<tr><td><div class=map>imap `^</div></td><td>		\hat{}		[as above]</td></tr>
    </table>

<h3>Diacritics</h3>
<p>These maps are defined in g:atp_imap_diacritics variable.They might be
turned off usgin <a href="#atp-:ToggleIMaps">atp-:ToggleIMaps</a> commands or
<a href="#g:atp_imap_define_math">g:atp_imap_define_diacritics</a> variable
(be setting it to 0, works on the fly).

<p><table border=0 vspace=0 cellspacing=1 >
    <tr><td><div class=map>imap `'</div></td><td>\'{}</td></tr>
    <tr><td><div class=map>imap `"</div></td><td>\"{}</td></tr>
    <tr><td><div class=map>imap `^</div></td><td>\^{}</td></tr>
    <tr><td><div class=map>imap `v</div></td><td>\v{}</td></tr>
    <tr><td><div class=map>imap `b</div></td><td>\b{}</td></tr>
    <tr><td><div class=map>imap `d</div></td><td>\d{}</td></tr>
    <tr><td><div class=map>imap ``</div></td><td>\`{}</td></tr>
    <tr><td><div class=map>imap `H</div></td><td>\H{}</td></tr>
    <tr><td><div class=map>imap `~</div></td><td>\~{}</td></tr>
    <tr><td><div class=map>imap `.</div></td><td>\.{}</td></tr>
    <tr><td><div class=map>imap `c</div></td><td>\c{}</td></tr>
    <tr><td><div class=map>imap `t</div></td><td>\t{}</td></tr>
</table></p>

<h3>atp-:ToggleIMaps</h3>
<a name="atp-:ToggleIMaps"></a>
<p><div class=command>:ToggleMathIMaps</div>
<div class=map>nmap, imap '&ltTab&gt</div>
    <div class=indented>This command toggles off/on impas defined in the vim lists
    g:atp_imap_math, g:atp_imap_math_misc and g:atp_imap_diacritics plus _ for
    _{} and ^ for ^{}.</div></p> 

<a name="atp-maps-log"></a> 
<h3>Log File Maps</h3>
    <p>This are available maps in the log file, when it was opened with
    <a href="atp-commands.html#atp-:OpenLog">atp-:OpenLog</a> command 
    <table border=0 vspace=0 cellspacing=1 >
	<tr><td><div class=map>	]e,</div></td><td><div class=map> [e</div></td><td>- go to next/previous error message in log file</td></tr>
	<tr><td><div class=map>]w,</div></td><td><div class=map> [w</div></td><td>- go to next/previous warning message in log file</td></tr>
	<tr><td><div class=map>]c,</div></td><td><div class=map> [c</div></td><td>- go to next/previous citation warning message in log file</td></tr>
	<tr><td><div class=map>]r,</div></td><td><div class=map> [r</div></td><td>- go to next/previous reference warning message in log file</td></tr>
	<tr><td><div class=map>]i,</div></td><td><div class=map> [i</div></td><td>- go to next/previous info message in log file </td></tr>
	<tr><td><div class=map>]f,</div></td><td><div class=map> [f</div></td><td>- go to next/previous font info message in log file</td></tr>
	<tr><td><div class=map>]p,</div></td><td><div class=map> [p</div></td><td>- go to next/previous font package message in log file</td></tr>
	<tr><td><div class=map>]P,</div></td><td><div class=map> [P</div></td><td>- go to next/previous page in log file</td></tr>
	<tr><td><div class=map>%</td><td></td><td>		- searchpair for (:).</td></tr>  
	</table>
	You can use |n| and |N| Vim normal commands to repeat previous search [count] times.</p>


<a name="atp-abbreviations"></a>
<h2>ABBREVIATIONS</h2>

<p>The following abbreviations are defined:
<pre>
	+- for \pm
	+| for \dagger
	++ for \ddager
	=&ltenv_name&gt= for environments.
</pre> </p> 

    </p>You can use <a href="#atp-completion">atp-completion</a> (&ltTab&gt) for abbreviation names, see
    <a href="#atp-completion-abbreviations">atp-completion-abbreviations</a>.</p>

    <p>Locally defined environments are also supported (the one defined in
    <a href="#b:atp_LocalEnvironments">b:atp_LocalEnvironments</a>). If you need something different than
    abbreviation for
    <pre>
	\begin{theorem}
	     &ltCursor placed here&gt
	\end{theorem}
    </pre>
    for example:
    <pre>
	\begin{corollary}<Cursor placed here>
	\end{corollary}
    </pre>
    You can set the variable g:atp_abbreviation_{environment_name}. It is list
    with two elements. First is used after \begin{...} and the second after
    \end{...}. For the above examples:
	<div class=variable>let g:atp_abbreviation_theorem	= [ '&ltCR&gt', '&ltESC&gtO' ]</div>
	<div class=variable>let g:atp_abbreviation_corollary	= [ '&ltCR&gt', '&ltESC&gt&ltUP&gtA' ]</div>
    The first one is the default so you do not need to set it. In the second
    example the abbreviation command will look like:
    <div class=abbreviate>abbreviate  =corollary=  \begin{corollary}&ltCR&gt\end{corollary}&ltESC&gt&ltUP&gtA</div>
   This will only work for b:atp_LocalEnvironments, LaTeX and AMS
    environments are set accordingly.
    Environment name abbreviations are defined only if there were not defined.
    So you can override the settings using <a href="#atprc">atprc </a>file (or |vimrc| file).</p>

    <p>Furthermore, you can change the "=":</p>
    <a name="g:atp_iabbrev_leader"></a>
    <div class=variable>let g:atp_iabbrev_leader = "="</div> <p>It is used  in
    insert mode abbreviations like: =theorem=, =proposition=, =corollary=,
    =lemma=, etc.</p> 

<a name="atp-errors"></a>
<h2>DEBUGGING ATP</h2>
    <p>This section describes some limitation of ATP (as you see, this section is
    not written, but the aim is to make it disappear anyway ;).</p>

    <p>There are many debug variables with names g:atp_debug{fname} where {fname} is
    a shortname of the function for which it will turn on the debug info. These
    variables are documented in ftplugin/ATP_files/options.vim file.</p>

    <a name="atp-errors-bibsearch"></a>
    <p>A possible error which may occur using the :BibSearch commands has a simple
    cause: we count number of brackets '()', '{}' and '"' (but nor '\"') to see
    where the bib entry ends and where to join lines. The message error is echoed
    when more than 30 lines where processed and the matching bracket was not found
    (or the number of '"' is odd). Look at your bib file at the specified
    position.  Syntax highlighting for bib files can help you finding where such
    an error is located. (After reading the bib file comment lines and lines which
    begin with @string are removed, so that the brackets in comment lines do not
    count.)</p>

<a name="atp-editing"></a>
<h2>EDITING TOOLS</h2>
	<a name="atp-visual"></a>
	<p>visual mode: ie, iE, ae, im, am, ip, ap, iS, aS, &ltLocalLeader&gtsc normal
	and mode: &ltLocalLeader&gtsc.</p> 

	<p>They select the current environment in two ways: 
	<table border=0 vspace=0 cellspacing=1 >
	    <tr><td><div class=map>i</div></td><td>	- inner</td></tr>
	    <tr><td><div class=map>a</div></td><td>	- outer</td></tr>
	    <tr><td><div class=map>e</div></td><td>	- environment </td></tr>
	    <tr><td><div class=map>p</div></td><td>	- paragraph</td></tr>	  
	    <tr><td valign=top><div class=map>m</div></td><td> - math zones: \(:\), $:$, \[:\], $$:$$, 
		      or math environment \begin:\end.ard
		      search is set by ATP</td></tr>
	    <tr><td><div class=map>)</div></td><td>	- bracket</td></tr>
	    <tr><td><div class=map>s</div></td><td>	- syntax</td></tr>
	</table>

	<a name="atp-vie"></a> <a name="atp-viE"></a> <a name="atp-vae"></a>
	<p><div class=map>ie, iE, ae</div> select environment: from the nearest \begin (top) to the nearest \end (bottom).</p>	

		<p>'viE' selects a bit more than 'vie' but less than 'vae', it
		selects a bracket pair before the beginning of the inner part
		of an environment, so it can be environment name or an option
		just after.</p>	

	    <a name="atp-vim"></a> <a name="atp-vam"></a>
	<p><div class=map>im, am</div>	selects mathematics.</p>
	<a name="atp-vip"></a> <a name="atp-vap"></a>
	<p><div class=map>ip, ap</div>  selects paragraph. <br>
		In inner mode: from the nearest 
		<div class=example>\begin, \end, \par, \newline or empty line (top)</div> 
		to the nearest >
		<div class=example>\begin, \end, \par, \newline or empty line (bottom).</div>
		in outer mode: from the nearest >
		<div class=example>\par or empty line (top)</div> 
		to the nearest >
		<div class=example>\par or empty line (bottom).</div></p>

		<a name="atp-viS"></a> <a name="atp-vaS"></a>
	<p><div class=map>iS, aS</div>	selects using syntax stack (see |synstack()|), inner is the
		top element in the syntax stack (the highlighted area will be
		small) and outer uses the most bottom element in the syntax
		stack (the resulting are will be wide). Some syntax groups are
		filtered out (like 'texDocZone') which not always are
		synchronised.</p>
		<a name="atp-select-comments"></a> <a name="atp-_c"></a>
	<p><div class=map>_c</div>	
		select comment lines which begin with '^\s*%'. If not in
		comment line, end visual mode. You can change this map with
		variables g:atp_MapSelectComment (this can be only changed in
		atprc or vimrc file, you need restart Vim, or use
		<a href="#atp-:ReloadATP">atp-:ReloadATP</a>).</p>

		<a name="atp-gw"></a>	
<p><div class=map>nmap gw</div>
	Quite useful normal map: m`vipgq``. It is mapped to gw (in normal
	mode).</p>

	<a name="atp-g&lt"></a> <a name="atp-g&gt"></a>	
<p><div class=map>nmaps: g&gt, g&lt, 2g&gt, ..., 6g&gt</div> 
	A normal map to m`vipg&gt`` (or m`vip2g&gt``).</p>

	
<a name="atp-requirements"></a>
<h2>REQUIREMENTS</h2>

<p>This plugin requires Vim version 7.3.  Several tools uses syntax, so even if
you do not like colours on the screen you should set "syntax on". For example,
the recognition of math mode used by |atp-completion|, and |atp-:TexAlign|
command (but also some other things, and some maps!).</p>

<a name="atp-requirements-python"></a>
<p>ATP uses python 2.7 (also works with python 3). You need psutil library which
you can get from <a href="http://code.google.com/p/psutil/">here</a>.
    
<p>Other libraries are standard ones so they should be available. If you have
a problem you can try to set g:atp_debugPythonCompiler=1 and then look at the
file PythonCompiler.log under <a href="#g:atp_TempDir">g:atp_TempDir</a> it
will contain python errors.</p>

<p>It is nice to have 'texdoc' program. This plugin maps <F1> to a function which
calls it. This allows to speed up searches for documentation. Also the option
'keywordprg' has the value "texdoc -m", thus pressing 'K' (see |K|) over a tex
package should open you the package documentation. The same applies to this
help file.</p>

<p>Another good programs are: texloganalyzer (which is now not used by ATP) and pdffonts
There is a map to use pdffonts, see: <a href="#pdffonts">pdffonts</a>.</p>

<p>The command <a href="#atp-:WordCount">atp-:WordCount</a> is using detex program. It is included in TexLive
tex distrubution.</p>

<a name="atp-Viewers"></a>
<h2>NOTES ON VIEWERS</h2>

<p>See the section <a href="#atp-Viewers_Options">atp-Viewers_Options</a> how to set options for viewer programs.</p>
<a name="atp-Viewers-Xpdf"></a>
<p><h3>Xpdf</h3>
	<div class=indented>It is supported. It is configured in the way that when your tex file
	have errors, Xpdf viewer will not reload your file, which I found
	useful. Xpdf supports forward searching (vim-&gtXpdf) with command:
	<a href="#atp-:SyncTex">atp-:SyncTex</a>
		<div class=command>:SyncTex</div>
		<div class=map>map t</div>
		<div class=map>map &ltS-LeftMouse&gt</div>
		Read also <a
		    href="#atp-:SyncTex_Xpdf-hack">atp-:SyncTex_Xpdf-hack</a>
		and see <a href="#atp-:SetXpdf">atp-:SetXpdf</a> command
	description.  You can set your own options of Xpdf using
	<a href="#b:atp_xpdfOptions">b:atp_xpdfOptions</a> (or g:atp_xpdfOptions), for example:
	    <div class=variable>let b:atp_xpdfOptions=['-bg', 'NavajoWhite4', '-fg', 'black', '-mattecolor', 'burylwood']</div>
	will make Xpdf view different. This is helpful when you edit to
	files, and do not want to mix them. Another nice example:
	    <div class=variable>let b:atp_xpdfOptions="-bg Grey30 -mattecolor SlateBlue2 -papercolor White"</div></p>
	</div>

<p><h3>Evince</h3>
	<div class=indented>Works fine.</div></p>
    <a name="atp-Viewers-Okular"></a>
<p><h3>Okular</h3>
	<div class=indented>Works fine. It supports both forward (Vim->Okular) and inverse
	(Okular->Vim) searches. Okular supports forward searching (vim->Okular)
	with command: <a href="#atp-:SyncTex">atp-:SyncTex</a> >
		<div class=command>:SyncTex</div>
		<div class=map>map t</div>
		<div class=map>map &ltS-LeftMouse&gt</div>
	Here is how to <b>configure reverse searching</b> (Okular-&gtVim): 
	open Okular and go to 
		<div class=indented>settings&gtConfigure Okular&gtEditor</div>
	and set 
	    <table border=0 vspace=0 cellspacing=1 >
		<tr><td>Editor</td><td>Custom Text Editor</td></tr>
		<tr><td>Command</td><td>python $HOME/.vim/ftplugin/ATP_files/atp_RevSearch.py '%f' '%l'</td></tr>
		</table>
	NOTE: You must substitute $HOME directory to its value!!! It will not
	work other way. You can also copy the script somewhere inside your
	$PATH but then when this script will change you have to keep in mind
	to copy it again.</p> 

	<p>If you set the command as above (with python before the path to
	atp_RevSearch.py) you do not need to make atp_RevSearch.py executable.
	Note, that otherwise whenever you update ATP you will have to make the
	script executable!</p>

	<p>If it is not working for you, please report it, you can also
	use: 
	   <div class=command> gvim --remote-wait +%l "+normal %c|" %f</div></p>

	   <a name="atp-:SyncTex_with_Okular"></a>
	<p>NOTE: :SyncTex command uses "--unique" switch for okular. However,
	when you do not set <a
	    href="#b:atp_okularOptions">b:atp_okularOptions</a> to
	["--unique"] as well, then using :SyncTex will open new instance of
	Okular regardless if it was openned or not. You can use "--unique" as
	an Okular option (in g:atp_okularOptins or b:atp_okularOptions), but
	the if you open many files tex, all will use only one instance of
	Okular. This is a limitation of using Okular. Xpdf has a server option
	which allows for vim-&gtXpdf communication to the right Xpdf
	instance.</p> 

	<p>Then you can use &ltShift&gt+&ltLeft_Mouse&gt in Okular to synchronize the Vim
	(gVim) with pdf. </p>

	<a name="atplib#FindAndOpen()"></a>	
	<p><div class=command>atplib#FindAndOpen</div>
	The function atplib#FindAndOpen() asks each running gvim server if is
	is "hosting" source of the file %f. Then it uses this server to set
	the line (but it doesn't check if the cursor is in the right window!).
	Note: if you like command line Vim (which has its own beauty
	- actually I'm just typing in it :) you need to set up Vim server
	  option on startup: 
 		<div class=indented>vim --servername VIM &ltfile&gt</div>
	<b>Limitations:</b> The project files which are split into many input files are not yet supported.</p></div>

<p><h3>Kpdf</h3>
	<div class=indented>Works fine (moves page a little bit when updates a file).</div></p>

<p><h3>EpdfView</h3>
	<div class=indented>This viewer does not support automatic reloads when the file changes
	(but it seems that the work is in progress). You have to issue CTRL-R
	yourself when the file is changed.</div></p>

<p><h3>AcroRead</h3>
	<div class=indented>As with epdfview (with the difference that it supports automatic
	updates, but it do not works somehow). There is a way to configure
	forward searching (Vim-&gtAcroRead)! but it is not supported yet, if you
	really want it, write to me.</div></p>
<a name="atp-Viewers-Xdvi"></a>
<p><h3>Xdvi</h3>
	<div class=indented>Works fine. The file will be updated after a click (or use the xdvi
	options '-watchfile 1' see man xdvi for explanations). You can set
	forward/reverse searching by the command |SetXdvi| then use
	|atp-:SyncTex| for forward searching (Vim->Xdvi). To get reverse
	searching Xdvi must be opened by ATP (:ViewOutput, or any other
	command)</p>

	<p>If you want to use Vim you have to run it with the command: >
 	<div class=indented>vim --servername xdvi &ltfile&gt</div>
	You can pick any server name.</p>
	
	<p>ATP supports forward (Vim-&gtXdvi) and inverse (Xdvi-&gtVim) searching for
	Xdvi. The forward search is set by ATP (see |atp:SyncTex|), the
	inverse search is set by: 
	    <div class=variable>let b:atp_TexCompiler	= "latex"</div>
	    <div class=variable>let b:atp_TexOptions	= ["-src-specials"]</div>
	    <div class=variable>let b:atp_Viewer		= "xdvi" </div>
	    <div class=variable>let b:atp_xdviOptions	= ["-editor", "'gvim --remote-wait +%l %f'"]</div>
	They are not set by default, however there is simple command to set
	them at once <a href="#atp-:SetXdvi">atp-:SetXdvi</a>.	
	This are excellent sources of information on this <a
	    href="http://xdvi.sourceforge.net/inverse-search.html">here</a>
	and <a
	    href="http://Vim.wikia.com/wiki/Vim_can_interact_with_xdvi">here</a>.
</div></p>

<p><h3>Zathura</h3>							
	<div class=indented>Perfectly works (but there is no reverse/inverse searching).</div></p>

<p><h3>Mupdf</h3>
	<div class=indented>It is the fastest pdf viewer program ever made, why? because it
	renders only one page :). But it can be nicly set with ATP: via
	autocommands and :SyncTex you can load a page where the cursor is
	located (for example with autocmd event |CursorHold|). This might be
	nice on a big enough monitor on which you can see both vim and mupdf
	on one screen.</div></p>

<a name="atp-tips"></a>
<h2>TIPS</h2>

<p>If you have any nice tip on editing (La)TeX with Vim or ATP :) you can share it
here (my email you'll find on top of the help file), or put them on the script
web page. </p>


<div class=map<p>>nmap gS :%s/&ltc-r&gt=expand("&ltcword&gt")&ltcr&gt/
<div class=indented>Pull word under the cursor to substitute command.
</div></p>

<p><div class=map>:g/^[^%]*\\usepackge/#</div>
<div class=indented>List loaded packages with line numbers</div></p>

<p><div class=map>y/\\begin{document}/</div>
<div class=indented>When standing on 1st line - copy the preamble (possibly to a register)</div></p>
<p><div class=map>:g/^\s*%/d</div>
<div class=indented>Delete comment lines</div></p>

<p><div class=map>:g/\(^\s*\n\)\{2,}/d</div>
<div class=indented>Compress empty lines / when there are more than two empty lines it leaves just
one / </div></p> 

<p><div class=map>vipgq</div>
<div class=indented>Format inner paragraph. Or even better:</div>
<div class=map>m`vipgq``</div>
<div class=indented>This is so nice that I added a map:</div>
<div class=map>nmap gw	m`vipgq``</div></p>	

<p><div class=map>m`vip&gt``</div>
<div class=map>m`vip&lt``</div>
<div class=indented>Indent inner paragraph, they are mapped to: &gt</div>
<div class=map>nmap g&gt	m`vip&gt``</div>
<div class=map>nmap g&lt	m`vip&lt``</div>
<div class=indented>There are also defined maps: 2g&gt, 3g&gt , 4g&gt up to 6g&gt.</div></p>

<p><div class=command>:TeXdoc ams&ltCtrl-d&gt</div>		
<div class=indented>Show tex documentation which matches ams (the completion for TeXdoc command
finds matches in alias files of texdoc :!texdoc -f).</div></p>
<p><div class=map>\ref{^thm:&ltTab&gt</div>
<div class=indented>will list all cross references to theorems (if you use the prefix thm: for theorems.</div></p>

<p>If you want to change the name of a command, you can try:</p>
<div class=aucommand>augroup DelCommands<br>
    au VimEnter *tex delcommand SetXdvi<br>
    au VimEnter *tex delcommand SetXpdf<br>
augroup END</div>
<div class=command>command! -buffer	Xdvi	:call SetXdvi()</div>
<div class=command>command! -buffer	Xpdf	:call SetXpdf()</div>

<p>However, not all functions are defined without
&ltSID&gt (you can always try to reach me).</p>

<div class=command>:'&lt,'&gtWrapSelection @q</div>		
<p>Wrap a visual area with wrapper from the register q and with the default '}'
end wrapper.</p>
<div class=command>:'&lt,'&gtWrapSelection @q,@w</div>	
<p>As above but with the end wrapper from register w.</p> 

<div class=map>:map ]=		]sz=</div>		
<p>Goto the first spelling error and list</p> 
<div class=map>:map [=		[sz=</div>
<p>suggestions. Another version is to use ]S and [S instead of ]s and [s.</p>
				
<a name="atp-highlight"></a>
<h2>COLOUR HIGHLIGHTING AND SYNTAX GROUPS</h2>

<p>When the cursor is positioned on \begin{envname} or \end{envname} both
corresponding \begin:\end get highlighted with syntax group MatchParen. 
To disable it type this in ex mode or put it in your atprc file:
<div class=command>
	augroup LatexBox_HighlightPairs <br>
	    au!<br>
	 augroup END </div>
</p>

<p>There is a colour scheme included: coots-beauty-256. You need 256 colours to use
it (in the terminal). </p>

<p>These are the highlights groups defined for various files and the default
links:

<h4>ToC file</h4>

	<div class=indented><table border=0 vspace=0 cellspacing=1 >
	    <tr><td>highlight atp_FileName</td><td> Title</td></tr>
	    <tr><td>highlight atp_LineNr</td><td> LineNr</td></tr>
	    <tr><td>highlight atp_Number</td><td> Number</td></tr>
	    <tr><td>highlight atp_Chapter</td><td> Label</td></tr>
	    <tr><td>highlight atp_Section</td><td> Label</td></tr>
	    <tr><td>highlight atp_SubSection</td><td>Label</td></tr>
	    <tr><td>highlight atp_Abstract</td><td>Label</td><td>this group highlights abstract and all the unnumbered chapters and the bibliography.</td></tr>
	 </table></div>
		
    </p>The chapter group highlights or chapters, or sections, or parts, depending
    what is your top level section in your latex document. This applies,
    accordingly, to other groups.</p>

<h4>Labels file</h4>
    <div class=indented><table border=0 vspace=0 cellspacing=1 >
	<tr><td>highlight atp_label_FileName</td><td>Title</td></tr>
	<tr><td>highlight atp_label_LineNr</td><td>LineNr</td></tr>
	<tr><td>highlight atp_label_Name</td><td>Label</td></tr>
	<tr><td>highlight atp_label_Counter</td><td>Keyword</td></tr>
    </table></div>
<h4>BibSearch file</h4>
<p>this is very much the same as the standard syntax for bib files. Groups
    are named bibsearch&ltNAME&gt instead of bib&ltNAME&gt. There is one more group
    added:
	<div class=indented>highlight bibsearchInfo</div>
    which highlights the line number of the bib entry in the bib file.  All
    bibsearch groups are by default linked to the bib groups.</p>

    <p>Yet, there is no default highlighting, try coots-beauty-256 colour scheme.
    If you like it, I'm glad, if you have a nice (non standard) colour scheme,
    I'm happy to get it, if you like to share it.</p>

    <h4>Status line:</h4>
    <p>The notification message that your compiler is running can be highlighted.
    For this set the variables: 
    	<div class=variable>g:atp_notification_{g:colors_name}_gui</div>
    	<div class=variable>g:atp_notification_{g:colors_name}_guifg</div>
    	<div class=variable>g:atp_notification_{g:colors_name}_guibg</div>
   Their values will be passed to gui guifg and guibg values of the highlight
    command. The g:colors_name variable is set by colour scheme. Usually it is
    just the colour scheme name but there might be a difference, for example:
    the provided colour scheme file name is 'coots-beauty-256' but the variable
    is set to 'coots_beauty_256'. Example: 
    	<div class=example>let g:atp_notification_coots_beauty_256_gui="DeepPink4"</div>
   will set the foreground colour of 'pdfLaTeX' message to DeepPink4.</p>
</p>
<a name="atp-highlight-notification"></a>
    </p>The status message 'LaTeX' ( if you use latex or 'pdfLaTeX' when you use
    pdflatex, and so on) can be highlighted. There are several variables to
    set this: 
	    <div class=variable>g:atp_notification_{g:colors_name}_gui</div>
	    <div class=variable>g:atp_notification_{g:colors_name}_guifg</div>
	    <div class=variable>g:atp_notification_{g:colors_name}_guibg</div>
	    <div class=variable>g:atp_notification_{g:colors_name}_cterm</div>
	    <div class=variable>g:atp_notification_{g:colors_name}_ctermfg</div>
	    <div class=variable>g:atp_notification_{g:colors_name}_ctermbg</div>
   where g:colors_name is the name of the colour scheme, for example the
    supplied colour scheme with atp 'runtimepath/colors/coots-beauty-256' has
    name 'coots_beauty_256' so the first variable should be
	<div class=variable>g:atp_highlight_coots_beauty_256_gui</div>
   value of these variables are used to set highlight for the group UserN
    where N is the value of g:atp_statusNotifHi. Its value should be
    0,1,...,9. Where 0 means no highlight for status notification (which is
    the default). If it is set to positive value then the default values of
    these variables should give the same colour as the status line has.</p>

    <a name="g:atp_StatusLine"></a>
    <p>The variable g:atp_StatusLine is stores the value of Vim option
    'statusline'; actually 'statusline' option is set by:
	<div class=variable>set statusline=%!g:atp_StatusLine</div></p>

<a name="atp-remarks"></a>
<h2>FINAL REMARKS</h2>
	
<p>To see some messages that are issued you can use the |:mes| command.</p>

<p>If you find this plugin useful and have some comments you are cordially
invited to write to the author: &ltmszamot [AT] gmail [dot] com&gt, add some
"karma" poitns on vim script page, make a recommendation or write a review on
SourceForge: <a href="#atp-sourceforge">atp-sourceforge</a>.</p>

<p>Best, and hopefully you will find this useful :) </p>
<div class=indented>Marcin Szamotulski</div>
	
<a name="atp-copy-rights"></a>	
<h2>COPY RIGHTS</h2>


    <p>Copyright (C) 2010 Marcin Szamotulski Permission is hereby granted to use
    and distribute this code, with or without modifications, provided that
    this copyright notice is copied with it. </p>

    <p>Automatic Tex Plugin for Vim is free software: you can redistribute it
    and/or modify it under the terms of the GNU General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.</p>
 
    <p>Automatic Tex Plugin for Vim is distributed in the hope that it will be
    useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
    Public License for more details.</p>
 
    <p>You should have received a copy of the GNU General Public License along
    with Automatic Tex Plugin for Vim.  If not, see <a
    href="http://www.gnu.org/licenses">here</a>.</p>

    <p>This licence applies to all files shipped with Automatic Tex Plugin,
    exluding the following two dictionary files:
    <div class=indented>"ftplugin/ATP_files/dictionaries/dictionary",</div>
    <div class=indented>"ftplugin/ATP_files/dictionaries/SIunits"</div> 
   where taken from latex-suite Vim plugin and are under Vim charity
   |license|.</p>
</body>
</html>
