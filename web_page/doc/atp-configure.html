<head>
    <link rel="stylesheet" href="../doc_style.css"> 
    <link rel="shortcut icon" type="image/x-icon" href="../vim_shortcut.ico">
</head>
<a name="atp-configure"></a> <a name="atp-variables"></a>
<h2>HOW TO CONFIGURE ATP TO YOUR NEEDS</h2>
<div>
    <p class="alignleft"><a href="atp-omnicompletion.html">Previous:</a> Omni Completion</p>
    <p class="aligncenter"><a href="index.html">Table of Contents</a></p>
    <p class="alignright"><a href="atp-ProjectFiles.html">Next:</a> Project Files</p>
</div>
<div style="clear: both;"></div>
<p>There are several options you can set, and they might be set in your Vimrc
file. The default values are given below (except the completion setup and
bibtex documented above). Note: not all variables are listed below.</p>

<a name="atprc"></a>
$HOME/.atprc.vim (only on Unix and GNU/Linux) or<br> 
$VIMRUNTIME/ftplugin/ATP_files/atprc.vim					
<p>A configuration file for ATP. You do not have to use autocommands to set
local-buffer variables, just place them here. The settings in <a
    href="#atprc">atprc</a> file override the values in the project script (<a
    href="#atp-ProjectScript">atp-ProjectScript</a>). You can also overwrite
the plugin maps there it you want to have different behaviour on the key map
used by ATP.</p>

<p>Tip: If you want to see (almost) all the variables, type ':let g:atp_&ltCTRL_D&gt',
and ':let b:atp_&ltCTRL_D&gt'.</p>

<p>All buffer variables (see |b:var|), i.e. these which name begins with "b:",
should be set in your |vimrc| or |atprc| file. If you want to use your vimrc file
then the best way to do that is by using an autocommand:</p>
<div class=aucommand>au BufReadPre *.tex let b:atp_TexCompiler="latex"</div>
If you put just let |b:atp_TexCompiler|, this will also work but not always: for
example when you open a new buffer in existing Vim session. However, if you
put them in your |atprc| it is enough to use the standard "let b:...=".</p>
<a name="b:atp_TexCompiler"></a>
<div class=variable>let b:atp_TexCompiler	= "pdflatex"</div>
	<p>Used by functions: TEX() (map \l, imap \l), VTEX() (map &ltF5&gt, imap &ltF5&gt)</p>

	<p>You can set it to latex, tex, luatex, and so on and possibly to
	lilypond as well. </p> 

	<p>There is a command to set this variable with nice completion, see
	<a href="atp-commands.html#atp-:Compiler">atp-:Compiler.</a></p> 
<a name="b:atp_TexCompilerVariable"></a>
<div class=variable>let b:atp_TexCompilerVariable = "max_print_line=2000"</div> 		
<p>You can use it to set an environment variables for the compiler. The
"max_print_line" sets the maximal length of a line in the log file.  The value
2000 is high enough to prevent line breaking.</p>

<p>Note: the gramar for this variable: it should be a semicolon separated list
of variables and values, i.e. 'variable_1=value_1;variable_2=value_2'</p>
<a name="b:atp_BibCompiler"></a>
<div class=variable>let b:atp_BibCompiler	= "bibtex"</div>
<p>This variable sets the bibtex backend. There are other programs which might
be used, for example biber and pybib (not tested with ATP).</p>
	
<p>The default value will be "biber" if the preamule contains
\usepackge[backend=biber]{biblatex}. If it is set to "biber" ATP will adjust
<a href="#g:atp_keep">g:atp_keep</a> variable (add run.xml, bcf extensions)
when you use <a href="atp-commands.html#atp-:TEX">atp-:TEX,</a> <a
    href="atp-commands.html#atp-:Bibtex">atp-:Bibtex,</a> or <a
    href="atp-commands.html#atp-:MakeLatex">atp-:MakeLatex </a>commands.</p>


<a name="b:atp_TexFlavor"></a>
<div class=variable>let b:atp_TexFlavor	= "tex"</div>	
<p>If you are editing a plain tex file it is automatically set to 'plaintex',
then you get highlighting for $$:$$. Some other features are planned (you can
also set this while editing a 'tex' file, i.e.  latex document but using $$:$$
is latex is not recommended it is know to break some latex specific
things).</p>
<a name="b:atp_TexOptions"></a>
<div class=variable>let b:atp_TexOptions	= "-synctex=1"</div>
<p>This is a comma ',' sepparated list of TeX compiler options. If you want to
set some additional options to your tex compiler you can use this variable,
note that '-output-directory' and '-interaction' are set by ATP. </p>

<a name="b:atp_OutDir"></a>
<div class=variable>let b:atp_OutDir	= fnameescape(fnamemodify(resolve(b:atp_MainFile,":h")) . "/"</div>
	<p>This is the directory in which tex will put the output files. If the
	open file is not a symbolic link it is equal to the directory in which
	the tex file is located. If the open file is a symbolic link it points
	to the directory in which the real file is located. </p>
	
	<p>If you set this variable to './' (or '.') and change the current
	working directory for example to /tmp (:cd /tmp) then the latex output
	will be placed in /tmp, i.e. it will move with with cd. However, the
	default value of b:atp_OutDir is not affected by :cd command.</p>

	<p>White spaces and other characters should not be escaped. It will be
	quoted in '...' using the |shellescape()| function.</p>

	<p>You can see the current output directory in the status (it is in the
	short notation) to see it whole type:
		<div class=example>:echo b:atp_OutDir</div>
	or use the function ShowOptions(). See <a
	    href="atp-commands.html#apt-:ShowOptions">apt-:ShowOptions</a>.</p>		

	<p>If in your environment the variable $TEXMFOUTDIR is set the value of
	b:atp_OutDir will be set to its value.</p>

<a name="b:atp_auruns"></a>
 <div class=variable>let b:atp_auruns	= 1</div>
	<p>This variable control how many times the automatic function calls tex
	compiler (consecutively). It is useful if you are working with PDF
	files and you want to have bookmarks (you can get them using hyperref
	package with the option: bookmarks. Then set b:atp_auruns to '2'.</p>

<a name="b:atp_running"></a>
 <div class=variable>b:atp_running</div>
	<p>This variable stores the current number of running instances of latex.
	When it is greater than 1 a message in the status line is shown. If :PID
	command returns that no latex is running this variable this variable
	is reset to 0. </p>

<a name="g:atp_MathVimOptions"></a>
 <div class=variable>g:atp_MathVimOptions	= { 'textwidth' : '0' }</div>
	<p>This variable is a dictionary of Vim settings and its values which
	will be valid when you edit mathematics inside the pairs \(:\), $:$,
	\[:\], $$:$$ (only in plain tex files or if g:atp_TexFlavour
	= 'plaintex').  For example, the default value will toggle between
	your 'textwidth' in non-math and 0 in math.  The dictionary may
	contain short option names equally well as long names.</p>

	<p>Note: the standard tex syntax file defines other zones: for example
	for align and equation environments (and many others) but some how
	they are not accessible using synstack() function. </p>
			
	<p>This feature can be turned off setting variable 
			<div class=variable>g:atp_SetMathVimOptions</div>
	to '0', the default is '1'.</p>
<a name="g:atp_autex_check_if_closed"></a>
 <div class=variable>let g:atp_autex_check_if_closed = 1</div> 
	<p>This feature is not implemented.
	tex run if all environments \begin:\end, \(:\) and \[:\] are closed.
	Set g:atp_autex_check_if_closed=0 in order to not make the checks.</p>

	<a name="g:texmf"></a>
 <div class=variable>let g:texmf	= $HOME/texmf</div>
	<p>This variable configures where input files are placed. See
	<a href="atp-commands.html#atp-:EditInputFile">atp-:EditInputFile</a>.</p>

<a name="g:askforoutdir"></a>
 <div class=variable>let g:askforoutdir	= 0</div>
	<p>Its values are 1 and 0.  When it is set to 1 you will be asked for the
	name of a directory where tex will put output files, note that this
	name should end with a "/".</p>
<a name="b:atp_Viewer"></a>
 <div class=variable>let b:atp_Viewer	= "okular"</div>
	<p>it was tested with Xpdf, Evince, ePdfViewer, Kpdf, Okular, Xdvi and
	they all works fine. I'm using Xpdf and the Xpdf server options are
	supported so that the file is automatically reloaded (other viewers,
	except epdfview, have this functionality as well. This do not works
	for acroread. Read more about viewers in <a
	    href="#atp-viewers">atp-viewers</a>.</p> 

	<p>If you use program b:atp_Viewer then you can use the variable
	b:atp_{b:atp_Viewer}Options to set the options (it is a vim list), for
	example if b:atp_Viewer="xpdf" then you might use:</p>

<a name="atp-Viewers_Options"></a> <a name="b:atp_xdviOptions"></a> <a name="b:atp_xpdfOptions"></a> <a name="b:atp_okularOptions"></a> <a name="b:atp_evinceOptions"></a>
<a href="#b:atp_xpdfOptions">b:atp_xpdfOptions</a>
<a href="#b:atp_xdviOptions">b:atp_xdviOptions</a>
<a href="#b:atp_okularOptions">b:atp_okularOptions</a>
<a href="#b:atp_evinceOptions">b:atp_evinceOptions</a>
<p>, etc ... (also global variables g:atp_...Options)
	Used by function: ViewOutput() (map \v, map &ltF3&gt, imap &ltF3&gt)</p>

	<p>These are lists in which every viewer switch and its value should be
	placed as element (seprate!). See examples below. </p>

	<p>For example, if you want to have different look of one document you can
	set it to "-bg gray20". Some examples:
 	<div class=variable>let b:atp_xpdfOptions	= ['-bg', 'Grey30', '-mattecolor', 'SlateBlue2', '-papercolor', 'White']</div>
	<div class=variable>let g:atp_xpdfOptions	= ['-bg', 'NavajoWhite4', '-fg', 'black', '-mattecolor', 'burlywood']</div>
	<div class=variable>let b:atp_xdviOptions	= ['-expertmode', '0', '-s', '6']</div>
	
<a name="g:atp_XpdfServer"></a> 
 <div class=variable>let b:atp_XpdfServer=fnamemodify(expand("%"),":t")	</div>	
	<p>Used by function: ViewOutput() (map \v, map &ltF3&gt, imap &ltF3&gt)</p>

	<p>It is equal to the name of the source file. You do not need escape
	spaces in the name (shellescape() function is used before it is send
	to the shell).</p>
<a name="b:atp_OpenViewer"></a>	
 <div class=variable>let b:atp_OpenViewer	= 1</div>
	<p>If the function which calls TeX compiler do not see that you are
	viewing the output file it will open it for you if b:atp_OpenViewer=1.
	Otherwise, this feature is disabled.</p>

 <div class=variable>let g:atp_delete_output	= 0</div>
	<p>If set to 1 then Delete function (map <F6>d) will delete also the
	output file.</p>	
<a name="g:atp_cpcmd"></a>
 <div class=variable>let g:atp_cpcmd		= "/bin/cp"</div>
 	<p>This sets the copy command used by compiler. The value tries to not use
	shell internal function and to avoid the -i switch (ask if overwrite).</p> 

<a name="g:atp_tex_extensions"></a>	
<div class=variable> let g:atp_tex_extensions=["aux", "log", "bbl", "blg", "bcf", "run.xml", "spl", "snm", "nav", "thm", "brf", "out", "toc", "mpx", "idx", "maf", "blg", "glo", "mtc[0-9]", "mtc1[0-9]", "pdfsync" , "ind"]</div>	
<p>This list is used by the <a href="atp-commands.html#atp-:Delete">atp-:Delete</a> command which deletes all the
	 files with the specified extension in the directory <a
	     href="#b:atp_OutDir">b:atp_OutDir</a>.</p>
<a name="g:atp_keep"></a>			
<div class=variable> let g:atp_keep	= [ "log", "aux", "toc", "bbl", "ind", "synctex.gz", "blg", "loa", "toc", "lot", "lof", "thm", "out" ]</div>
	<p>Files with an extension belonging to this list will be copied from
	'b:atp_OutDir' to the temporary directory with appropriate name. Then it
	will be used by (La)TeX. (log file will be copied after it is created,
	other files will be copied back and forth between 'b:atp_OutDir' and the
	temporary directory). These four elements: log,aux,toc,bbl are
	essentially minimum to work with: table of contents, pdf-bookmarks and
	bibtex. There are possibly other classes, like beamer, or packages
	like theorem (produce .thm files) which will need to configure this
	variable.</p>

	<p>If you use "biber" ATP will add "run.xml" and "bcf".</p>

	<p>You can change this variable by the command:
	<div class=variable>	:let g:atp_keep+=["spl"]</div>
<a name="g:printeroptions"></a>		
<div class=variable> let g:printeroptions	= ""</div>
	<p>You can set the printer options. These are options for the 'lpr'
	command, which will print the output file (pdf or dvi) this depends on
	the b:atp_TexCompiler that you use.</p>
<a name="g:atp_TexCommand"></a>
 <div class=variable>g:atp_TexCommand</div>
	<p>This variable is for debugging purposes. It stores the last executed command to
	compile your document. It changes also when your compiler was run
	automatically.
		<div class=command>:TEX</div>
		<div class=command>:echo g:atp_TexCommand</div>
		<div class=command>:TEX!</div>
		<div class=command>:echo g:atp_TexCommand</div>
	It is read-only variable.</p>

	<a name="b:atp_TempDir"></a>
 <div class=variable>b:atp_TempDir = b:atp_OutDir/.tmp</div>
	<p>In this directory vim (or python) will make a temporary directory
	(with a unique name) to which output files will be put by your TeX
	compiler. This is done so to prevent overwriting the output file while
	the compelation is being done (this can cause problems when there are
	many TeX processes and the Viewer is accessing not yet compilated
	file). The output files are copied back to b:atp_OutDir after
	compelation. The tmporary directory is passed to your TeX compiler
	using '-output-directory' switch. </p> 
<a name="g:atp_TempDir"></a>
 <div class=variable>g:atp_TempDir</div>
	<p>In this direcory the logs of ATP are stored. If vim has python support
	is created by python in most secure way available (readable only by
	the user) if not it is made using mkdir() vim function with 0700
	permissions.</p>
<a name="g:atp_CompilersDict"></a>
 <pre><div class=variable>let g:atp_CompilersDict 	= { 
		\ "pdflatex": ".pdf", 		"pdftex" 	: ".pdf", 
		\ "xetex" 	: ".pdf", 	"latex" 	: ".dvi", 
		\ "tex" 	: ".dvi",	"elatex"	: ".dvi",
		\ "etex"	: ".dvi", 	"luatex"	: ".pdf"}
</div></pre>
	<p>This variable is used to associate an extension to the compiler that
	is used.</p>


<div class=variable>g:defaultbibflags</div>		see <a href="#atp-bibflags:default">atp-bibflags:default</a>
<div class=variable>g:defaultallbibflags</div>		see <a href="#atp-bibflags:all">atp-bibflags:all</a>
<div class=variable>b:atp_LastBibFlags</div>		see <a href="#atp-bibflags:last">atp-bibflags:last</a>

<div class=variable>b:bibfiles</div>				see <a href="#atp-variables-bib">atp-variables-bib</a>
<div class=variable>s:bibfiles</div>
<div class=variable>s:allbibfiles</div>
<div class=variable>s:notreadablebibfiles</div>
    <p>For more on bib flags see <a href="#atp-bibflags">atp-bibflags</a>.</p>

 <div class=variable>let t:toc_window_width=g:atp_toc_window_width</div>
	<p>t:toc_window with is set to g:atp_toc_window_width (by default is 30)
	The globale variable configures the initial width of the window with
	table of contents.</p>
 <div class=variable>let t:labels_window_width=30</div>
	<p>g:labels_window_width (by default not set, if set overrides
	t:labels_window_width)
	Configures the initial width of the window with labels.</p>
 <div class=variable>g:atp_statusline</div>
	<p>by default it is not set, put the line</p>
	<div class=variable>let g:atp_statusline=0</div>
	<p>in your |vimrc| or <a href="#atprc">atprc</a> file if you do not want the status line provided by this
	plugin. (See <a href="atp-commands.html#atp-:Status">atp-:Status</a>).</p>

 <div class=variable>let b:atp_TruncateStatuSection=40</div>
	<p>This variable sets how many characters of the section/subsection title
	(or chapter/section titles if you write a book) should be shown in the
	status line.  Section title and subsection title gets equal amount of
	characters.</p>

 <div class=variable>g:atp_kpsewhich_tex</div>
 <div class=variable>g:atp_raw_kpsewhich_tex</div>
	<p>This two variables stores the information returned by 
	    <div class=indented>'kpsewhich -show-path tex'</div>
	They are locked. The first one has pretended '**' wildcards to every
	directory, which is done for using with globpath() and findfile()
	functions.</p>


