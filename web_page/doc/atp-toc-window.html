<head>
    <link rel="stylesheet" href="../doc_style.css"> 
    <link rel="shortcut icon" type="image/x-icon" href="vim_shortcut.ico">
</head>
<a name="atp-toc-window"></a>
<h2>TABLE OF CONTENTS WINDOW</h2>
<div>
    <p class="alignleft"><a href="atp-commands.html">Previous:</a> Functions and Commands</p>
    <p class="aligncenter"><a href="index.html">Table of Contents</a></p>
    <p class="alignright"><a href="atp-bibtex.html">Next:</a> Bibtex filetype plugin</p>
</div>
<div style="clear: both;"></div>

<p>For the table of contents command and maps read <a href="#atp-:TOC">atp-:TOC</a>.</p>

<p>The Table of Contents window is used by both <a
    href="#atp-:TOC">atp-:TOC</a> and <a href="#atp-:Label">atp-:Labels</a>
commands.</p>

<p>In the Table of Contents window there are the following nmaps:</p>

<div class=indented>
<table border=0 vspace=0 cellspacing=1 >
    <tr><td valign=top>'e'</td><td>to echo the line from your tex file</td></tr>
    <tr><td valign=top>'y' or 'c'</td><td>to yank the label of the chapter under the cursor
			    to a register, if it exists,</td></tr>
    <tr><td valign=top>'p'</td><td>to paste it directly to your tex file (just after the
			    current cursor position), </td></tr>
    <tr><td valign=top>'s'</td><td>it splits the window with your tex source file and sets
	    the current line to the beginning of the chapter/section under the
	    cursor,</td></tr>
    <tr><td valign=top>'q'</td><td>to quit, and finally, </td></tr>
    <tr><td valign=top>&ltEnter&gt</td><td>to go to the chapter under the cursor and close ToC.</td></tr>
    <tr><td valign=top>&ltspace&gt</td><td>to go to the chapter under the cursor but leave ToC open.</td></tr>
</table></div>
			    

<p>There are also commands: ':C' and ':P', which do the same as 'c' and 'p'
mappings. They all call the function 'Yank(<where>)', the argument &ltwhere&gt
can be one of: '@&ltregister name&gt' or 'p'. </p>

<p>You can also delete and paste sections using the Table of Contents
window:</p>

<a name="atp-:YankSection"></a> <a name="atp-:DeleteSection"></a> <a name="atp-:PasteSection"></a> <a name="atp-:SectionStack"></a>
These commands are available in table of contents. They act on
parts/chapters/sections/subsections/subsubsections.
<p><div class=command>:YankSection [register]</div>
<div class=indented>Yank the section under the cursor (in table of contents) to the given register.
If the register is not specified use the unnamed register (|registers|).</div></p>
	 
<p>The other commands do not use registers but an internal stack.
<div class=command>:DeleteSection</div>
<div class=command>:PasteSection</div>
<div class=command>:SectionStack</div>
<div class=indented>Using ':DeleteSection' you can delete the section under cursor together 
with all its subsections.  /Section can be one of: part, chapter,
section, subsection, subsubsection, or bibliography/.  Deleted section
will be added to a stack which can be shown using the command
':SectionStack' There is a command to paste the section from section
stack ':PasteSection'. By default it pastes the most recent element in
the stack. Passing a number will paste that element of the stack
/bear in mind that then numbers of sections in the stack will change/.

<p>':PasteSection' puts the section just after where current section ends
(section under the cursor in the ToC buffer).</p>

<p>Note: If you use bibtex commands to make bibliography ATP finds the line
which contains '\bibliography' command. And then searches backward for the
first line which is a blank line. The next line is assumed to be the first line
of bibliography.  Thus to move the last section before bibliography or the
bibliography itself its better you put a blank line before bibliography
commands.  The same applies for bibliographies put in the middle of document
(end of a chapter, part, etc.) The end of bibliography is found in the same way
as the end of subsubsection.  If you use
\begin{thebibliography}:\end{thebibliography} there is no such a problem.</p>

<p>If you want to paste a section before the first section, use the line with
the file name.</p></div></p>

<a name="atp-:Undo"></a>
<p><div class=command>:Undo</div> 
 <div class=map>nnoremap u, nnoremap U, nnoremap g-, nnoremap g+</div> 
	<div class=indented>You can use undo. The :Undo command will undo in the buffer under
	the cursor (it switches to the correct window, using the Vim undo
	function, and runs :TOC command - so after all your back in ToC.). The
	':Undo' command has one argument - the Vim undo command to use, it is
	one of: 'u/U/g-/g+' (the default is 'u'). They are mapped to 'u','U',
	'g-' and 'g+'.  (only in the ToC buffer).  Note: ':Undo' command
	doesn't changes the Section Stack.

	<p>There is one more level of security: There is a global variable which
	stores all the deleted sections together with some information about
	them:
	<div class=variable>g:atp_SectionBackup</div>
	it is a Vim list (see |List|). Each entry is a list of the following format:
	<div class=variable>[ &lttitle&gt, &lttype&gt, &ltdeleted_section&gt, &ltsection_nr&gt, &ltfile&gt ]</div>
	where &lttitle&gt is the section title, &lttype&gt is one of: part, chapter, 
	section, subsection, subsubsection bibliography or abstract.  Deleted
	section is a list of deleted lines, &ltsection_nr&gt is the number of the
	section that it had before delete, &ltfile&gt is the full path to the
	file which it comes from.  If you need to use it, you can use the Vim
	function |append()| to put the &ltdeleted_section&gt in the right place.</p></div></p>

<p>NOTE:
	<div class=indented>You may want to have a map:
	<div class=aucommand>:au FileType toc_atp nnoremap dd :DeleteSection&ltCR&gt</div>
	this can be put in your '$HOME/.atp.vim' configuration file.</div></p>
